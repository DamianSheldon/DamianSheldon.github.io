<div class="highlight"><pre>// Step 1:
<span class="nv">$ </span>sudo vim /etc/passwd

// Step 2:在文件末尾,你应该能找到类似这样的行
git:x:1000:1000::/home/git:/bin/sh

// Step 3:把 bin/sh 改为 /usr/bin/git-shell <span class="o">(</span>或者用 which git-shell 查看它的位置<span class="o">)</span>。该行修改后的样子如下
git:x:1000:1000::/home/git:/usr/bin/git-shell

// Step 4:现在 git 用户只能用 SSH 连接来推送和获取 Git 仓库,而不能直接使用主机 shell。
// 尝试登录的话,你会 看到下面这样的拒绝信息
<span class="nv">$ </span>ssh git@gitserver
fatal: What <span class="k">do</span> you think I am? A shell? <span class="o">(</span>你以为我是个啥?shell吗?<span class="o">)</span> 
Connection to gitserver closed. <span class="o">(</span>gitserver 连接已断开。<span class="o">)</span>
</pre></div>