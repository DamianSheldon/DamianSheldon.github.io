
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Here's where it all happens for me.  | Hello World</title>

<meta name="author" content="Sheldon"> 

<meta name="description" content="Sheldon's personal technology blog about iOS, Android, Back-end, Web and English."> <meta name="keywords" content="iOS, Objective-C, Swift, Xcode, Java, Android Studio, Eclipse, Web, HTML, Javascript, CSS, PHP, English">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Hello World" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="/javascripts/libs/jquery.min.js"></script>
    <script src="/javascripts/libs/jquery-migrate-1.4.1.min.js"></script>
	<script type="text/javascript" src="/javascripts/jquery.fancybox.pack.js"></script>

<script language="Javascript" type="text/javascript">
$(document).ready(
  function() {
    (function($) {
      $(".fancybox[data-content-id]").each(function() {
        this.href = $(this).data('content-id');
      });
      $(".fancybox").fancybox({
        beforeLoad: function() {
          var el, 
              id = $(this.element).data('title-id');

          if (id) {
            el = $('#' + id);

            if (el.length) {
              this.title = el.html();
            }
          }
          if ($(this).data('content')) {
            this.content = $(this).data('content');
          }
        },
        helpers: {
          title: {
            type: 'inside'
          }
        }
      });
    })(jQuery);
  }
);
</script>

	<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">

</head>



<body>
	<header id="header" class="inner">
   <form id="main-search" method="get" action="http://www.bing.com/search" accept-charset="utf-8" target="_blank">
<input type="text" name="q" size="30" maxlength="255" placeholder="Search" />
<input type="hidden" name="q1" value="site:DamianSheldon.github.io" />
</form>



<h1><a href="/">Hello World</a></h1>
<h4>Here's where it all happens for me.</h4>
<nav id="main-nav"><ul>
    <li><a href="/">Blog</a></li>
    <li><a href="/archives">Archive</a></li>
    <li><a href="/ios-development">iOS</a></li>
    <li><a href="/android">Android</a></li>
    <li><a href="/web-development">Web</a></li>
    <li><a href="/english">English</a></li>
    <li><a href="/about">About</a></li>
    <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
</ul>

<!--<form class="search" action="http://www.yahoo.com.cn/search" method="get">
    <fieldset role="search">
        <input type="hidden" name="vs" value="http://DamianSheldon.github.io">
        <input class="search" type="text" name="p" results="0" placeholder="Search">
    </fieldset>
</form>
-->
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul>
    <li><a href="/">Blog</a></li>
    <li><a href="/archives">Archive</a></li>
    <li><a href="/ios-development">iOS</a></li>
    <li><a href="/android">Android</a></li>
    <li><a href="/web-development">Web</a></li>
    <li><a href="/english">English</a></li>
    <li><a href="/about">About</a></li>
    <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
</ul>

<!--<form class="search" action="http://www.yahoo.com.cn/search" method="get">
    <fieldset role="search">
        <input type="hidden" name="vs" value="http://DamianSheldon.github.io">
        <input class="search" type="text" name="p" results="0" placeholder="Search">
    </fieldset>
</form>
-->
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.bing.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:DamianSheldon.github.io">
			</form>
		</div>
	</div>
</nav>


</header>

	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/core-data-chu-bu.html">
		
			Core Data 使用笔记</a>
	</h2>
	<div class="entry-content">
		<ol>
<li>Core Data是什么？</li>
<li>为什么使用Core Data?</li>
<li>如何使用Core Data?</li>
</ol>


<h2>Core Data是什么？</h2>

<blockquote><p>Core Data is a framework that you use to manage the model layer objects in your application. It provides generalized and automated solutions to common tasks associated with object life-cycle and object graph management, including persistence.</p></blockquote>

<p>Core Data 是一个你在应用中用来管理模型层对象的框架。 它为关联对象生命周期和对象图管理的常见任务提供了通用的和自动的解决方案，包括持久化。</p>

<h2>为什么使用Core Data？</h2>

<blockquote><p>There are a number of reasons why it may be appropriate for you to use Core Data. One of the simplest metrics is that, with Core Data, the amount of code you write to support the model layer of your application is typically 50% to 70% smaller as measured by lines of code. This is primarily due to the features listed above—the features Core Data provides are features you don’t have to implement yourself. Moreover they’re features you don’t have to test yourself, and in particular you don’t have to optimize yourself.</p></blockquote>

<p>Core Data 的优点：</p>

<ul>
<li>允许你高效地从永久存储中获取模型对象和保存改变。</li>
<li>提供一个记录模型对象改变的架构。它能让你自动支持undo和redo，维护对象之间的关系。</li>
<li>允许你去维护模型对象不相交集合的编辑。不相交集合很有用，例如，让用户在一个可能会被丢弃的视图中编辑而不在另一个视图中显示的数据。</li>
<li>允许你在任何时候只在内存中保持模型对象的一个子集。这对保持你应用尽可能地使用少的内存很有用。</li>
<li>拥有数据存储版本和迁移的架构。该架构让你很容易把旧版本数据文件升级为现在的版本。</li>
</ul>



		
		<a href="/blog/core-data-chu-bu.html" class="more-link">继续阅读</a>
	</div>


<div class="meta">
	<div class="date">









  



<time datetime="2014-05-22T09:53:40+08:00" pubdate data-updated="true">22 May 2014</time></div>
	

<div class="tags">

	<a class='category' href='/blog/categories/archives/'>archives</a>, <a class='category' href='/blog/categories/ios-development/'>ios development</a>

</div>


	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/ios-concurrency-programming-gcd.html">
		
			iOS 并发编程之 GCD</a>
	</h2>
	<div class="entry-content">
		<p>在 iOS 并发编程之 Operation 中我们提到了 GCD 出现的背景，这篇文章是我对它的使用总结。</p>

<h2>GCD 是什么？</h2>

<blockquote><p>Grand Central Dispatch (GCD) dispatch queues are a powerful tool for performing tasks. Dispatch queues let you execute arbitrary blocks of code either asynchronously or synchronously with respect to the caller.</p></blockquote>

<p>GCD 分发队列是执行任务的强大工具。 分发队列可以让你异步或同步运行任务代码块。</p>

<h2>为什么使用 GCD?</h2>

<p>我们使用 GCD 的原因很可能是我们想要异步或同步运行执行任务，并且还想获得以下优势:</p>

<ul>
<li>直接简单的编程接口；</li>
<li>自动、整体的线程池管理；</li>
<li>高效的内存管理；</li>
<li>负载时不干扰内核；</li>
<li>异步分发任务到分派队列不会造成死锁；</li>
<li>优雅地处理竞争；</li>
<li>串行分派队列为锁和其他同步操作提供了更高效选择；</li>
</ul>


<h2>如何使用 GCD？</h2>

<p>在 GCD 是什么部分，我们指出它是执行任务的分发队列。除了核心的分发队列，GCD 还提供了几个其他的使用分发队列的技术来帮助我们管理代码。</p>

<h3>Dispatch groups</h3>

<p>Dispatch group 是一种监视一系列块对象已完成的方法。(你可以根据需求同步或异步地监视块。)它为需要依赖其他任务完成的代码提供了有用的同步机制。</p>

<h3>Dispatch semaphores</h3>

<p>Dispatch semaphores 类似传统的信号量，但是它通常更加高效。它仅仅在信号量不可用需要阻塞线程时才向下调用到内核。如果信号量可用，无需内核调用。</p>

<h3>Dispatch sources</h3>

<p>Dispatch source 产生通知响应指定的系统事件。你可以使用 dispatch sources 来监视像进程通知，信号和描述符等类似事件。当事件发生时，dispatch source 异步地提交你的任务到指定分发队列去处理。</p>

<p>所以要掌握如何使用 GCD，我们需要学习如何使用 Dispatch queue, Dispatch groups, Dispatch semaphores 和 Dispatch sources。</p>


		
		<a href="/blog/ios-concurrency-programming-gcd.html" class="more-link">继续阅读</a>
	</div>


<div class="meta">
	<div class="date">









  



<time datetime="2014-05-21T11:40:27+08:00" pubdate data-updated="true">21 May 2014</time></div>
	

<div class="tags">

	<a class='category' href='/blog/categories/archives/'>archives</a>, <a class='category' href='/blog/categories/ios-development/'>ios development</a>

</div>


	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/ios-concurrency-programming-operation.html">
		
			iOS 并发编程之 Operation</a>
	</h2>
	<div class="entry-content">
		<h2>背景简介</h2>

<p>在计算的早期，计算机单位时间能够执行的最大工作是由 CPU 的时钟频率决定的。但是随着技术的发展和处理器设计得更加小巧，热量和其他物理约束开始限制处理器的最大时钟频率。所以芯片制造商寻找其他办法来提高他们芯片的整体性能。通过增加核数量，单个芯片每秒可以运行更多的指令而不需要增加 CPU 的速度或者改变芯片的尺寸或者热特性。唯一的问题是如何利用额外的核。</p>

<p>应用使用多核的传统方法是创建多个线程。然而，随着核的数量增加，线程方案有很多问题。最大的问题是线程代码不能很好地扩展到任意数量的核。你不能有多少核就创建多少线程然后期望程序能正常运行。你需要知道的是有多少核可以被有效地使用，应用程序依靠自身来计算这是件很有挑战的事情。即使你得到了正确的数量，让如此多的线程高效地运行，相互之间互不影响仍然是一件十分困难的事情。</p>

<p>为了解决这些问题，OS X 和 iOS 采用了 异步设计的方案。其中一种异步开始任务的技术叫做 GCD(Grand Central Dispatch)。该技术接管了你以前需要在应用中编写的线程管理代码，并将它们下移到系统级。所有你需要做的是定义你想做的任务并把它们添加到合适的分发队列。 GCD 负责创建需要的线程并调度你的任务运行到这些线程上。因为现在线程管理是系统的一部分， GCD 为任务管理和运行提供了一个比传统线程更高效的整体方案。</p>

<p>从背景介绍我们可以看出，并发编程的根本还是线程，但是在实际的使用过程中发现在应用层来做线程的管理很困难，编写多线程代码也很难，所以 Apple 从系统级层面对线程做了封装，因此在 OS X 和 iOS 平台我们有了特定的并发编程技术 GCD。</p>

<p>到这里事情并没结束，GCD 是基于 C 接口，Apple 对它用 Objective-C 进行了进一步的包裹和封装，于是有操作队列(Operation Queue)。</p>

<p>操作队列是非常类似分发队列(dispatch queue)的 Objective-C 对象。你定义想要执行的任务并添加到操作队列，它处理这些任务的调度和执行。类似 GCD，操作队列为你处理所有的线程管理，确保任务在系统上高效快速的运行。</p>

<p>因此 iOS 开发中并发编程技术有三种：</p>

<ol>
<li>NSOperation;</li>
<li>GCD;</li>
<li>Thread.</li>
</ol>


<p>上述的顺序也是推荐使用的顺序。</p>

<h2>如何使用 Operation?</h2>

<p>Operation 的核心思想是把应用想要完成的工作封装起来，然后添加到队列中执行或手动执行。苹果在 Foundation 框架中提供了 NSOperation 这个抽象类，它为我们搭好了用户代码与系统代码交互的骨架，最小化了我们需要做的工作，只需要专注于封装我们想要做的工作。苹果很贴心，为了进一步减轻开发者负担，她还提供了两个具体的类:<code>NSInvocationOperation</code> 和 <code>NSBlockOperation</code> 用来完成日常大部分工作。</p>

<p>因此，我们使用 Operation 的方法是用具体的类封装工作或者自定义 Operation 封装工作，具体类可以满足需求时就不用去自定义 Operation 了，这样可以减少我们的工作量，封装好工作之后执行它们，方法有两种：一是加入队列;二是手动执行。</p>

<h2>使用 NSInvocationOperation 封装工作</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">@implementation</span> <span class="nc">MyCustomClass</span>
</span><span class='line'><span class="p">-</span> <span class="p">(</span><span class="bp">NSOperation</span><span class="o">*</span><span class="p">)</span><span class="nf">taskWithData:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">data</span> <span class="p">{</span>
</span><span class='line'>    <span class="bp">NSInvocationOperation</span><span class="o">*</span> <span class="n">theOp</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">NSInvocationOperation</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithTarget</span><span class="p">:</span><span class="nb">self</span>
</span><span class='line'>                    <span class="nl">selector</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">myTaskMethod</span><span class="p">:)</span> <span class="nl">object</span><span class="p">:</span><span class="n">data</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>   <span class="k">return</span> <span class="n">theOp</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// This is the method that does the actual work of the task.</span>
</span><span class='line'><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">myTaskMethod:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">data</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// Perform the task.</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>



		
		<a href="/blog/ios-concurrency-programming-operation.html" class="more-link">继续阅读</a>
	</div>


<div class="meta">
	<div class="date">









  



<time datetime="2014-05-20T09:31:07+08:00" pubdate data-updated="true">20 May 2014</time></div>
	

<div class="tags">

	<a class='category' href='/blog/categories/archives/'>archives</a>, <a class='category' href='/blog/categories/ios-development/'>ios development</a>

</div>


	
</div></article>

<nav id="pagenavi">
    
        <a href="/posts/22" class="prev">Prev</a>
    
    
        <a href="/posts/24" class="next">Next</a>
    
    
</nav>
</div>
	<footer id="footer" class="inner">Copyright &copy; 2014 - 2018

    Sheldon

<br>
<p>Powered by <a href="http://octopress.org">Octopress</p>
</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->




<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-52345084-1');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->




</body>
</html>
