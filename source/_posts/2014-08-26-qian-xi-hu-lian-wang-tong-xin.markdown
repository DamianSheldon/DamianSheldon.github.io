---
layout: post
title: "An Introduction To Computer Networks 学习笔记"
date: 2014-08-26 21:20:31 +0800
comments: true
published: false
categories: [Archives] 
keywords: Internet, TCP/IP, HTTP
description: An Introduction To Computer Networks
---

我一直想弄清楚互联网上两台计算机是如何通信的？于是我找到了 An Introduction To Computer Networks 这门课程。它对计算机网络工作原理的讲解非常到位，使我受益匪浅，是一门不可多得的网络学习课程。下面我打算用我自己的语言尝试着来描述我理解的计算机网络。



现实生活中，我们经常会和其他人交谈，通信就是我们交谈的过程，只是计算机之间的通信还没有人类那么高级。我们和其他人交谈的时候得知道对方是谁，然后才知道怎么交谈，就有所谓的见人说人话，见鬼说鬼话！计算机之间是通过MAC(Media Access Control)来标识对方的，它就相当于我们的身份证，每块网卡出厂的时候分配了一个唯一的MAC地址，那么计算机之间就可以通过发送一个带上MAC地址的消息来进行通信。理论上来讲，只要全世界的计算机都连接在一个同一个网络中，就可以用MAC地址来实现互相通信。但是这个网络会非常庞大，MAC地址又采用广播的方式，这样通信的效率会十分低下以致于无法实际应用。于是很自然地会想到把这个网络分割为若干个小网络，这样不就能解决效率低下的问题了？

实际上我们确实是这么做，这些小网络称为子网，子网之间通信同样需要标识对方，于是我们引入了IP(Internet Protocol)地址。现在通信的情况就有两种情况了：一是同一个子网的两台机器之间的通信；二是两个子网之间的机器的通信。很遗憾，IP协议不能实现两个子网内部机器之间的直接通信（虽然现在有一些方法可以缓解这个问题，但不能根治），我们只能通过分管这个子网的机器来中转。所有分管子网的机器构成所谓的互联网，它们的IP地址是全局的，子网内部IP地址是私有的，其他子网内部的机器并不知道。同时我们也为网络引入了新的设备--路由器，计算机和路由器连接起来构成整个网络。既然子网内和子网间的通信方法不同，那么我们得知道，通信的目标机器是在子网内还是子网外，所以引入了子网掩码(subnet mask)。路由器通过分别计算目标IP，自己的IP和子网掩码的按位与结果，然后对比结果就可以知道是否在相同的子网。如果结果相同，则两台机器在同一个子网，路由器查看自己的路由表直接发给连接机器或者转发给相应的路由器；如果结果不同，则两台机器不在同一个子网，路由器将消息转发给网关。网关是连接两个子网的特殊的路由器，这样私有网络的消息就可以发送给公有网络上任意一台机器。


