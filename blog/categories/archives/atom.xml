<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Archives | Hello World]]></title>
  <link href="http://DamianSheldon.github.io/blog/categories/archives/atom.xml" rel="self"/>
  <link href="http://DamianSheldon.github.io/"/>
  <updated>2015-05-08T17:18:28+08:00</updated>
  <id>http://DamianSheldon.github.io/</id>
  <author>
    <name><![CDATA[Sheldon]]></name>
    <email><![CDATA[dongmeilianghy@sina.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Enumerated constants]]></title>
    <link href="http://DamianSheldon.github.io/blog/enumerated-constants.html/"/>
    <updated>2015-05-08T16:38:20+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/enumerated-constants</id>
    <content type="html"><![CDATA[<p>Objective-C中的枚举常量大致有以下四种情形：</p>

<p>```
// 1. unnamed enumerations
enum {</p>

<pre><code>NSBorderlessWindowMask      = 0,
NSTitledWindowMask          = 1 &lt;&lt; 0,
NSClosableWindowMask        = 1 &lt;&lt; 1,
NSMiniaturizableWindowMask  = 1 &lt;&lt; 2,
NSResizableWindowMask       = 1 &lt;&lt; 3
</code></pre>

<p>};</p>

<p><code>- (void)setStyleMask:(NSUInteger)styleMask</code></p>

<p>// 2
typedef enum _NSMatrixMode {</p>

<pre><code>NSRadioModeMatrix           = 0,
NSHighlightModeMatrix       = 1,
NSListModeMatrix            = 2,
NSTrackModeMatrix           = 3
</code></pre>

<p>} NSMatrixMode;</p>

<p>// 3
typedef NS_ENUM(NSInteger, UITableViewCellStyle) {</p>

<pre><code>UITableViewCellStyleDefault,
UITableViewCellStyleValue1,
UITableViewCellStyleValue2,
UITableViewCellStyleSubtitle
</code></pre>

<p>};</p>

<p>// 4
typedef NS_OPTIONS(NSUInteger, NSLayoutFormatOptions) {</p>

<pre><code>NSLayoutFormatAlignAllLeft = (1 &lt;&lt; NSLayoutAttributeLeft),
NSLayoutFormatAlignAllRight = (1 &lt;&lt; NSLayoutAttributeRight),
NSLayoutFormatAlignAllTop = (1 &lt;&lt; NSLayoutAttributeTop),
NSLayoutFormatAlignAllBottom = (1 &lt;&lt; NSLayoutAttributeBottom),
NSLayoutFormatAlignAllLeading = (1 &lt;&lt; NSLayoutAttributeLeading),
NSLayoutFormatAlignAllTrailing = (1 &lt;&lt; NSLayoutAttributeTrailing),
NSLayoutFormatAlignAllCenterX = (1 &lt;&lt; NSLayoutAttributeCenterX),
NSLayoutFormatAlignAllCenterY = (1 &lt;&lt; NSLayoutAttributeCenterY),
NSLayoutFormatAlignAllBaseline = (1 &lt;&lt; NSLayoutAttributeBaseline),
NSLayoutFormatAlignAllLastBaseline = NSLayoutFormatAlignAllBaseline,
NSLayoutFormatAlignAllFirstBaseline NS_ENUM_AVAILABLE_IOS(8_0) = (1 &lt;&lt; NSLayoutAttributeFirstBaseline),

NSLayoutFormatAlignmentMask = 0xFFFF,

/* choose only one of these three
 */
NSLayoutFormatDirectionLeadingToTrailing = 0 &lt;&lt; 16, // default
NSLayoutFormatDirectionLeftToRight = 1 &lt;&lt; 16,
NSLayoutFormatDirectionRightToLeft = 2 &lt;&lt; 16,  

NSLayoutFormatDirectionMask = 0x3 &lt;&lt; 16,  
</code></pre>

<p>};</p>

<p>```</p>

<p>情形一相当于定义了常量，但不定义类型;<br/>
情形二定义了一个NSMatrixMode类型;</p>

<p>情形三定义了一个NSInteger的UITableViewCellStyle类型;<br/>
情形四支持C++的枚举特性。</p>

<blockquote><p>The NS_OPTIONS macro is defined in different ways if compiling as C++ or not. If it’s not C++, it’s expanded out the same as NS_ENUM. However, if it is C++, it’s expanded out slightly differently. Why? The C++ compiler acts differently when two enumeration values are bitwise OR’ed together. This is something, as shown earlier, that is commonly done with the options type of enumeration. When two values are OR’ed together, C++ considers the resulting value to be of the type the enumeration represents: NSUInteger. It also doesn’t allow the implicit cast to the enumeration type.</p></blockquote>

<p>Reference:<br/>
Effective Objective-C 2.0<br/>
<a href="http://nshipster.cn/ns_enum-ns_options/">NS_ENUM &amp; NS_OPTIONS</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Linux命令行整理]]></title>
    <link href="http://DamianSheldon.github.io/blog/linux-useful-command-line.html/"/>
    <updated>2015-03-18T21:12:56+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/linux-useful-command-line</id>
    <content type="html"><![CDATA[<h3>Create new account</h3>

<p><code>
sudo adduser --home /home/username --shell /bin/bash --ingroup git username
</code></p>

<h3>List all groups and the user names that were in each group</h3>

<p><code>``
for u in</code>cut -f1 -d: /etc/passwd`; do echo -n $u:; groups $u; done | sort</p>

<p>groups $(cut -f1 -d":&ldquo; /etc/passwd) | sort
```</p>

<h3>How to set up ssh so you aren&rsquo;t asked for a password</h3>

<p>You can create a RSA authentication key to be able to log into a remote site from your account, without having to type your password.</p>

<p>Note that once you&rsquo;ve set this up, if an intruder breaks into your account/site, they are given access to the site you are allowed in without a password, too! For this reason, this should never be done from root.</p>

<ul>
<li>Run ssh-keygen(1) on your machine, and just hit enter when asked for a password.
This will generate both a private and a public key. With older SSH versions, they will be stored in ~/.ssh/identity and ~/.ssh/identity.pub; with newer ones, they will be stored in ~/.ssh/id_rsa and ~/.ssh/id_rsa.pub.</li>
<li>Next, add the contents of the public key file into ~/.ssh/authorized_keys on the remote site (the file should be mode 600).
If you are a developer and you want to access debian.org systems with such a key, it&rsquo;s possible to have the developer database propagate your key to all of the debian.org machines. See the LDAP gateway documentation.
You should then be able to use ssh to log in to the remote server without being asked for a password.</li>
</ul>


<p>Reference:<a href="https://www.debian.org/devel/passwordlessssh">https://www.debian.org/devel/passwordlessssh</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS Thread笔记]]></title>
    <link href="http://DamianSheldon.github.io/blog/nsthread-thechnology-notes.html/"/>
    <updated>2015-03-16T16:27:17+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/nsthread-thechnology-notes</id>
    <content type="html"><![CDATA[<ol>
<li>Thread是什么？</li>
<li>iOS中怎么使用Thread？</li>
</ol>


<h3>Thread是什么</h3>

<blockquote><p>Threads are a relatively lightweight way to implement multiple paths of execution inside of an application. At the system level, programs run side by side, with the system doling out execution time to each program based on its needs and the needs of other programs. Inside each program, however, exists one or more threads of execution, which can be used to perform different tasks simultaneously or in a nearly simultaneous manner. The system itself actually manages these threads of execution, scheduling them to run on the available cores and preemptively interrupting them as needed to allow other threads to run.</p>

<p>From a technical standpoint, a thread is a combination of the kernel-level and application-level data structures needed to manage the execution of code. The kernel-level structures coordinate the dispatching of events to the thread and the preemptive scheduling of the thread on one of the available cores. The application-level structures include the call stack for storing function calls and the structures the application needs to manage and manipulate the thread’s attributes and state.</p></blockquote>

<h3>iOS中怎么使用Thread</h3>

<p>iOS中的Thread技术主要有以下两种：</p>

<table>
<thead>
<tr>
<th></th>
<th> Technology </th>
<th> Description </th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td> Cocoa threads </td>
<td> Cocoa implements threads using the NSThread class. Cocoa also provides methods on NSObject for spawning new threads and executing code on already-running threads. </td>
</tr>
<tr>
<td></td>
<td> POSIX threads </td>
<td> POSIX threads provide a C-based interface for creating threads. If you are not writing a Cocoa application, this is the best choice for creating threads. The POSIX interface is relatively simple to use and offers ample flexibility for configuring your threads.</td>
</tr>
</tbody>
</table>


<h4>Creating a Thread</h4>

<ol>
<li><p>Using NSThread</p>

<ul>
<li>Use the detachNewThreadSelector:toTarget:withObject: class method to spawn the new thread.</li>
<li>Create a new NSThread object and call its start method. (Supported only in iOS and OS X v10.5 and later.)</li>
</ul>
</li>
<li><p>Using POSIX Threads</p>

<ul>
<li>OS X and iOS provide C-based support for creating threads using the POSIX thread API. This technology can actually be used in any type of application (including Cocoa and Cocoa Touch applications) and might be more convenient if you are writing your software for multiple platforms. The POSIX routine you use to create threads is called, appropriately enough, pthread_create.</li>
</ul>
</li>
<li><p>Using NSObject to Spawn a Thread</p>

<ul>
<li>In iOS and OS X v10.5 and later, all objects have the ability to spawn a new thread and use it to execute one of their methods. The performSelectorInBackground:withObject: method creates a new detached thread and uses the specified method as the entry point for the new thread.</li>
</ul>
</li>
</ol>


<h4>Configuring Thread Attributes</h4>

<p>Thread的配置项有：</p>

<ul>
<li>Stack Size of a Thread</li>
<li>Thread-Local Storage</li>
<li>Detached State of a Thread</li>
<li>Thread Priority</li>
</ul>


<h4>Writing Your Thread Entry Routine</h4>

<p>编写Thread的入口程序通常需要做如下事项：</p>

<ul>
<li>Creating an Autorelease Pool</li>
<li>Setting Up an Exception Handler</li>
<li>Setting Up a Run Loop</li>
</ul>


<h4>Terminating a Thread</h4>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS App 开发问题汇总（二）]]></title>
    <link href="http://DamianSheldon.github.io/blog/ios-app-problems-part-2.html/"/>
    <updated>2015-03-16T16:14:50+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/ios-app-problems-part-2</id>
    <content type="html"><![CDATA[<h3>问题描述：Ad Hoc分发应用</h3>

<p>导出Ad Hoc授权应用
Xcode > Product > Archive > Export</p>

<p>安装Ad Hoc分发的应用
Open iTunes > File > Add To Library&hellip; > select Ad Hoc provisioning profile and App.ipa > Sync</p>

<h3>问题描述：Xcode编译出现如下警告提示：</h3>

<p>[WARN]warning: no rule to process file xxx.h’ of type sourcecode.c.h for architecture armv7</p>

<p>解决办法:这是因为检查到有.h文件在编译列表中了。所以只要在列表中去掉就可以了。</p>

<p>点击你的xcode项目文件，然后点击[Build Phases]，确保在[Compile Sources]中没有.h文件。</p>

<p>Reference:<a href="http://hearrain.com/2014/01/774">http://hearrain.com/2014/01/774</a></p>

<h3>问题描述：iPhone每次连接Mac都会弹出iPhoto</h3>

<p>解决办法：</p>

<ol>
<li>Plug in your iPad/iPhone</li>
<li>Open Image Capture</li>
<li>Select your device (&ldquo;devMikePad&rdquo;)</li>
<li>Press the triangle in square symbol in the lower left corner.</li>
<li>Select &ldquo;No application&rdquo; in the menu.</li>
</ol>


<p>iPhoto:
Preferences > General > &ldquo;Connecting Camera Opens &hellip;&rdquo;
set it to &ldquo;No Application&rdquo;</p>

<!--more-->


<h3>问题描述:ld: warning: directory not found for option &lsquo;-L/Users/dongmeiliang/Documents/soh.client.iOS/sohiOSApp/sohiOSApp/Component/BaiduMap_IOSSDK_v2-2/Release-iphonesimulator&rsquo;</h3>

<p>Undefined symbols for architecture x86_64:
  &ldquo;_DDExtractFileNameWithoutExtension&rdquo;, referenced from:</p>

<pre><code>  ___57-[AJSocketBinaryClientChannel setupReadTimerWithTimeout:]_block_invoke76 in libPods-sohiOSApp-AJFrame.iOS.a(AJSocketBinaryClientChannel.o)
  -[AJSocketBinaryClientChannel doReadTimeout] in libPods-sohiOSApp-AJFrame.iOS.a(AJSocketBinaryClientChannel.o)
  -[AJSocketBinaryClientChannel endCurrentRead] in libPods-sohiOSApp-AJFrame.iOS.a(AJSocketBinaryClientChannel.o)
</code></pre>

<p>  &ldquo;<em>OBJC_CLASS</em>$_DDLog&rdquo;, referenced from:</p>

<pre><code>  objc-class-ref in libPods-sohiOSApp-AJFrame.iOS.a(AJSocketBinaryClientChannel.o)
</code></pre>

<p>  &ldquo;<em>OBJC_CLASS</em>$_GCDAsyncSocket&rdquo;, referenced from:</p>

<pre><code>  objc-class-ref in libPods-sohiOSApp-AJFrame.iOS.a(AJTcpConnector.o)
</code></pre>

<p>ld: symbol(s) not found for architecture x86_64</p>

<p>解决办法：从输出的日志可以看出问题是出在链接，由Cocoapods管理的第三方库安装后链接配置项没有设置正确，需要手动设置没有被自动链接的库，例如这里我需要链接：-l"Pods-CocoaAsyncSocket"。</p>

<h3>问题描述:dyld: could not load inserted library &lsquo;/usr/lib/libgmalloc.dylib&rsquo; because image not found</h3>

<p>解决办法：Edit Scheme > Run > Diagnostics > Memory Managerment</p>

<p>Malloc uncheck Enable Scribble</p>

<pre><code>    uncheck Enable Guard Edges  
    uncheck Enable Guard Malloc  
</code></pre>

<p>Reference:<a href="http://blog.csdn.net/chocolateloveme/article/details/18258443">http://blog.csdn.net/chocolateloveme/article/details/18258443</a></p>

<h3>问题描述：APNs服务器地址</h3>

<p>答案：
gateway.push.apple.com 2195 (Product)<br/>
gateway.sandbox.push.apple.com 2195 (Development)</p>

<h3>问题描述：/Users/user/XCodeWork/iPhoneDev/MyAppSourceFolder/en.lproj/MainWindow-iPhone.xib:</h3>

<p>  Compilation failed. Unable to write to path:      <br/>
  /Users/user/Library/Developer/Xcode/DerivedData/MYAPPNAME-
  dudnhxzgpqtcnqcgaguirvkhmvco/Build/Intermediates/ArchiveIntermediates/
  MYAPPNAME/InstallationBuildProductsLocation/Applications/MyAppname.app/
  en.lproj/MainWindow-iPhone.nib</p>

<p>解决办法：For every xib&rsquo;s that we&rsquo;ve problems, in the right panel go to the first tab, &ldquo;Interface Builder Document&rdquo; &ndash;> &ldquo;Builds for&rdquo; and select &ldquo;iOS 7.0 and Later&rdquo;. My old configuration was &ldquo;iOS 4.3 and Later&rdquo;.</p>

<p>Reference:<a href="http://stackoverflow.com/questions/19688276/interface-builder-xib-error-unable-to-write-to-path">http://stackoverflow.com/questions/19688276/interface-builder-xib-error-unable-to-write-to-path</a></p>

<h3>问题描述:duplicate symbol <em>OBJC_METACLASS</em>$_SDWebImagePrefetcher in:</h3>

<pre><code>/Users/dongmeiliang/Library/Developer/Xcode/DerivedData/jiaxiaotong-dxrmnnwbexugoqfekesgvdiijcdm/Build/Products/Debug-iphonesimulator/libPods-weima-SDWebImage.a(SDWebImagePrefetcher.o)
/Users/dongmeiliang/Library/Developer/Xcode/DerivedData/jiaxiaotong-dxrmnnwbexugoqfekesgvdiijcdm/Build/Products/Debug-iphonesimulator/libPods-SDWebImage.a(SDWebImagePrefetcher.o)
</code></pre>

<p>ld: 727 duplicate symbols for architecture x86_64</p>

<p>解决办法：问题出现的原因是我用CocoaPods管理第三方库，在Build Settings > Linking > Other Linker Flags 里面即显示指定了-l"Pods-SDWebImagePrefetcher",又设置了变量$(inherited)。我去掉$(inherited)就好。</p>

<h3>问题描述:2015-04-05 22:35:26.917 weima[67059:2338954] NSScanner: nil string argument</h3>

<p>2015-04-05 22:35:26.917 weima[67059:2338954] NSScanner: nil string argument
libc++abi.dylib: terminate_handler unexpectedly threw an exception</p>

<h3>Cannot send push notifications using Javapns/Javaapns SSL handshake failure</h3>

<p>解决办法：
```
developer_identity.cer &lt;= download from Apple (aps cert)
mykey.p12 &lt;= Your private key (CSR generate private key or install aps cert get a private key both ok)</p>

<p>openssl x509 -in developer_identity.cer -inform DER -out developer_identity.pem -outform PEM
openssl pkcs12 -nocerts -in mykey.p12 -out mykey.pem
openssl pkcs12 -export -inkey mykey.pem -in developer_identity.pem -out iphone_dev.p12
```
Reference:<a href="http://stackoverflow.com/questions/12585858/cannot-send-push-notifications-using-javapns-javaapns-ssl-handshake-failure">http://stackoverflow.com/questions/12585858/cannot-send-push-notifications-using-javapns-javaapns-ssl-handshake-failure</a></p>

<h3>导航栏如何显示两行文本？</h3>

<p>解决办法：After setting up your titleView or titleLabel, call sizeToFit on it, also make sure titleLabel.textAlignment = UITextAlignmentCenter. It&rsquo;ll be centered in the width of the navbar rather than in the space between the button edge and far edge of navbar.</p>

<p>Reference <a href="http://stackoverflow.com/questions/3681990/adjusting-navigationitem-titleviews-frame">http://stackoverflow.com/questions/3681990/adjusting-navigationitem-titleviews-frame</a></p>

<h3>SVN how to resolve “local unversioned, incoming add upon update”</h3>

<p>```
$ svn status
D     C logs</p>

<pre><code>  &gt;   local unversioned, incoming add upon update
</code></pre>

<p>Summary of conflicts:
  Tree conflicts: 1
```</p>

<p>解决办法:</p>

<p><code>
$ svn resolve --accept working logs
Resolved conflicted state of 'logs'
$ svn revert logs
Reverted 'logs'
$ svn status
</code>
Reference <a href="http://tomhennigan.blogspot.com/2012/01/resolve-tree-conflict-svn-local.html">http://tomhennigan.blogspot.com/2012/01/resolve-tree-conflict-svn-local.html</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[如何创建私有的Pod]]></title>
    <link href="http://DamianSheldon.github.io/blog/private-pods.html/"/>
    <updated>2015-03-11T17:23:04+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/private-pods</id>
    <content type="html"><![CDATA[<p>公司的代码经常是需要保密的，我们可以创建私有的pod来方便我们的日常开发工作。</p>

<p>Cocoa Pods工作依赖于两个文件：<br/>
1. podspec:一个pod的配置是什么，pod的代码放在哪里
2. Podfile:项目依赖哪个pod，以何种方式依赖，它的podspec放在哪里</p>

<p>Cocoa Pods提供创建静态库pod的方法pod lib create [Pod name]，但这次我由于各种原因不是这样开始的，而是手动先创建了静态库，然后再新建开发工程的方式。于是我需要手动创建podspec文件:</p>

<p><code>
pod spec create --verbose project
</code></p>

<!--more-->


<p>然后编辑podspecs文件，这里有几个地方需要注意：</p>

<p>```
// s.source指定工程的源码地址,这里路径有些怪异是因为我的git server是布署在Windows上的。
s.source  = { :git => &ldquo;ssh://dongmeiliang@192.168.1.100:/git/ICW/Git/AJFrame.iOS&rdquo;, :tag => &ldquo;2.0.0&rdquo; }</p>

<p>// s.source_files指定哪些源文件需要包含在pod中
s.source_files  = &ldquo;AJFrame.iOS/*.{h,m}&rdquo;</p>

<p>// pod的依赖
s.dependency &ldquo;JSONKit&rdquo;, &ldquo;~> 1.4&rdquo;</p>

<p>```</p>

<p>podspecs完成之后, pod spec lint命令可以检查有没有错误。接下来在需要依赖这个pod的工程的Podfile文件中指定podspec的存放路径。</p>

<p><code>
pod 'AJFrame.iOS', :git =&gt; 'ssh://192.168.1.100:/git/ICW/Git/AJFrame.iOS', :tag =&gt; '2.0.0'
</code></p>

<h3>Reference</h3>

<p><a href="http://guides.cocoapods.org/making/using-pod-lib-create">Using Pod Lib Create</a><br/>
<a href="http://guides.cocoapods.org/using/the-podfile.html">The Podfile</a><br/>
<a href="http://www.iwangke.me/2013/04/18/advanced-cocoapods/">CocoaPods进阶：本地包管理</a><br/>
<a href="http://blog.devtang.com/blog/2014/05/25/use-cocoapod-to-manage-ios-lib-dependency/">用CocoaPods做iOS程序的依赖管理</a><br/>
<a href="http://studentdeng.github.io/blog/2013/09/13/cocoapods-tutorial/">Cocoapods 入门</a></p>
]]></content>
  </entry>
  
</feed>
