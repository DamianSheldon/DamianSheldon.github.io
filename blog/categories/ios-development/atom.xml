<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: ios development | Hello World]]></title>
  <link href="http://DamianSheldon.github.io/blog/categories/ios-development/atom.xml" rel="self"/>
  <link href="http://DamianSheldon.github.io/"/>
  <updated>2016-01-06T11:04:34+08:00</updated>
  <id>http://DamianSheldon.github.io/</id>
  <author>
    <name><![CDATA[Sheldon]]></name>
    <email><![CDATA[dongmeilianghy@sina.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[用 Wireshark 抓 iPhone 网络请求的数据包]]></title>
    <link href="http://DamianSheldon.github.io/blog/capturing-iphone-traffic-on-wireshark.html"/>
    <updated>2016-01-04T14:43:00+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/capturing-iphone-traffic-on-wireshark</id>
    <content type="html"><![CDATA[<p>开发过程中经常可能遇到网络问题，这时候我们需要抓包来定位问题所在。那么如何用 Wireshark 抓取 iPhone 真机网络请求的数据包呢？</p>

<blockquote><p>iOS does not support packet tracing directly. However, if you&rsquo;re developing for iOS you can take a packet trace of your app in a number of different ways:</p>

<p>If the problem you&rsquo;re trying to debug occurs on Wi-Fi, you can put your iOS device on a test Wi-Fi network. See Wi-Fi Capture for details.
If your app uses HTTP, you can configure your iOS device to use a debugging HTTP proxy (such as Charles HTTP Proxy).
In iOS 5 and later you can use the remote virtual interface facility.</p></blockquote>

<p>这里我使用的是第三种方法：remote virtual interface。</p>

<p>iOS 5 added a remote virtual interface (RVI) facility that lets you use OS X packet trace programs to capture traces from an iOS device. The basic strategy is:</p>

<ol>
<li>Connect your iOS device to your Mac via USB.</li>
<li>Set up an RVI for that device. This creates a virtual network interface on your Mac that represents the iOS device&rsquo;s networking stack.</li>
<li>Run your OS X packet trace program, and point it at the RVI created in the previous step.</li>
</ol>


<pre><code>$ # First get the current list of interfaces.
$ ifconfig -l
lo0 gif0 stf0 en0 en1 p2p0 fw0 ppp0 utun0
$ # Get connected device's UDID follow: Xcode &gt; Window &gt; Devices &gt; Select connected device &gt; identifier
$ # Then run the tool with the UDID of the device.
$ rvictl -s 74bd53c647548234ddcef0ee3abee616005051ed

Starting device 74bd53c647548234ddcef0ee3abee616005051ed [SUCCEEDED]

$ # Get the list of interfaces again, and you can see the new virtual
$ # network interface, rvi0, added by the previous command.
$ ifconfig -l
lo0 gif0 stf0 en0 en1 p2p0 fw0 ppp0 utun0 rvi0
</code></pre>

<p>打开 Wireshark, 选择 rvi0 作为待抓包的接口。</p>

<h1>Reference</h1>

<p><a href="https://developer.apple.com/library/mac/qa/qa1176/_index.html">Getting a Packet Trace</a><br/>
<a href="http://stackoverflow.com/questions/9555403/capturing-mobile-phone-traffic-on-wireshark">Capturing mobile phone traffic on wireshark</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS App 开发问题汇总（四）]]></title>
    <link href="http://DamianSheldon.github.io/blog/ios-devleopment-problems-part-4.html"/>
    <updated>2015-10-15T15:04:13+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/ios-devleopment-problems-part-4</id>
    <content type="html"><![CDATA[<h3>1. Suppressing deprecated warnings</h3>

<pre><code>#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wdeprecated-declarations"
[reciver deprecatedMethod];
#pragma clang diagnostic pop
</code></pre>

<h3>2. Warning libopencore-amrnb.a, missing required architecture arm64</h3>

<pre><code>ld: warning: ignoring file /Users/dongmeiliang/Downloads/VoiceConvert/VoiceConvert/VoiceConvert/lib/libopencore-amrnb.a, missing required architecture arm64 in file /Users/dongmeiliang/Downloads/VoiceConvert/VoiceConvert/VoiceConvert/lib/libopencore-amrnb.a (3 slices)
ld: warning: ignoring file /Users/dongmeiliang/Downloads/VoiceConvert/VoiceConvert/VoiceConvert/lib/libopencore-amrwb.a, missing required architecture arm64 in file /Users/dongmeiliang/Downloads/VoiceConvert/VoiceConvert/VoiceConvert/lib/libopencore-amrwb.a (3 slices)
Undefined symbols for architecture arm64:
  "_Decoder_Interface_init", referenced from:
      DecodeAMRFileToWAVEFile(char const*, char const*) in libVoiceConvert.a(amrFileCodec.o)
  "_Decoder_Interface_Decode", referenced from:
      DecodeAMRFileToWAVEFile(char const*, char const*) in libVoiceConvert.a(amrFileCodec.o)
  "_Decoder_Interface_exit", referenced from:
      DecodeAMRFileToWAVEFile(char const*, char const*) in libVoiceConvert.a(amrFileCodec.o)
  "_Encoder_Interface_init", referenced from:
      EncodeWAVEFileToAMRFile(char const*, char const*, int, int) in libVoiceConvert.a(amrFileCodec.o)
  "___gxx_personality_v0", referenced from:
      +[VoiceConverter amrToWav:wavSavePath:] in libVoiceConvert.a(VoiceConverter.o)
      +[VoiceConverter wavToAmr:amrSavePath:] in libVoiceConvert.a(VoiceConverter.o)
  "_Encoder_Interface_Encode", referenced from:
      EncodeWAVEFileToAMRFile(char const*, char const*, int, int) in libVoiceConvert.a(amrFileCodec.o)
  "_Encoder_Interface_exit", referenced from:
      EncodeWAVEFileToAMRFile(char const*, char const*, int, int) in libVoiceConvert.a(amrFileCodec.o)
</code></pre>

<p>Solution: Recompile a static library refer <a href="https://github.com/feuvan/opencore-amr-iOS">opencore-amr-iOS</a></p>

<!-- more -->


<h3>3. Undefined symbols for architecture arm64:</h3>

<p>  &ldquo;___gxx_personality_v0&rdquo;, referenced from:
      +[VoiceConverter amrToWav:wavSavePath:] in libVoiceConvert.a(VoiceConverter.o)
      +[VoiceConverter wavToAmr:amrSavePath:] in libVoiceConvert.a(VoiceConverter.o)
ld: symbol(s) not found for architecture arm64</p>

<p>Solution: Project > Targets > Select your product target > Build Settings > Other Linker Flags > Add -l"stdc++"</p>

<p>Reference:<a href="http://stackoverflow.com/questions/2846679/creating-an-objective-c-static-library-in-xcode">http://stackoverflow.com/questions/2846679/creating-an-objective-c-static-library-in-xcode</a></p>

<h3>4. Suppressing performSelector may cause leaks warnings</h3>

<pre><code>#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Warc-performSelector-leaks"
    [self.ticketTarget performSelector: self.ticketAction withObject: self];
#pragma clang diagnostic pop
</code></pre>

<p>Reference:<a href="http://stackoverflow.com/questions/7017281/performselector-may-cause-a-leak-because-its-selector-is-unknown">http://stackoverflow.com/questions/7017281/performselector-may-cause-a-leak-because-its-selector-is-unknown</a></p>

<h3>4.How to remove UINavigationBar and UISearchBar hairline?</h3>

<p>Solution:</p>

<blockquote><p>For a custom shadow image to be shown, a custom background image must also be set with the setBackgroundImage:forBarMetrics: method. If the default background image is used, then the default shadow image will be used regardless of the value of this property.</p></blockquote>

<p>So we can cut a 1x1 pixel pure color image, set this image as navigation bar&rsquo;s shadow image.</p>

<p>Reference:<a href="http://stackoverflow.com/questions/19037464/how-to-remove-uinavigationbar-and-uisearchbar-hairline">http://stackoverflow.com/questions/19037464/how-to-remove-uinavigationbar-and-uisearchbar-hairline</a><br/>
<a href="http://stackoverflow.com/questions/19226965/how-to-hide-ios7-uinavigationbar-1px-bottom-line">http://stackoverflow.com/questions/19226965/how-to-hide-ios7-uinavigationbar-1px-bottom-line</a></p>

<h3>5. Tab Bar item 设置的默认图片是白色的，但是显示却是灰色</h3>

<p>Solution:</p>

<pre><code>UIImage *userImage = [UIImage imageNamed:@"User"];
userImage = [userImage imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal];
UITabBarItem *friends = [[UITabBarItem alloc] initWithTitle:@"Recommand Friends" image:userImage selectedImage:userImage];
</code></pre>

<h3>6. UIWebView&rsquo;s cache doesn&rsquo;t work</h3>

<p>Solution:</p>

<blockquote><p>Create requestObj with specific cache policy ReturnCacheDataElseLoad if you can tell there is no network, or use the default behavior.</p></blockquote>

<p>Reference:<a href="http://stackoverflow.com/questions/32605084/uiwebview-cache-not-working">http://stackoverflow.com/questions/32605084/uiwebview-cache-not-working</a></p>

<h3>7.How to only show bottom border of UITextField</h3>

<p>Solution:</p>

<pre><code>var bottomLine = CALayer()
bottomLine.frame = CGRectMake(0.0, myTextField.frame.height - 1, myTextField.frame.width, 1.0)
bottomLine.backgroundColor = UIColor.whiteColor().CGColor
myTextField.borderStyle = UITextBorderStyle.None
myTextField.layer.addSublayer(bottomLine)
</code></pre>

<p>Reference:<a href="http://stackoverflow.com/questions/31107994/how-to-only-show-bottom-border-of-uitextfield-in-swift">http://stackoverflow.com/questions/31107994/how-to-only-show-bottom-border-of-uitextfield-in-swift</a></p>

<h3>8. 让Button的大小比它的内容略大</h3>

<p>Solution:</p>

<pre><code>_loginViaSMSButton.contentEdgeInsets = UIEdgeInsetsMake(0, 20, 0, 20);
</code></pre>

<h3>9. UITableViewStyleGrouped style UITableView has extra space at top</h3>

<p>Solution:</p>

<blockquote><p>UITableViewStyleGrouped divides each section into a &ldquo;group&rdquo; by inserting that extra padding…similar to what it did pre-iOS7, but clear instead of colored by default, and just at the top instead of all the way around. If you don&rsquo;t want the padding by default, use UITableViewStylePlain.</p></blockquote>

<p>Otherwise, if you need to keep the style the same, do what this other posted from that link recommended and change the content inset:</p>

<pre><code>self.tableView.contentInset = UIEdgeInsetsMake(-36, 0, 0, 0);
</code></pre>

<p>Reference:<a href="http://stackoverflow.com/questions/20305943/why-extra-space-is-at-top-of-uitableview-simple">http://stackoverflow.com/questions/20305943/why-extra-space-is-at-top-of-uitableview-simple</a></p>

<h3>10. 使用 UISearchDisplayController 遇到的问题</h3>

<p>使用代码创建的 UISearchDisplayController 必须用一个属性来持有它，个人觉得这里有点奇怪，因为 UIViewController 在头文件中的声明是：</p>

<pre><code>@property(nonatomic, readonly, strong) UISearchDisplayController *searchDisplayController
</code></pre>

<p>理论上来讲既然是 strong 那么这个对象应该会存在才对，但不知道什么原因，这样并不行，它会在内存中被销毁，还是得在扩展里用一个属性来持有它。</p>

<pre><code>*.m

@property (nonatomic) UISearchDisplayController *wt_searchDisplayController;

self.wt_searchDisplayController = [[UISearchDisplayController alloc] initWithSearchBar:self.searchBar contentsController:self];
self.wt_searchDisplayController.delegate = self;
self.wt_searchDisplayController.searchResultsDataSource = self.searchCoordinator;
self.wt_searchDisplayController.searchResultsDelegate = self.searchCoordinator;
[self.wt_searchDisplayController.searchResultsTableView registerClass:[RCConversationCell class] forCellReuseIdentifier:sSearchCellIdentifier];
</code></pre>

<p>问题还没有完全解决，我应用的导航结构是 UINavigationController > UITabBarController [VC1, VC 2, VC3], 在 VC1 界面里需要搜索功能，然后我在 VC1 navigation bar 下方放置了一个 search bar， 这个 search bar 和 searchDisplayController 关联起来，结果却出现 search result tableView 覆盖 search bar 的情况，最后的解决办法是调整导航结构 UINavigationController > UITabBarController [(UINavigationController > VC1), (UINavigationController > VC2), (UINavigationController > VC3)], 也就是先把 UIViewController 嵌入到 UINavigationController 中， 再把它做为 UITabBarController 的 childController.</p>

<h3>11. Controller 的视图 Layer 上添加 AVCaptureVideoPreviewLayer， 然后再在 Controller 的 View 上添加一个扫描框视图，用系统的 View 作为扫描框视图时能正常显示相机的捕获的内容， 用自定义的视图时，扫描框内全是黑的。</h3>

<p>Solution:在自定义视图的初始化方法中设置 opaque 为 NO。</p>

<h3>12. You are not authorized to use this service.</h3>

<p>Solution: I recently enable Apple ID two-step verification. When I upload app to App Store via Xcode it inform me &ldquo;You are not authorized to use this service.&rdquo; I feel very strange. I decide to use Application Loader after search with google.  Sign in Application Loader need app-specific password, you can get it follow instructs:</p>

<ol>
<li>Sign in to your <a href="https://appleid.apple.com/account/home">Apple ID account page</a>;</li>
<li>In the Security section, click Edit.</li>
<li>Click Generate Password and follow the steps on your screen.</li>
</ol>


<p>Reference:<a href="https://support.apple.com/en-us/HT204397">https://support.apple.com/en-us/HT204397</a></p>

<p>Now we can upload app with Application Loader:
1. Xcode > Open Developer Tool > Application Loader
2. Sign in Application Loader with app-specific password
3. Click on &ldquo;Choose&rdquo;
4. Pick the IPA you have just exported
5. Follow submission process</p>

<p>Reference:<a href="http://stackoverflow.com/questions/33291394/xcode-7-1-not-authorized-to-use-this-service-error">http://stackoverflow.com/questions/33291394/xcode-7-1-not-authorized-to-use-this-service-error</a></p>

<h3>13.</h3>

<pre><code>ERROR ITMS-90535: "Unexpected CFBundleExecutable Key. The bundle at 'Payload/sohiOSApp.app/TencentOpenApi_IOS_Bundle.bundle' does not contain a bundle executable. If this bundle intentionally does not contain an executable, consider removing the CFBundleExecutable key from its Info.plist and using a CFBundlePackageType of BNDL. If this bundle is part of a third-party framework, consider contacting the developer of the framework for an update to address this issue."
</code></pre>

<p>Solotion:Removing the CFBundleExecutable key from TencentOpenApi_IOS_Bundle.bundle&rsquo;s Info.plist and using a CFBundlePackageType of BNDL.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS App 开发问题汇总（三）]]></title>
    <link href="http://DamianSheldon.github.io/blog/ios-development-problem-part-3.html"/>
    <updated>2015-07-30T11:36:57+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/ios-development-problem-part-3</id>
    <content type="html"><![CDATA[<h3>1.问题描述：Checking the Entitlements for an iOS app Submission to the App Store</h3>

<p>Making an Inspectable .ipa file<br/>
In the Xcode Organizer, instead of Submit to the iOS App Store, do Save for Enterprise or Ad-Hoc Deployment. This will create a local copy of the .ipa file that would be submitted to the App Store.<br/>
When asked to choose the provisioning profile to sign with, select the same distribution profile you use when submitting to the App Store. Take a screenshot of your choice (command-shift-3) so you can verify this step later. During submission, this screenshot will be the only record you have identifying which profile was used to sign the app.<br/>
When asked to save the package, uncheck Save for Enterprise Distribution, then save the .ipa file.<br/>
Checking the Entitlements of an .ipa file<br/>
Find the .ipa file and change its the extension to .zip.<br/>
Expand the .zip file. This will produce a Payload folder containing your .app bundle.<br/>
Use the codesign tool to check the entitlements on the .app bundle like this:
$ codesign -d &ndash;entitlements :- &ldquo;Payload/YourApp.app&rdquo;
where YourApp.app is the actual name of your .app bundle.<br/>
Use the security tool to check the entitlements of the app&rsquo;s embedded provisioning profile:
// should add cms, Apple may be a typo
$ security cms -D -i &ldquo;Payload/YourApp.app/embedded.mobileprovision&rdquo;</p>

<p>where YourApp.app is the actual name of your .app bundle.</p>

<!-- more -->


<h3>2.问题描述：</h3>

<pre><code>`&lt;PBXGroup path=`Vendors` UUID=`4931326E1B4A0EBF00741B49`&gt;` attempted to initialize an object with an unknown UUID. `4920B77E1B58900100C9789C` for attribute: `children`. This can be the result of a merge and  the unknown UUID is being discarded.
</code></pre>

<p>解决办法：
1. I opened the .pbxproj file in a text editor.<br/>
a. Go to your .xcodeproj<br/>
b. Right click -> Show package contents<br/>
c. Open .pbxproj with a text editor.<br/>
2. I searched for the UUID.<br/>
3. Turns out that is a static library folder already removed from reference.<br/>
4. I readd folder that contain the static library.<br/>
5. Rerun pod installation.<br/>
6. Issue not happening anymore! :D</p>

<p>Reference:<a href="https://github.com/CocoaPods/CocoaPods/issues/1822">https://github.com/CocoaPods/CocoaPods/issues/1822</a></p>

<h3>3.How do I return to an older version of our code in Subversion?</h3>

<p>解决办法:</p>

<pre><code>svn update
svn merge -r 150:140 .
svn commit -m "Rolled back to r140"
</code></pre>

<p>Reference:<a href="http://stackoverflow.com/questions/814433/how-do-i-return-to-an-older-version-of-our-code-in-subversion">http://stackoverflow.com/questions/814433/how-do-i-return-to-an-older-version-of-our-code-in-subversion</a></p>

<h3>4. Add top layout guide in NIB file</h3>

<p>解决办法：</p>

<pre><code>-(void)viewDidLoad {
      if ([self respondsToSelector:@selector(edgesForExtendedLayout)])
         self.edgesForExtendedLayout = UIRectEdgeNone;
}
</code></pre>

<p>Reference:<a href="http://stackoverflow.com/questions/17074365/status-bar-and-navigation-bar-appear-over-my-views-bounds-in-ios-7">http://stackoverflow.com/questions/17074365/status-bar-and-navigation-bar-appear-over-my-views-bounds-in-ios-7</a></p>

<h3>5. How do I set the height of tableHeaderView (UITableView) with autolayout?</h3>

<p>Reference:<a href="http://stackoverflow.com/questions/20982558/how-do-i-set-the-height-of-tableheaderview-uitableview-with-autolayout">http://stackoverflow.com/questions/20982558/how-do-i-set-the-height-of-tableheaderview-uitableview-with-autolayout</a></p>

<h3>6. How to resize superview to fit all subviews with autolayout?</h3>

<p>Reference:<a href="http://stackoverflow.com/questions/18118021/how-to-resize-superview-to-fit-all-subviews-with-autolayout/18155803#18155803">http://stackoverflow.com/questions/18118021/how-to-resize-superview-to-fit-all-subviews-with-autolayout/18155803#18155803</a></p>

<h3>7.How to use c++ and objective-c together in XCode 4.2</h3>

<pre><code>1. Rename any .m file to .mm file;
2. If you look at the "Build Settings" there is a place written "Compile Sources As". There is a dropdown menu there where you can select Objective-C++. In the clang/gcc commandline I think it is "-x objective-c++".
</code></pre>

<p>Reference:<a href="http://stackoverflow.com/questions/9250655/how-to-use-c-and-objective-c-together-in-xcode-4-2">http://stackoverflow.com/questions/9250655/how-to-use-c-and-objective-c-together-in-xcode-4-2</a></p>

<h3>8.How do I change the status bar content to white?</h3>

<p>Here are the steps involved in changing the contents of the status bar (battery, time, signal) to white:</p>

<p>Starting with iOS 8, you need to set the status bar color in the Project Editor, otherwise the status bar flashes from black to white when your app first starts:
Select the very first node in the Project Navigator to display the Project Editor.
Select your app under Targets.
Select the General tab and under the Deployment Info section, set Status Bar Style to Light.</p>

<p>Next, you need to modify your project&rsquo;s .plist file.
In the Project Navigator, expand the Supporting Files node.
Select the <My Project Name>-Info.plist file.
Click on the very first entry (Information Property List).
Click the plus (+) sign that appears in the first column.
At the bottom of the popup list, select View controller-based status bar appearance.
Make sure the Value column is set to NO.
If you want to change the status bar content color for all scenes in your app, add the following code to the AppDelegate class&rsquo;s application:didFinishLaunchingWithOptions method (add it before the return YES statement), or you can add it to an individual view controller&rsquo;s viewDidLoad method:
In Swift:</p>

<pre><code>UIApplication.sharedApplication().statusBarStyle = UIStatusBarStyle.LightContent
</code></pre>

<p>In Objective-C:</p>

<pre><code>[[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleLightContent];
</code></pre>

<p>If you are hiding the status bar in some scenes in your app, and you have a root navigation controller, you may need to add the following code to the root navigation controller:</p>

<p>In Swift:</p>

<pre><code>override func preferredStatusBarStyle() -&gt; UIStatusBarStyle {
        return UIStatusBarStyle.LightContent
}
</code></pre>

<p>In Objective-C:</p>

<pre><code>- (UIStatusBarStyle)preferredStatusBarStyle
{
    return UIStatusBarStyleLightContent;
}
</code></pre>

<p>Reference:<a href="http://iosappsfornonprogrammers.com/forum/index.php?topic=1554.0">http://iosappsfornonprogrammers.com/forum/index.php?topic=1554.0</a></p>

<h3>9.Expression</h3>

<pre><code>(lldb) expr NSString *$str = (NSString *)[[NSString alloc] initWithData:data encoding:4]
(lldb) po $str

(lldb) e NSArray *$array = @[ @"Saturday", @"Sunday", @"Monday" ]
(lldb) p [$array count]
</code></pre>

<h3>10.fastlane add Slack Notifications</h3>

<p>Create an Incoming WebHook and export this as SLACK_URL. Can send a message to #channel (by default), a direct message to @username or a message to a private group group with success (green) or failure (red) status.</p>

<p>Slack > Menu > API > Incoming Webhooks > Set up an incoming webhook integration in your Slack team to try it out.</p>

<p>Reference:<a href="https://github.com/KrauseFx/fastlane/blob/master/docs/Actions.md#notifications">https://github.com/KrauseFx/fastlane/blob/master/docs/Actions.md#notifications</a></p>

<h3>11.问题描述：</h3>

<pre><code>directory not found for option '-F/Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS9.0.sdk/Developer/Library/Frameworks' "
</code></pre>

<p>Solution:Further to a migration of my Xcode project, from Xcode 6.4 to Xcode 7, I get the warning message below (after compilation) for the Test target :</p>

<p>directory not found for option &lsquo;-F/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator9.0.sdk/Developer/Library/Frameworks&rsquo;
Actually I found something when comparing a new project vs an older one&hellip;</p>

<p>In the old project, the warning was only being produced by the test target of my projects. Under &lsquo;Search Paths&rsquo;, I found it was including two items under &lsquo;Framework Search Paths&rsquo;:</p>

<p>$(SDKROOT)/Developer/Library/Frameworks
$(inherited)
The new project kept the &lsquo;Framework Search Paths&rsquo; empty.</p>

<p>Deleting those entries in my older project then removed the warning.</p>

<p>Reference:<a href="http://stackoverflow.com/questions/30827022/xcode-7-beta-library-search-path-warning">http://stackoverflow.com/questions/30827022/xcode-7-beta-library-search-path-warning</a></p>

<h3>12.问题描述：</h3>

<pre><code>ld: '/Users/dongmeiliang/Documents/ZHYJApp/ZHYJApp/ZHYJApp/Vendors/baiduMap/Release-iphoneos/BaiduMapAPI.framework/BaiduMapAPI(BMAddrList.o)' does not contain bitcode. You must rebuild it with bitcode enabled (Xcode setting ENABLE_BITCODE), obtain an updated library from the vendor, or disable bitcode for this target. for architecture arm64
</code></pre>

<p>Solution:disable bitcode for this target.
App target > Build Settings > Enable Bitcode > NO</p>

<p>Reference:<a href="http://stackoverflow.com/questions/30848208/new-warnings-in-ios9">http://stackoverflow.com/questions/30848208/new-warnings-in-ios9</a></p>

<h3>13.问题描述：</h3>

<pre><code>*** Assertion failure in +[AAPLListUtilities sharedApplicationGroupContainer], /Users/dongmeiliang/Downloads/ListerforwatchOSiOSandOSX/Objective-C/ListerKit/AAPLListUtilities.m:33
2015-09-22 15:31:20.966 Lister[84089:1396115] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'The shared application group container is unavailable. Check your entitlements and provisioning profiles for this target. Details on proper setup can be found in the PDFs referenced from the README.'
</code></pre>

<p>Solution:Target > Lister > iCloud > Fix issue
            Target > App Group > Fix issue</p>

<p>Reference:<a href="http://stackoverflow.com/questions/27008730/new-lister-app-error-the-shared-application-group-container-is-unavailable-che">http://stackoverflow.com/questions/27008730/new-lister-app-error-the-shared-application-group-container-is-unavailable-che</a></p>

<h3>14.How can I conditionally include a file based on build configuration in Xcode?</h3>

<p>For each target for which you want to conditionally include the settings bundle, choose its Project from the source list, choose the target, and switch to the &ldquo;Build Phases&rdquo; tab.</p>

<p>Click the &ldquo;Add Build Phase&rdquo; button and choose &ldquo;Add Run Script&rdquo;.</p>

<p>Then enter the following for the script:</p>

<pre><code>if [ "${CONFIGURATION}" == "Debug" ]; then
    cp -r "${PROJECT_DIR}/Settings.bundle" "${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.app"
fi
</code></pre>

<p>Reference:<a href="http://stackoverflow.com/questions/8496476/how-can-i-conditionally-include-a-file-based-on-build-configuration-in-xcode">http://stackoverflow.com/questions/8496476/how-can-i-conditionally-include-a-file-based-on-build-configuration-in-xcode</a></p>

<h3>15.Automatic Preferred Max Layout Width is not available on iOS versions prior to 8.0</h3>

<p>Solution: 1. Go to Issue Navigator (CMD+8) and Select latest built with the warning <br/>
2. Locate the warning(s) (search for &ldquo;Automatic Preferred Max Layout&rdquo;) and press expand button on the right<br/>
3. Find the Object ID of the UILabel<br/>
4. Open the Storyboard and SEARCH (CMD+f) for the object. It will SELECT AND HIGHLIGHT the UILabel<br/>
5. Explictit set preferred layout width</p>

<p>Reference:<a href="http://stackoverflow.com/questions/25398312/automatic-preferred-max-layout-width-is-not-available-on-ios-versions-prior-to-8">http://stackoverflow.com/questions/25398312/automatic-preferred-max-layout-width-is-not-available-on-ios-versions-prior-to-8</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Enumerated constants]]></title>
    <link href="http://DamianSheldon.github.io/blog/enumerated-constants.html"/>
    <updated>2015-05-08T16:38:20+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/enumerated-constants</id>
    <content type="html"><![CDATA[<p>Objective-C中的枚举常量大致有以下四种情形：</p>

<pre><code>// 1. unnamed enumerations
enum {
    NSBorderlessWindowMask      = 0,
    NSTitledWindowMask          = 1 &lt;&lt; 0,
    NSClosableWindowMask        = 1 &lt;&lt; 1,
    NSMiniaturizableWindowMask  = 1 &lt;&lt; 2,
    NSResizableWindowMask       = 1 &lt;&lt; 3

};

`- (void)setStyleMask:(NSUInteger)styleMask`

// 2 
typedef enum _NSMatrixMode {
    NSRadioModeMatrix           = 0,
    NSHighlightModeMatrix       = 1,
    NSListModeMatrix            = 2,
    NSTrackModeMatrix           = 3
} NSMatrixMode;

// 3
typedef NS_ENUM(NSInteger, UITableViewCellStyle) {
    UITableViewCellStyleDefault,
    UITableViewCellStyleValue1,
    UITableViewCellStyleValue2,
    UITableViewCellStyleSubtitle
};

// 4
typedef NS_OPTIONS(NSUInteger, NSLayoutFormatOptions) {
    NSLayoutFormatAlignAllLeft = (1 &lt;&lt; NSLayoutAttributeLeft),
    NSLayoutFormatAlignAllRight = (1 &lt;&lt; NSLayoutAttributeRight),
    NSLayoutFormatAlignAllTop = (1 &lt;&lt; NSLayoutAttributeTop),
    NSLayoutFormatAlignAllBottom = (1 &lt;&lt; NSLayoutAttributeBottom),
    NSLayoutFormatAlignAllLeading = (1 &lt;&lt; NSLayoutAttributeLeading),
    NSLayoutFormatAlignAllTrailing = (1 &lt;&lt; NSLayoutAttributeTrailing),
    NSLayoutFormatAlignAllCenterX = (1 &lt;&lt; NSLayoutAttributeCenterX),
    NSLayoutFormatAlignAllCenterY = (1 &lt;&lt; NSLayoutAttributeCenterY),
    NSLayoutFormatAlignAllBaseline = (1 &lt;&lt; NSLayoutAttributeBaseline),
    NSLayoutFormatAlignAllLastBaseline = NSLayoutFormatAlignAllBaseline,
    NSLayoutFormatAlignAllFirstBaseline NS_ENUM_AVAILABLE_IOS(8_0) = (1 &lt;&lt; NSLayoutAttributeFirstBaseline),

    NSLayoutFormatAlignmentMask = 0xFFFF,

    /* choose only one of these three
     */
    NSLayoutFormatDirectionLeadingToTrailing = 0 &lt;&lt; 16, // default
    NSLayoutFormatDirectionLeftToRight = 1 &lt;&lt; 16,
    NSLayoutFormatDirectionRightToLeft = 2 &lt;&lt; 16,  

    NSLayoutFormatDirectionMask = 0x3 &lt;&lt; 16,  
};
</code></pre>

<p>情形一相当于定义了常量，但不定义类型;<br/>
情形二定义了一个NSMatrixMode类型;</p>

<p>情形三定义了一个NSInteger的UITableViewCellStyle类型;<br/>
情形四支持C++的枚举特性。</p>

<blockquote><p>The NS_OPTIONS macro is defined in different ways if compiling as C++ or not. If it’s not C++, it’s expanded out the same as NS_ENUM. However, if it is C++, it’s expanded out slightly differently. Why? The C++ compiler acts differently when two enumeration values are bitwise OR’ed together. This is something, as shown earlier, that is commonly done with the options type of enumeration. When two values are OR’ed together, C++ considers the resulting value to be of the type the enumeration represents: NSUInteger. It also doesn’t allow the implicit cast to the enumeration type.</p></blockquote>

<p>Reference:<br/>
Effective Objective-C 2.0<br/>
<a href="http://nshipster.cn/ns_enum-ns_options/">NS_ENUM &amp; NS_OPTIONS</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS Thread笔记]]></title>
    <link href="http://DamianSheldon.github.io/blog/nsthread-thechnology-notes.html"/>
    <updated>2015-03-16T16:27:17+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/nsthread-thechnology-notes</id>
    <content type="html"><![CDATA[<ol>
<li>Thread是什么？</li>
<li>iOS中怎么使用Thread？</li>
</ol>


<h3>Thread是什么</h3>

<blockquote><p>Threads are a relatively lightweight way to implement multiple paths of execution inside of an application. At the system level, programs run side by side, with the system doling out execution time to each program based on its needs and the needs of other programs. Inside each program, however, exists one or more threads of execution, which can be used to perform different tasks simultaneously or in a nearly simultaneous manner. The system itself actually manages these threads of execution, scheduling them to run on the available cores and preemptively interrupting them as needed to allow other threads to run.</p>

<p>From a technical standpoint, a thread is a combination of the kernel-level and application-level data structures needed to manage the execution of code. The kernel-level structures coordinate the dispatching of events to the thread and the preemptive scheduling of the thread on one of the available cores. The application-level structures include the call stack for storing function calls and the structures the application needs to manage and manipulate the thread’s attributes and state.</p></blockquote>

<h3>iOS中怎么使用Thread</h3>

<p>iOS中的Thread技术主要有以下两种：</p>

<table>
<thead>
<tr>
<th> Technology </th>
<th> Description </th>
</tr>
</thead>
<tbody>
<tr>
<td> Cocoa threads </td>
<td> Cocoa implements threads using the NSThread class. Cocoa also provides methods on NSObject for spawning new threads and executing code on already-running threads.</td>
</tr>
<tr>
<td> POSIX threads </td>
<td> POSIX threads provide a C-based interface for creating threads. If you are not writing a Cocoa application, this is the best choice for creating threads. The POSIX interface is relatively simple to use and offers ample flexibility for configuring your threads.</td>
</tr>
</tbody>
</table>


<h4>Creating a Thread</h4>

<ol>
<li><p>Using NSThread</p>

<ul>
<li>Use the detachNewThreadSelector:toTarget:withObject: class method to spawn the new thread.</li>
<li>Create a new NSThread object and call its start method. (Supported only in iOS and OS X v10.5 and later.)</li>
</ul>
</li>
<li><p>Using POSIX Threads</p>

<ul>
<li>OS X and iOS provide C-based support for creating threads using the POSIX thread API. This technology can actually be used in any type of application (including Cocoa and Cocoa Touch applications) and might be more convenient if you are writing your software for multiple platforms. The POSIX routine you use to create threads is called, appropriately enough, pthread_create.</li>
</ul>
</li>
<li><p>Using NSObject to Spawn a Thread</p>

<ul>
<li>In iOS and OS X v10.5 and later, all objects have the ability to spawn a new thread and use it to execute one of their methods. The performSelectorInBackground:withObject: method creates a new detached thread and uses the specified method as the entry point for the new thread.</li>
</ul>
</li>
</ol>


<h4>Configuring Thread Attributes</h4>

<p>Thread的配置项有：</p>

<ul>
<li>Stack Size of a Thread</li>
<li>Thread-Local Storage</li>
<li>Detached State of a Thread</li>
<li>Thread Priority</li>
</ul>


<h4>Writing Your Thread Entry Routine</h4>

<p>编写Thread的入口程序通常需要做如下事项：</p>

<ul>
<li>Creating an Autorelease Pool</li>
<li>Setting Up an Exception Handler</li>
<li>Setting Up a Run Loop</li>
</ul>


<h4>Terminating a Thread</h4>
]]></content>
  </entry>
  
</feed>
