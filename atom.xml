<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Hello World]]></title>
  <link href="http://DamianSheldon.github.io/atom.xml" rel="self"/>
  <link href="http://DamianSheldon.github.io/"/>
  <updated>2016-02-05T14:24:36+08:00</updated>
  <id>http://DamianSheldon.github.io/</id>
  <author>
    <name><![CDATA[Sheldon]]></name>
    <email><![CDATA[dongmeilianghy@sina.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[iOS Unit Testing With OCMock]]></title>
    <link href="http://DamianSheldon.github.io/blog/ios-unit-testing-with-ocmock.html"/>
    <updated>2016-01-22T14:19:12+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/ios-unit-testing-with-ocmock</id>
    <content type="html"><![CDATA[<p>单元测试是我们保障代码质量的重要手段， Apple 对此也十分重视，这点可以从 Xcode 新建工程时会自动创建单元测试的 Target 看出来。单元测试牵涉的内容很多，这篇文章是目前我对单元测试的理解。</p>

<p>既然是单元测试，那么什么是单元呢？我没有去考证，但我是这么理解的：面向对象编程范式里一切皆对象，而对象是由实例变量和方法组成，对象之间通过方法互相作用，我们的应用可以看作是一个对象图，对象图上的对象相互作用来实现我们的需求。这么看来我们的单元应该是对象的方法。</p>

<p>对象的方法在工作的时候可能要依赖其他对象，为了去除依赖对象对测试的影响，我们引入 Mock.</p>

<blockquote><p>Mocks are ‘fake’ objects with pre-defined behavior to stand-in for concrete objects during testing. &ndash; HackaZach</p></blockquote>

<p>引用 Mock 之后，我们在单元测试中如何使用它呢？</p>

<blockquote><p>The general recipe for using mocks in unit-tests is:</p>

<ol>
<li>Create the mock object</li>
<li>Specify the expected invocations and return values</li>
<li>Associate the mock object with the code under test</li>
<li>Execute the code under test</li>
<li>Validate that your assertions are correct</li>
</ol>
</blockquote>

<!-- more -->


<h3>Create the mock object</h3>

<p>OCMock 中创建 Mock 对象的方法如下：</p>

<table>
<thead>
<tr>
<th> Factory Method </th>
<th> Description </th>
</tr>
</thead>
<tbody>
<tr>
<td> +mockForClass: </td>
<td> Create a mock based on the given class </td>
</tr>
<tr>
<td> +mockForProtocol: </td>
<td> Create a mock based on the given protocol </td>
</tr>
<tr>
<td> +niceMockForClass: </td>
<td> Create a &ldquo;nice&rdquo; mock based on the given class </td>
</tr>
<tr>
<td> +niceMockForProtocol: </td>
<td> Create a &ldquo;nice&rdquo; mock based on the given protocol </td>
</tr>
<tr>
<td> +partialMockForObject: </td>
<td> Create a mock based on the given object </td>
</tr>
<tr>
<td> +observerMock: </td>
<td> Create a notification observer (more on this later) </td>
</tr>
</tbody>
</table>


<p>Mock 对象是只是一个空壳，只能调用预先定义的方法，调用没有预先定义的方法会抛出异常；
Nice Mock 对象也是一个空壳，只是它会忽略没有预先定义的方法不会抛出异常；
Partial Mock 对象是把一个已有的对象转成 Mock，调用没有预先定义的方法，它会把方法传给已存在的对象；<br/>
Observer Mock 对象是用来观察通知的。</p>

<h3>Specify the expected invocations and return values</h3>

<blockquote><p>Calling either the -expect or -stub method will return an object that you can use to setup your expectations.</p></blockquote>

<ul>
<li><p>Specify the expected invocations</p>

<ol>
<li>不带参数的方法</li>
</ol>
</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>- (void)testInit {
</span><span class='line'>  id mockService = [OCMockObject mockForProtocol:@protocol(AVQuoteService)];
</span><span class='line'>  [[mockService expect] initiateConnection];
</span><span class='line'>  
</span><span class='line'>  AVStockPortfolio *portfolio = [[AVStockPortfolio alloc] initWithService:mockService];
</span><span class='line'>  
</span><span class='line'>  [mockService verify];
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p></br>
    2. 带参数的方法</p>

<blockquote><p>You can use any of the following OCMArg class methods in place of a real argument when setting up your method expectations:</p></blockquote>

<table>
<thead>
<tr>
<th> OCMArg method </th>
<th> Description </th>
</tr>
</thead>
<tbody>
<tr>
<td> +any </td>
<td> Any argument is accepted. </td>
</tr>
<tr>
<td> +anyPointer </td>
<td> Accepts any pointer </td>
</tr>
<tr>
<td> +isNil     </td>
<td> The given argument must be nil </td>
</tr>
<tr>
<td> +isNotNil  </td>
<td> The given argument must not be nil </td>
</tr>
<tr>
<td> +isNotEqual:   </td>
<td> Given argument is not object-equivalent with expectation </td>
</tr>
<tr>
<td> +checkWithSelector: </td>
<td> onObject:   Check the argument with the given action/target pair </td>
</tr>
<tr>
<td> +checkWithBlock: </td>
<td> Check the argument with the given block (OS X 10.6 or iOS 4) </td>
</tr>
</tbody>
</table>


<blockquote><p>OCMock also provides a few handy macros for argument matching:</p></blockquote>

<table>
<thead>
<tr>
<th> Macro </th>
<th> Description </th>
</tr>
</thead>
<tbody>
<tr>
<td> OCMOCK_ANY()   </td>
<td> Equivalent to [OCMArg any] </td>
</tr>
<tr>
<td> OCMOCK_VALUE(value) </td>
<td> A quick way to match a non-object argument </td>
</tr>
<tr>
<td> CONSTRAINT(selector) </td>
<td> Validate with a given selector on self </td>
</tr>
<tr>
<td> CONSTRAINTV(selector,value) </td>
<td>     Validate with a given selector on self and an additional argument </td>
</tr>
</tbody>
</table>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>id classMock = OCMClassMock([SomeClass class]);
</span><span class='line'>OCMExpect([classMock someMethodWithArgument:[OCMArg isNotNil]]);
</span><span class='line'>
</span><span class='line'>/* run code under test, which is assumed to call someMethod */
</span><span class='line'>
</span><span class='line'>OCMVerifyAll(classMock)</span></code></pre></td></tr></table></div></figure>


<p></br>
    3. 通知</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>- (void)testSellSharesInStock {
</span><span class='line'>  id mock = [OCMockObject observerMock];
</span><span class='line'>  // OCMock adds a custom methods to NSNotificationCenter via a category
</span><span class='line'>  [[NSNotificationCenter defaultCenter] addMockObserver:mock
</span><span class='line'>                                                   name:AVStockSoldNotification
</span><span class='line'>                                                 object:nil];
</span><span class='line'>                                               
</span><span class='line'>  [[mock expect] notificationWithName:AVStockSoldNotification object:[OCMArg any]];
</span><span class='line'>
</span><span class='line'>  AVPortfolio *portfolio = [self createPortfolio]; // made-up factory method
</span><span class='line'>  [portfolio sellShares:100 inStock:@"AAPL"];
</span><span class='line'>
</span><span class='line'>  [mock verify];
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Specify the return values</li>
</ul>


<blockquote><p>If methods on your mocks need to return values, you have a variety of methods to call on the object returned by -expect or -stub.</p></blockquote>

<table>
<thead>
<tr>
<th> Method </th>
<th> Explanation </th>
</tr>
</thead>
<tbody>
<tr>
<td> -andReturn: </td>
<td> Return the given object </td>
</tr>
<tr>
<td> -andReturnValue: </td>
<td> Return a non-object value (wrapped in a NSValue) </td>
</tr>
<tr>
<td> -andThrow: </td>
<td> Throw the given exception </td>
</tr>
<tr>
<td> -andPost: </td>
<td>   Post the given notification </td>
</tr>
<tr>
<td> -andCall:onObject: </td>
<td> Call the selector on the given object </td>
</tr>
<tr>
<td> -andDo: </td>
<td> Invoke the given block (only on OS X 10.6 or iOS 4) </td>
</tr>
</tbody>
</table>


<h3>Execution &amp; Validation</h3>

<ul>
<li>Associate the mock object with the code under test</li>
<li>Execute the code under test</li>
<li>Validate that your assertions are correct</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>- (void)testSellSharesInStock {
</span><span class='line'>  id quoteService = [[OCMockObject] mockForProtocol:@protocol(AVQuoteService)];
</span><span class='line'>  [[[quoteService expect] andDo:^(NSInvocation *invocation) {
</span><span class='line'>    // validate arguments, set return value on the invocation object
</span><span class='line'>  }] priceForStock:@"AAPL"];
</span><span class='line'>  
</span><span class='line'>  // Associate the mock object with the code under test
</span><span class='line'>  AVStockPortfolio *portfolio = [[AVStockPortfolio alloc] initWithService:quoteService];
</span><span class='line'>  // Execute the code under test
</span><span class='line'>  [portfolio sellShares:100 inStock:@"AAPL"];
</span><span class='line'>  
</span><span class='line'>  // Validate that your assertions are correct
</span><span class='line'>  
</span><span class='line'>  [quoteService verify];
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>Q:How to mocking singleton?
A:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>// we can replace it with a mock object
</span><span class='line'>id mockManager = [OCMockObject mockForClass:[ArticleManager class]];
</span><span class='line'>[ArticleManager setSharedInstance:mockManager];
</span><span class='line'>// we can reset it so that it returns the actual ArticleManager
</span><span class='line'>[ArticleManager setSharedInstance:nil];
</span><span class='line'>
</span><span class='line'>// Objective-C Singleton Pattern Updated For Testability
</span><span class='line'>@implementation ArticleManager
</span><span class='line'>
</span><span class='line'>static ArticleManager *_sharedInstance = nil;
</span><span class='line'>static dispatch_once_t once_token = 0;
</span><span class='line'>
</span><span class='line'>+(instancetype)sharedInstance {
</span><span class='line'>    dispatch_once(&once_token, ^{
</span><span class='line'>        if (_sharedInstance == nil) {
</span><span class='line'>            _sharedInstance = [[ArticleManager alloc] init];
</span><span class='line'>        }
</span><span class='line'>    });
</span><span class='line'>    return _sharedInstance;
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>+(void)setSharedInstance:(ArticleManager *)instance {
</span><span class='line'>    once_token = 0; // resets the once_token so dispatch_once will run again
</span><span class='line'>    _sharedInstance = instance;
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>@end</span></code></pre></td></tr></table></div></figure>


<p>Reference:<a href="http://twobitlabs.com/2013/01/objective-c-singleton-pattern-unit-testing/">Objective-C Singleton Pattern Updated For Testability</a></p>

<h2>Reference:</h2>

<p><a href="http://ocmock.org">OCMock</a><br/>
<a href="http://www.archive.alexvollmer.com/posts/2010/06/28/making-fun-of-things-with-ocmock/">Making Fun of Things with OCMock</a><br/>
<a href="http://hackazach.net/code/2014/03/03/effective-testing-with-ocmock/">OCMock Test Origami</a><br/>
<a href="http://engineering.aweber.com/improving-ios-unit-tests-with-ocmock/">IMPROVING IOS UNIT TESTS WITH OCMOCK</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS App 开发问题汇总（五）]]></title>
    <link href="http://DamianSheldon.github.io/blog/ios-development-problems-part-5.html"/>
    <updated>2016-01-08T21:32:22+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/ios-development-problems-part-5</id>
    <content type="html"><![CDATA[<h3>1.On iOS 7 and later, how do I take a snapshot of my view and save the result in a UIImage?</h3>

<p>Solution:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>- (UIImage *)snapshot:(UIView *)view
</span><span class='line'>{
</span><span class='line'>    UIGraphicsBeginImageContextWithOptions(view.bounds.size, YES, 0);
</span><span class='line'>    [view drawViewHierarchyInRect:view.bounds afterScreenUpdates:YES];
</span><span class='line'>    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
</span><span class='line'>    UIGraphicsEndImageContext();
</span><span class='line'>    
</span><span class='line'>    return image;
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>Reference:<a href="https://developer.apple.com/library/ios/qa/qa1817/_index.html">https://developer.apple.com/library/ios/qa/qa1817/_index.html</a></p>

<h3>2.How to present a view controller on iOS7 without the status bar overlapping?</h3>

<p>Solution:The easiest workaround I&rsquo;ve found is to wrap the view controller you want to present inside a navigation controller, and then present that navigation controller.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>MyViewController *vc = [MyViewController new];
</span><span class='line'>UINavigationController *nvc = [[UINavigationController alloc] 
</span><span class='line'>    initWithRootViewController:vc];
</span><span class='line'>[self presentViewController:nvc animated:YES completion:nil];</span></code></pre></td></tr></table></div></figure>


<h3>3.代码创建 UITableView 时如何使用各种系统样式的 UITableViewCell?</h3>

<p>Solution:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
</span><span class='line'>{
</span><span class='line'>    static NSString *sCellID = @"CellID";
</span><span class='line'>
</span><span class='line'>    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:sCellID];
</span><span class='line'>    if (!cell) {
</span><span class='line'>        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:sCellID];
</span><span class='line'>    }
</span><span class='line'>    // Configure the cell...
</span><span class='line'>    
</span><span class='line'>    return cell;
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<!-- more -->


<h3>4.Settings bundle not showing up in iPhone settings</h3>

<p>Solution:iOS 9.0.x - 9.2 Settings App Bug, Using the App Switch UI (double-press Home button) to kill the Settings App.</p>

<p>Reference:<a href="http://stackoverflow.com/questions/2683793/settings-bundle-not-showing-up-in-iphone-settings">http://stackoverflow.com/questions/2683793/settings-bundle-not-showing-up-in-iphone-settings</a></p>

<h3>5.单元测试的 Target 在测试导航栏里是灰色的不能点击测试。</h3>

<p>Solution: Edit Scheme &hellip; > Test > + > Select your test target.</p>

<h3>6.How to change UITableViewCell Image to Circle in UITableView</h3>

<p>Solution:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>// Subclass UITableViewCell override layoutSubviews method
</span><span class='line'>
</span><span class='line'>- (void)layoutSubviews
</span><span class='line'>{
</span><span class='line'>    [super layoutSubviews];
</span><span class='line'>    
</span><span class='line'>    self.imageView.layer.cornerRadius = CGRectGetHeight(self.imageView.frame) * 0.5;
</span><span class='line'>    self.imageView.layer.masksToBounds = YES;
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>Reference:<a href="http://stackoverflow.com/questions/23350728/how-to-change-uitableviewcell-image-to-circle-in-uitableview">http://stackoverflow.com/questions/23350728/how-to-change-uitableviewcell-image-to-circle-in-uitableview</a></p>

<h3>7.How to downgrading Cocoapods?</h3>

<p>A:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>// First you can figure out which version of Cocoapods you are on with the command:
</span><span class='line'>$ pod --version
</span><span class='line'>
</span><span class='line'>// You can also see all the version of Cocoapods you have installed with this command:
</span><span class='line'>$ sudo gem list cocoapods
</span><span class='line'>
</span><span class='line'>// Next uninstall Cocoapods. If you have multiple version, you will have the choice of uninstalling all or a specific version.
</span><span class='line'>$ sudo gem uninstall cocoapods
</span><span class='line'>
</span><span class='line'>// Finally you can install the specific version with this command:
</span><span class='line'>$ sudo gem install cocoapods -v 0.39.0</span></code></pre></td></tr></table></div></figure>


<p>Reference:<a href="https://diego.org/2015/09/24/downgrading-cocoapods/">https://diego.org/2015/09/24/downgrading-cocoapods/</a></p>

<h3>8.How to get UISearchDisplayController to search only after search button is pressed？</h3>

<p>A:Setup a delegate for the search bar and implement the searchBarSearchButtonClicked: method. Do your searching from that method. Just return NO from the shouldReloadTableForSearchString method.</p>

<p>Reference:<a href="http://stackoverflow.com/questions/18563529/how-to-get-uisearchdisplaycontroller-to-search-only-after-search-button-is-press">http://stackoverflow.com/questions/18563529/how-to-get-uisearchdisplaycontroller-to-search-only-after-search-button-is-press</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[用 Wireshark 抓 iPhone 网络请求的数据包]]></title>
    <link href="http://DamianSheldon.github.io/blog/capturing-iphone-traffic-on-wireshark.html"/>
    <updated>2016-01-04T14:43:00+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/capturing-iphone-traffic-on-wireshark</id>
    <content type="html"><![CDATA[<p>开发过程中经常可能遇到网络问题，这时候我们需要抓包来定位问题所在。那么如何用 Wireshark 抓取 iPhone 真机网络请求的数据包呢？</p>

<blockquote><p>iOS does not support packet tracing directly. However, if you&rsquo;re developing for iOS you can take a packet trace of your app in a number of different ways:</p>

<p>If the problem you&rsquo;re trying to debug occurs on Wi-Fi, you can put your iOS device on a test Wi-Fi network. See Wi-Fi Capture for details.<br/>
If your app uses HTTP, you can configure your iOS device to use a debugging HTTP proxy (such as Charles HTTP Proxy).<br/>
In iOS 5 and later you can use the remote virtual interface facility.</p></blockquote>

<!-- more -->


<p>这里我使用的是第三种方法：remote virtual interface。</p>

<p>iOS 5 added a remote virtual interface (RVI) facility that lets you use OS X packet trace programs to capture traces from an iOS device. The basic strategy is:</p>

<ol>
<li>Connect your iOS device to your Mac via USB.</li>
<li>Set up an RVI for that device. This creates a virtual network interface on your Mac that represents the iOS device&rsquo;s networking stack.</li>
<li>Run your OS X packet trace program, and point it at the RVI created in the previous step.</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ # First get the current list of interfaces.
</span><span class='line'>$ ifconfig -l
</span><span class='line'>lo0 gif0 stf0 en0 en1 p2p0 fw0 ppp0 utun0
</span><span class='line'>$ # Get connected device's UDID follow: Xcode &gt; Window &gt; Devices &gt; Select connected device &gt; identifier
</span><span class='line'>$ # Then run the tool with the UDID of the device.
</span><span class='line'>$ rvictl -s 74bd53c647548234ddcef0ee3abee616005051ed
</span><span class='line'> 
</span><span class='line'>Starting device 74bd53c647548234ddcef0ee3abee616005051ed [SUCCEEDED]
</span><span class='line'> 
</span><span class='line'>$ # Get the list of interfaces again, and you can see the new virtual
</span><span class='line'>$ # network interface, rvi0, added by the previous command.
</span><span class='line'>$ ifconfig -l
</span><span class='line'>lo0 gif0 stf0 en0 en1 p2p0 fw0 ppp0 utun0 rvi0</span></code></pre></td></tr></table></div></figure>


<p>打开 Wireshark, 选择 rvi0 作为待抓包的接口。</p>

<h1>Reference</h1>

<p><a href="https://developer.apple.com/library/mac/qa/qa1176/_index.html">Getting a Packet Trace</a><br/>
<a href="http://stackoverflow.com/questions/9555403/capturing-mobile-phone-traffic-on-wireshark">Capturing mobile phone traffic on wireshark</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Web Development Notes Part One]]></title>
    <link href="http://DamianSheldon.github.io/blog/web-development-notes-part-one.html"/>
    <updated>2015-12-12T22:27:22+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/web-development-notes-part-one</id>
    <content type="html"><![CDATA[<h3>1. What is href=“#” and why is it used?</h3>

<p>Solution:A hashtag - # within a hyperlink specifies an html element id to which the window should be scrolled.<br/>
href=&ldquo;#some-id&rdquo; would scroll to an element on the current page such as <div id="some-id">.</p>

<p>href=&ldquo;//site.com/#some-id&rdquo; would go to site.com and scroll to the id on that page.</p>

<p>href=&ldquo;#&rdquo; doesn&rsquo;t specify an id name, but does have a corresponding location - the top of the page. Clicking an anchor with href=&ldquo;#&rdquo; will move the scroll position to the top.</p>

<p>Reference:<a href="http://stackoverflow.com/questions/4855168/what-is-href-and-why-is-it-used">http://stackoverflow.com/questions/4855168/what-is-href-and-why-is-it-used</a></p>

<h3>2. How to debug your web page, technology stack is LAMP.</h3>

<p>Solution:View log, figure out what cause problems.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ tail -f /var/log/apache2/error_log
</span><span class='line'>[Fri Dec 11 21:34:57.003657 2015] [:error] [pid 17465] [client ::1:50505] PHP Parse error:  parse error, expecting `','' or `';'' in /Users/dongmeiliang/Sites/knowledgeispower/includes/header.html on line 7
</span><span class='line'>[Fri Dec 11 21:34:57.003701 2015] [:error] [pid 17465] [client ::1:50505] PHP Stack trace:
</span><span class='line'>[Fri Dec 11 21:34:57.003723 2015] [:error] [pid 17465] [client ::1:50505] PHP   1. {main}() /Users/dongmeiliang/Sites/knowledgeispower/index.php:0</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS 项目持续集成和部署笔记]]></title>
    <link href="http://DamianSheldon.github.io/blog/continuous-integration-and-deployment-for-ios-projects.html"/>
    <updated>2015-11-04T09:38:13+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/continuous-integration-and-deployment-for-ios-projects</id>
    <content type="html"><![CDATA[<p>本文是我做 iOS 项目持续集成和部署的笔记。</p>

<h3>安装工具</h3>

<ol>
<li><p><a href="http://jenkins-ci.org/">jenkins</a>;</p>

<pre><code class="`"> $ brew update &amp;&amp; brew install jenkins
</code></pre></li>
<li><p><a href="https://github.com/fastlane/fastlane">fastlane</a>;</p>

<pre><code class="`"> $ sudo gem install fastlane --verbose
</code></pre></li>
<li><p><a href="https://github.com/FIRHQ/fir-cli/blob/master/README.md">fir-cli</a>;</p>

<pre><code class="`"> $ sudo gem install fir-cli
</code></pre></li>
</ol>


<!-- more -->


<h3>fastlane 自动构建</h3>

<ul>
<li>cd [your_project_folder]</li>
<li>fastlane init</li>
<li>Follow the setup assistant, which will set up fastlane for you</li>
<li>Edit Fastfile</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>fastlane_version "1.25.0"
</span><span class='line'>
</span><span class='line'>default_platform :ios
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>platform :ios do
</span><span class='line'>  before_all do
</span><span class='line'>    ENV["SLACK_URL"] = "https://hooks.slack.com/services/..."
</span><span class='line'>    #cocoapods
</span><span class='line'>
</span><span class='line'>    increment_build_number
</span><span class='line'>
</span><span class='line'>    gym(scheme: "srsApp") # Build your app - more options available
</span><span class='line'>
</span><span class='line'>    # xctool # run the tests of your app
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  desc "Runs all the tests"
</span><span class='line'>  lane :test do
</span><span class='line'>    snapshot
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  desc "Submit a new Beta Build to fir"
</span><span class='line'>  desc "This will also make sure the profile is up to date"
</span><span class='line'>  lane :fir do
</span><span class='line'>    #snapshot
</span><span class='line'>    sh "sigh --team_id your_team_id"
</span><span class='line'>    #deliver(beta: true)
</span><span class='line'>
</span><span class='line'>    #"ipa distribute:pgyer -u USER_KEY -a APP_KEY" # 上传到蒲公英
</span><span class='line'>
</span><span class='line'>    #"ipa distribute:fir -u USER_TOKEN -a APP_ID" # 上传到fir.im
</span><span class='line'>
</span><span class='line'>    # sh"ipa distribute:fir -u USER_KEY -a APP_KEY"
</span><span class='line'>    # You can also use other beta testing services here
</span><span class='line'>    sh "fir p ../srsApp.ipa -T USER_TOKEN"
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  desc "Submit a new Beta Build to pgyer "
</span><span class='line'>  desc "This will also make sure the profile is up to date"
</span><span class='line'>  lane :pgyer do
</span><span class='line'>    #snapshot
</span><span class='line'>    sh "sigh --team_id your_team_id"
</span><span class='line'>    #deliver(beta: true)
</span><span class='line'>
</span><span class='line'>    # You can also use other beta testing services here
</span><span class='line'>    sh "curl -F \"file=@/Users/dongmeiliang/Documents/HJKApp/srsApp/srsApp.ipa\" -F \"uKey=USER_TOKEN\" -F \"_api_key=APP_KEY\" http://www.pgyer.com/apiv1/app/upload"
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  # You can define as many lanes as you want
</span><span class='line'>
</span><span class='line'>  after_all do |lane|
</span><span class='line'>    # This block is called, only if the executed lane was successful
</span><span class='line'>
</span><span class='line'>     slack(
</span><span class='line'>       message: "Successfully deployed new App Update."
</span><span class='line'>     )
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  error do |lane, exception|
</span><span class='line'>     slack(
</span><span class='line'>       message: exception.message,
</span><span class='line'>       success: false
</span><span class='line'>     )
</span><span class='line'>  end
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>使用 <code>fastlane fir</code>测试能否正常构建。</p>

<h3>自动测试</h3>

<p>可以利用 xcodebuild 命令来实现自动测试。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ xcodebuild -project UI\ Testing\ In\ Xcode.xcodeproj -scheme UI\ Testing\ In\ Xcode -destination 'platform=iOS Simulator,name=iPhone 6s,OS=9.1' test</span></code></pre></td></tr></table></div></figure>


<h3>jenkins 持续集成</h3>

<ol>
<li><p>创建自动构建 job</p>

<ul>
<li>Open <a href="http://localhost:8080">http://localhost:8080</a> with safari</li>
<li><p>Install plugins</p>

<ul>
<li>HTML Publisher Plugin</li>
<li>AnsiColor Plugin</li>
<li>Rebuild Plugin</li>
<li>GIT Plugin</li>
</ul>
</li>
<li><p>Create job > input item name > Freestyle project > OK</p></li>
<li><p>Configuration
  Source Code Management
  Git
  Repository URL /Users/dongmeiliang/Documents/HJKApp
  Branches to build */test
  Add build step > Execute shell</p>

<pre><code class="``">  #!/bin/bash   
  source ~/.bash_profile  
  cd srsApp/  
  fastlane  fir  
</code></pre></li>
<li>Save > build</li>
</ul>
</li>
<li><p>创建自动测试 job</p>

<p> Add build step > Execute shell</p>

<pre><code class="`"> #!/bin/bash   
 source ~/.bash_profile  
 $ xcodebuild -project UI\ Testing\ In\ Xcode.xcodeproj -scheme UI\ Testing\ In\ Xcode -destination 'platform=iOS Simulator,name=iPhone 6s,OS=9.1' test
</code></pre></li>
</ol>


<h2>Reference</h2>

<p>Testing with Xcode
<a href="https://github.com/fastlane/fastlane">fastlane</a><br/>
<a href="https://github.com/fastlane/fastlane/blob/master/docs/Jenkins.md">Jenkins Integration</a><br/>
<a href="http://blog.csdn.net/colorapp/article/details/47007329">iOS可持续化集成: Jenkins + bundler + cocoapods + shenzhen + fastlane + pgyer</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS App 开发问题汇总（四）]]></title>
    <link href="http://DamianSheldon.github.io/blog/ios-devleopment-problems-part-4.html"/>
    <updated>2015-10-15T15:04:13+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/ios-devleopment-problems-part-4</id>
    <content type="html"><![CDATA[<h3>1. Suppressing deprecated warnings</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#pragma clang diagnostic push
</span><span class='line'>#pragma clang diagnostic ignored "-Wdeprecated-declarations"
</span><span class='line'>[reciver deprecatedMethod];
</span><span class='line'>#pragma clang diagnostic pop</span></code></pre></td></tr></table></div></figure>


<h3>2. Warning libopencore-amrnb.a, missing required architecture arm64</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ld: warning: ignoring file /Users/dongmeiliang/Downloads/VoiceConvert/VoiceConvert/VoiceConvert/lib/libopencore-amrnb.a, missing required architecture arm64 in file /Users/dongmeiliang/Downloads/VoiceConvert/VoiceConvert/VoiceConvert/lib/libopencore-amrnb.a (3 slices)
</span><span class='line'>ld: warning: ignoring file /Users/dongmeiliang/Downloads/VoiceConvert/VoiceConvert/VoiceConvert/lib/libopencore-amrwb.a, missing required architecture arm64 in file /Users/dongmeiliang/Downloads/VoiceConvert/VoiceConvert/VoiceConvert/lib/libopencore-amrwb.a (3 slices)
</span><span class='line'>Undefined symbols for architecture arm64:
</span><span class='line'>  "_Decoder_Interface_init", referenced from:
</span><span class='line'>      DecodeAMRFileToWAVEFile(char const*, char const*) in libVoiceConvert.a(amrFileCodec.o)
</span><span class='line'>  "_Decoder_Interface_Decode", referenced from:
</span><span class='line'>      DecodeAMRFileToWAVEFile(char const*, char const*) in libVoiceConvert.a(amrFileCodec.o)
</span><span class='line'>  "_Decoder_Interface_exit", referenced from:
</span><span class='line'>      DecodeAMRFileToWAVEFile(char const*, char const*) in libVoiceConvert.a(amrFileCodec.o)
</span><span class='line'>  "_Encoder_Interface_init", referenced from:
</span><span class='line'>      EncodeWAVEFileToAMRFile(char const*, char const*, int, int) in libVoiceConvert.a(amrFileCodec.o)
</span><span class='line'>  "___gxx_personality_v0", referenced from:
</span><span class='line'>      +[VoiceConverter amrToWav:wavSavePath:] in libVoiceConvert.a(VoiceConverter.o)
</span><span class='line'>      +[VoiceConverter wavToAmr:amrSavePath:] in libVoiceConvert.a(VoiceConverter.o)
</span><span class='line'>  "_Encoder_Interface_Encode", referenced from:
</span><span class='line'>      EncodeWAVEFileToAMRFile(char const*, char const*, int, int) in libVoiceConvert.a(amrFileCodec.o)
</span><span class='line'>  "_Encoder_Interface_exit", referenced from:
</span><span class='line'>      EncodeWAVEFileToAMRFile(char const*, char const*, int, int) in libVoiceConvert.a(amrFileCodec.o)</span></code></pre></td></tr></table></div></figure>


<p>Solution: Recompile a static library refer <a href="https://github.com/feuvan/opencore-amr-iOS">opencore-amr-iOS</a></p>

<!-- more -->


<h3>3. Undefined symbols for architecture arm64:</h3>

<p>  &ldquo;___gxx_personality_v0&rdquo;, referenced from:
      +[VoiceConverter amrToWav:wavSavePath:] in libVoiceConvert.a(VoiceConverter.o)
      +[VoiceConverter wavToAmr:amrSavePath:] in libVoiceConvert.a(VoiceConverter.o)
ld: symbol(s) not found for architecture arm64</p>

<p>Solution: Project > Targets > Select your product target > Build Settings > Other Linker Flags > Add -l"stdc++"</p>

<p>Reference:<a href="http://stackoverflow.com/questions/2846679/creating-an-objective-c-static-library-in-xcode">http://stackoverflow.com/questions/2846679/creating-an-objective-c-static-library-in-xcode</a></p>

<h3>4. Suppressing performSelector may cause leaks warnings</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#pragma clang diagnostic push
</span><span class='line'>#pragma clang diagnostic ignored "-Warc-performSelector-leaks"
</span><span class='line'>    [self.ticketTarget performSelector: self.ticketAction withObject: self];
</span><span class='line'>#pragma clang diagnostic pop</span></code></pre></td></tr></table></div></figure>


<p>Reference:<a href="http://stackoverflow.com/questions/7017281/performselector-may-cause-a-leak-because-its-selector-is-unknown">http://stackoverflow.com/questions/7017281/performselector-may-cause-a-leak-because-its-selector-is-unknown</a></p>

<h3>5.How to remove UINavigationBar and UISearchBar hairline?</h3>

<p>Solution:</p>

<blockquote><p>For a custom shadow image to be shown, a custom background image must also be set with the setBackgroundImage:forBarMetrics: method. If the default background image is used, then the default shadow image will be used regardless of the value of this property.</p></blockquote>

<p>So we can cut a 1x1 pixel pure color image, set this image as navigation bar&rsquo;s shadow image.</p>

<p>Reference:<a href="http://stackoverflow.com/questions/19037464/how-to-remove-uinavigationbar-and-uisearchbar-hairline">http://stackoverflow.com/questions/19037464/how-to-remove-uinavigationbar-and-uisearchbar-hairline</a><br/>
<a href="http://stackoverflow.com/questions/19226965/how-to-hide-ios7-uinavigationbar-1px-bottom-line">http://stackoverflow.com/questions/19226965/how-to-hide-ios7-uinavigationbar-1px-bottom-line</a></p>

<h3>6. Tab Bar item 设置的默认图片是白色的，但是显示却是灰色</h3>

<p>Solution:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>UIImage *userImage = [UIImage imageNamed:@"User"];
</span><span class='line'>userImage = [userImage imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal];
</span><span class='line'>UITabBarItem *friends = [[UITabBarItem alloc] initWithTitle:@"Recommand Friends" image:userImage selectedImage:userImage];</span></code></pre></td></tr></table></div></figure>


<h3>7. UIWebView&rsquo;s cache doesn&rsquo;t work</h3>

<p>Solution:</p>

<blockquote><p>Create requestObj with specific cache policy ReturnCacheDataElseLoad if you can tell there is no network, or use the default behavior.</p></blockquote>

<p>Reference:<a href="http://stackoverflow.com/questions/32605084/uiwebview-cache-not-working">http://stackoverflow.com/questions/32605084/uiwebview-cache-not-working</a></p>

<h3>8.How to only show bottom border of UITextField</h3>

<p>Solution:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var bottomLine = CALayer()
</span><span class='line'>bottomLine.frame = CGRectMake(0.0, myTextField.frame.height - 1, myTextField.frame.width, 1.0)
</span><span class='line'>bottomLine.backgroundColor = UIColor.whiteColor().CGColor
</span><span class='line'>myTextField.borderStyle = UITextBorderStyle.None
</span><span class='line'>myTextField.layer.addSublayer(bottomLine)</span></code></pre></td></tr></table></div></figure>


<p>Reference:<a href="http://stackoverflow.com/questions/31107994/how-to-only-show-bottom-border-of-uitextfield-in-swift">http://stackoverflow.com/questions/31107994/how-to-only-show-bottom-border-of-uitextfield-in-swift</a></p>

<h3>9. 让Button的大小比它的内容略大</h3>

<p>Solution:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>_loginViaSMSButton.contentEdgeInsets = UIEdgeInsetsMake(0, 20, 0, 20);
</span></code></pre></td></tr></table></div></figure>


<h3>10. UITableViewStyleGrouped style UITableView has extra space at top</h3>

<p>Solution:</p>

<blockquote><p>UITableViewStyleGrouped divides each section into a &ldquo;group&rdquo; by inserting that extra padding…similar to what it did pre-iOS7, but clear instead of colored by default, and just at the top instead of all the way around. If you don&rsquo;t want the padding by default, use UITableViewStylePlain.</p></blockquote>

<p>Otherwise, if you need to keep the style the same, do what this other posted from that link recommended and change the content inset:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>self.tableView.contentInset = UIEdgeInsetsMake(-36, 0, 0, 0);
</span></code></pre></td></tr></table></div></figure>


<p>Reference:<a href="http://stackoverflow.com/questions/20305943/why-extra-space-is-at-top-of-uitableview-simple">http://stackoverflow.com/questions/20305943/why-extra-space-is-at-top-of-uitableview-simple</a></p>

<h3>11. 使用 UISearchDisplayController 遇到的问题</h3>

<p>使用代码创建的 UISearchDisplayController 必须用一个属性来持有它，个人觉得这里有点奇怪，因为 UIViewController 在头文件中的声明是：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>@property(nonatomic, readonly, strong) UISearchDisplayController *searchDisplayController</span></code></pre></td></tr></table></div></figure>


<p>理论上来讲既然是 strong 那么这个对象应该会存在才对，但不知道什么原因，这样并不行，它会在内存中被销毁，还是得在扩展里用一个属性来持有它。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>*.m
</span><span class='line'>
</span><span class='line'>@property (nonatomic) UISearchDisplayController *wt_searchDisplayController;
</span><span class='line'>
</span><span class='line'>self.wt_searchDisplayController = [[UISearchDisplayController alloc] initWithSearchBar:self.searchBar contentsController:self];
</span><span class='line'>self.wt_searchDisplayController.delegate = self;
</span><span class='line'>self.wt_searchDisplayController.searchResultsDataSource = self.searchCoordinator;
</span><span class='line'>self.wt_searchDisplayController.searchResultsDelegate = self.searchCoordinator;
</span><span class='line'>[self.wt_searchDisplayController.searchResultsTableView registerClass:[RCConversationCell class] forCellReuseIdentifier:sSearchCellIdentifier];
</span></code></pre></td></tr></table></div></figure>


<p>问题还没有完全解决，我应用的导航结构是 UINavigationController > UITabBarController [VC1, VC 2, VC3], 在 VC1 界面里需要搜索功能，然后我在 VC1 navigation bar 下方放置了一个 search bar， 这个 search bar 和 searchDisplayController 关联起来，结果却出现 search result tableView 覆盖 search bar 的情况，最后的解决办法是调整导航结构 UINavigationController > UITabBarController [(UINavigationController > VC1), (UINavigationController > VC2), (UINavigationController > VC3)], 也就是先把 UIViewController 嵌入到 UINavigationController 中， 再把它做为 UITabBarController 的 childController.</p>

<h3>12. Controller 的视图 Layer 上添加 AVCaptureVideoPreviewLayer， 然后再在 Controller 的 View 上添加一个扫描框视图，用系统的 View 作为扫描框视图时能正常显示相机的捕获的内容， 用自定义的视图时，扫描框内全是黑的。</h3>

<p>Solution:在自定义视图的初始化方法中设置 opaque 为 NO。</p>

<h3>13. You are not authorized to use this service.</h3>

<p>Solution: I recently enable Apple ID two-step verification. When I upload app to App Store via Xcode it inform me &ldquo;You are not authorized to use this service.&rdquo; I feel very strange. I decide to use Application Loader after search with google.  Sign in Application Loader need app-specific password, you can get it follow instructs:</p>

<ol>
<li>Sign in to your <a href="https://appleid.apple.com/account/home">Apple ID account page</a>;</li>
<li>In the Security section, click Edit.</li>
<li>Click Generate Password and follow the steps on your screen.</li>
</ol>


<p>Reference:<a href="https://support.apple.com/en-us/HT204397">https://support.apple.com/en-us/HT204397</a></p>

<p>Now we can upload app with Application Loader:
1. Xcode > Open Developer Tool > Application Loader
2. Sign in Application Loader with app-specific password
3. Click on &ldquo;Choose&rdquo;
4. Pick the IPA you have just exported
5. Follow submission process</p>

<p>Reference:<a href="http://stackoverflow.com/questions/33291394/xcode-7-1-not-authorized-to-use-this-service-error">http://stackoverflow.com/questions/33291394/xcode-7-1-not-authorized-to-use-this-service-error</a></p>

<h3>14.</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ERROR ITMS-90535: "Unexpected CFBundleExecutable Key. The bundle at 'Payload/sohiOSApp.app/TencentOpenApi_IOS_Bundle.bundle' does not contain a bundle executable. If this bundle intentionally does not contain an executable, consider removing the CFBundleExecutable key from its Info.plist and using a CFBundlePackageType of BNDL. If this bundle is part of a third-party framework, consider contacting the developer of the framework for an update to address this issue."</span></code></pre></td></tr></table></div></figure>


<p>Solotion:Removing the CFBundleExecutable key from TencentOpenApi_IOS_Bundle.bundle&rsquo;s Info.plist and using a CFBundlePackageType of BNDL.</p>

<h3>15. Pointer is missing a nullability type specifier</h3>

<p>Solution:It&rsquo;s simply because as soon as you supply any nullability information in a header, you are expected to supply nullability information for everything in that header. Either the whole API is unspecified or the whole API is specified, with regard to nullability. The compiler is just warning you that you have left the job half-finished.</p>

<p>Reference:<a href="http://stackoverflow.com/questions/33028900/pointer-is-missing-a-nullability-type-specifier-on-function-interface">http://stackoverflow.com/questions/33028900/pointer-is-missing-a-nullability-type-specifier-on-function-interface</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[使用 Mac 遇到的问题]]></title>
    <link href="http://DamianSheldon.github.io/blog/problems-when-use-mac.html"/>
    <updated>2015-10-10T08:49:37+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/problems-when-use-mac</id>
    <content type="html"><![CDATA[<h2>1. How to enable the three finger drag on OS X 10.11</h2>

<p>Step 1: Open System Preferences</p>

<p>Step 2: Click Accessibility</p>

<p>Step 3: Click Mouse &amp; Trackpad</p>

<p>Step 4: Click Trackpad Options…</p>

<p>Step 5: Click Enable dragging</p>

<p>Step 6: Select “three finger drag” in the drop down box</p>

<p>Reference:<a href="http://www.idownloadblog.com/2015/06/25/three-finger-drag-gesture-os-x-el-capitan/">http://www.idownloadblog.com/2015/06/25/three-finger-drag-gesture-os-x-el-capitan/</a></p>

<!-- more -->


<h2>2. How to find computer name on Mac</h2>

<ol>
<li><p>GUI<br/>
System Preference > Sharing</p></li>
<li><p>Command Line</p>

<pre><code class="`"> $ hostname
</code></pre></li>
</ol>


<h2>3. SSH to Server Without Entering Password From Mac</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cp ~/.ssh/id_rsa.pub ~/.ssh/authorized_keys</span></code></pre></td></tr></table></div></figure>


<p>Reference:<a href="https://thecustomizewindows.com/2014/04/ssh-server-without-entering-password-mac-os-x/">https://thecustomizewindows.com/2014/04/ssh-server-without-entering-password-mac-os-x/</a></p>

<h2>4. How to open google search results in a new tab？</h2>

<p>Solution:Here&rsquo;s how to make Google open your results in a new tab every time. If you&rsquo;d rather Google not open your results on the same page, you can set the default by going to Google and clicking on the cog in the upper right-hand corner. Choose &ldquo;Search Settings&rdquo; from the list, then scroll down to &ldquo;Where Results Open&rdquo;.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Mac 安装 OS X El Capitan]]></title>
    <link href="http://DamianSheldon.github.io/blog/note-of-install-os-x-el-capitan-and-set-up-development-enviroment.html"/>
    <updated>2015-10-09T18:00:22+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/note-of-install-os-x-el-capitan-and-set-up-development-enviroment</id>
    <content type="html"><![CDATA[<p>最近 Apple 更新了 OS X，通过 App Store 更新下载下来 OS X El Capitan 的安装时遇到问题了 &ndash; 手头的这台 Mac 之前有人分区安装了 Windows, OS X 安装在第二个分区， OS X El Capitan 却不能安装在 OS X 所在的分区，而且格式化 Windows 所在的分区又报错，也是醉了，只好重装。</p>

<h2>备份数据</h2>

<p>我用 sftp 把数据备份到另一台 Mac 上, 之前也试过 Migration Assitant 都是卡在最后一分钟，不知道现在这个问题改善了没有。 用 sftp 备份中间也中断了好多次，但手头也没移动硬盘也只能这么将就着了。</p>

<h2>Install OS X El Capitan</h2>

<ol>
<li>需要一个 8GB 左右的 U 盘，因为 El Capitan 的大小超过 6GB ;</li>
<li>从 App Store 下载 El Capitan;</li>
<li>制作安装盘：</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo /Applications/Install\ OS\ X\ Mavericks.app/Contents/Resources/createinstallmedia --volume /Volumes/Untitled --applicationpath /Applications/Install\ OS\ X\ Mavericks.app --nointeraction</span></code></pre></td></tr></table></div></figure>


<ol>
<li>重新启动，按住 option 键，选择通过U盘启动，之后先进入磁盘工具里面把硬盘格式化了（你也可以选择不格式化，这样就是覆盖安装）;</li>
</ol>


<!-- more -->


<h2>安装常用软件</h2>

<ol>
<li>Download Xcode in App Store;</li>
<li>iTerm;</li>
<li>Chrome;</li>
<li>LibreOffice;</li>
<li>Microsoft Remote Desktop Connection;</li>
<li>Homebrew;</li>
<li>ruby;</li>
<li>Set up web development envrionment</li>
</ol>


<p>Reference:<a href="http://blog.devtang.com/blog/2014/04/12/install-mavericks-note/">http://blog.devtang.com/blog/2014/04/12/install-mavericks-note/</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Set up PHP development environment]]></title>
    <link href="http://DamianSheldon.github.io/blog/set-up-php-development-environment.html"/>
    <updated>2015-09-19T22:25:19+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/set-up-php-development-environment</id>
    <content type="html"><![CDATA[<h3>Notes of Set up PHP development environment</h3>

<ol>
<li>Install <a href="https://eclipse.org/pdt/#download">Eclipse PDT</a>;</li>
<li><a href="http://jason.pureconcepts.net/2012/10/install-pear-pecl-mac-os-x/">Install PEAR and PECL on Mac OS X</a>, php.ini locate in /etc on Yosemite;</li>
<li><p><a href="http://www.xdebug.org/docs/install">Install Xdebug through PEAR/PECL</a>;<br/>
 Addition configure for Yosemite</p>

<ul>
<li><code>sudo cp /etc/php.ini.default /etc/php.ini</code></li>
<li>add &ldquo;zend_extension=/usr/lib/php/extensions/no-debug-non-zts-20121212/xdebug.so&rdquo; to php.ini</li>
</ul>
</li>
<li><p>Debugging Local PHP Files (PHP CLI Application)</p>

<ul>
<li>Create a PHP project;</li>
<li>Create a PHP file;</li>
<li>Set a breakpoint in PHP file;</li>
<li>Save file;</li>
<li>Create a new debug configuration;

<ul>
<li>Eclipse > Preference&hellip; > PHP Executables > Add (Executable path: <code>which php</code>)</li>
<li>Run > Debug Configurations > Select PHP CLI Application > New</li>
</ul>
</li>
</ul>
</li>
<li><p>Debugging PHP Web Applications (PHP Web Application)</p>

<ul>
<li>Create a PHP project;</li>
<li>Create a PHP file;</li>
<li>Create a new debug configuration;

<ul>
<li>Run > Debug Configurations > Select PHP Web Application > New</li>
</ul>
</li>
</ul>
</li>
<li><p>Test with PHPUnit</p>

<ul>
<li>Run > External Tools > External Tools Configurations&hellip; > Program > New
[Main]
Location:/usr/local/bin/phpunit
Working Directory:${workspace_loc:/Backend/tests}
Apply > Run
<a href="http://stackoverflow.com/questions/966673/eclipse-pdt-phpunit">Reference</a></li>
</ul>
</li>
<li><p>Integrate MakeGood (failure)</p>

<ul>
<li>Installing Prerequisite Software

<ul>
<li>PHP 5.5.27 (cli)</li>
<li>xdebug-2.3.2</li>
<li>eclipse mars(4.5.0)</li>
<li>PDT(3.5.0)</li>
<li>PHPUnit (4.8.6)</li>
</ul>
</li>
<li><p>Installing MakeGood
  Help -> Install New Software&hellip; -> Add&hellip; -> <a href="http://eclipse.piece-framework.com/">http://eclipse.piece-framework.com/</a></p></li>
<li><p>Selecting a Testing Framework</p></li>
<li><p>Resolving the Dependencies to the Testing Framework</p>

<pre><code>  * Defining User Libraries
      Eclipse -&gt; Preferences... &gt; PHP -&gt; PHP Libraries &gt; New... &gt; OK
      Add External folder... &gt; [Verifying the include path](http://pear.php.net/manual/en/installation.checking.php)
  * Adding User Libraries to the Project
</code></pre>

<p>   fail with PHPUnit_Framework_TestCase class is not available. Fix&hellip;, I doubt that MakeGood doesn&rsquo;t support eclipse mars.</p></li>
</ul>


<p> *Testing Framework Specific Configuration<br/>
     PHPUnit</p>

<pre><code> * Open the properties for the project.
 * Select MakeGood.
 * Select PHPUnit.
 * Specify the XML Configuration File. [eg](http://beagile.biz/a-simple-phpunit-xml-configuration-example/)
</code></pre>

<p> <a href="http://piece-framework.com/projects/makegood/wiki/MakeGood_User_Guide_1_7_0">Reference</a></p></li>
</ol>


<h3>Throw java.lang.NullPointerException when create a new debug configuration</h3>

<p>Solution: Add a PHP Executable, Eclipse > Preference&hellip; > PHP Executables > Add (Executable path: <code>which php</code>)</p>

<h3>Wait for XDebug session</h3>

<p>Solution:Debugging PHP Web Applications时卡在这里，原因是XDebug remote debug没配置好，参考了<a href="http://www.xdebug.org/docs/remote">Remote Debugging</a>和<a href="https://wiki.eclipse.org/Debugging_using_XDebug">Debugging using XDebug</a>，发现phpinfo()输出的内容并没有XDebug。于是来开始配置php.ini,参考的<a href="http://stackoverflow.com/questions/27861720/how-to-set-default-php-ini-to-be-used-osx-yosemite">How to set default php.ini to be used, OSX Yosemite</a></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo cp /etc/php.ini.default /etc/php.ini
</span><span class='line'>
</span><span class='line'>// Add follow content to php.ini
</span><span class='line'>[XDebug]
</span><span class='line'>zend_extension=/usr/lib/php/extensions/no-debug-non-zts-20121212/xdebug.so
</span><span class='line'>xdebug.remote_enable=On
</span><span class='line'>xdebug.remote_handler=dbgp
</span><span class='line'>xdebug.remote_host=helloworld.local
</span><span class='line'>xdebug.remote_port=9000
</span><span class='line'>;xdebug.remote_connect_back=1
</span><span class='line'>xdebug.remote_mode="req"
</span><span class='line'>xdebug.remote_log="/var/log/xdebug.log"
</span><span class='line'>
</span><span class='line'>sudo apachectl restart</span></code></pre></td></tr></table></div></figure>


<h3>/private/tmp/pear/install/xdebug/xdebug.c:25:10: fatal error: &lsquo;php.h&rsquo; file not found</h3>

<p>Solution:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ xcode-select --install</span></code></pre></td></tr></table></div></figure>


<p>Reference:<a href="http://stackoverflow.com/questions/19531262/cant-phpize-or-configure-an-extension-in-os-x-10-9-mavericks">http://stackoverflow.com/questions/19531262/cant-phpize-or-configure-an-extension-in-os-x-10-9-mavericks</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Notes of Wireshark]]></title>
    <link href="http://DamianSheldon.github.io/blog/notes-of-wireshark.html"/>
    <updated>2015-09-15T09:05:51+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/notes-of-wireshark</id>
    <content type="html"><![CDATA[<h3>1.Capture HTTP traffic on your server</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Capture &gt; Capture Filters... &gt; New &gt; OK
</span><span class='line'>Capture &gt; Options... &gt; Capture Filter(Set to appropriate filter) &gt; Start
</span><span class='line'>
</span><span class='line'>host www.baidu.com
</span><span class='line'>
</span><span class='line'>curl -d "name=test&page=1" http://www.baidu.com</span></code></pre></td></tr></table></div></figure>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>POST / HTTP/1.1
</span><span class='line'>User-Agent: curl/7.37.1
</span><span class='line'>Host: www.baidu.com
</span><span class='line'>Accept: */*
</span><span class='line'>Content-Length: 16
</span><span class='line'>Content-Type: application/x-www-form-urlencoded
</span><span class='line'>
</span><span class='line'>name=test&page=1
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>HTTP/1.1 302 Moved Temporarily
</span><span class='line'>Date: Tue, 15 Sep 2015 00:56:03 GMT
</span><span class='line'>Content-Type: text/html
</span><span class='line'>Content-Length: 215
</span><span class='line'>Connection: Keep-Alive
</span><span class='line'>Location: http://www.baidu.com/search/error.html
</span><span class='line'>Server: BWS/1.1
</span><span class='line'>X-UA-Compatible: IE=Edge,chrome=1
</span><span class='line'>BDPAGETYPE: 3
</span><span class='line'>Set-Cookie: BDSVRTM=0; path=/
</span><span class='line'>
</span><span class='line'>&lt;html&gt;
</span><span class='line'>&lt;head&gt;&lt;title&gt;302 Found&lt;/title&gt;&lt;/head&gt;
</span><span class='line'>&lt;body bgcolor="white"&gt;
</span><span class='line'>&lt;center&gt;&lt;h1&gt;302 Found&lt;/h1&gt;&lt;/center&gt;
</span><span class='line'>&lt;hr&gt;&lt;center&gt;pr-nginx_1-0-245_BRANCH Branch
</span><span class='line'>Time : Thu Sep 10 11:36:26 CST 2015&lt;/center&gt;
</span><span class='line'>&lt;/body&gt;
</span><span class='line'>&lt;/html&gt;</span></code></pre></td></tr></table></div></figure>


<p>Reference:<a href="https://wiki.wireshark.org/CaptureFilters">https://wiki.wireshark.org/CaptureFilters</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Linux Useful Command Line Part 2]]></title>
    <link href="http://DamianSheldon.github.io/blog/linux-useful-command-line-part-2.html"/>
    <updated>2015-09-11T09:30:16+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/linux-useful-command-line-part-2</id>
    <content type="html"><![CDATA[<h3>1.Rails Error: ImageMagick/GraphicsMagick is not installed</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>brew install graphicsmagick
</span><span class='line'>brew install ImageMagick</span></code></pre></td></tr></table></div></figure>


<p>Reference:<a href="http://stackoverflow.com/questions/29377651/rails-error-imagemagick-graphicsmagick-is-not-installed">http://stackoverflow.com/questions/29377651/rails-error-imagemagick-graphicsmagick-is-not-installed</a></p>

<h3>2.Transfer file via scp (or sftp) between two Mac</h3>

<p>Via scp:<br/>
1.Enable Enable SSH
     System Preferences > Sharing > enable the “Remote Login” feature</p>

<p>2.type scp command</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>scp VirtualBox-5.0.4-102546-OSX.dmg dongmeiliang@192.168.1.255:/Users/dongmeiliang/Documents/</span></code></pre></td></tr></table></div></figure>


<p>Via s<a href="ftp:">ftp:</a></p>

<p>1.sftp <a href="&#x6d;&#x61;&#x69;&#108;&#x74;&#x6f;&#58;&#100;&#111;&#x6e;&#x67;&#x6d;&#101;&#105;&#108;&#105;&#x61;&#110;&#x67;&#64;&#49;&#x39;&#50;&#46;&#x31;&#x36;&#x38;&#46;&#49;&#46;&#x32;&#x35;&#x35;">&#100;&#x6f;&#x6e;&#103;&#x6d;&#x65;&#105;&#108;&#105;&#x61;&#110;&#103;&#x40;&#x31;&#x39;&#x32;&#46;&#x31;&#54;&#x38;&#46;&#49;&#46;&#x32;&#x35;&#53;</a><br/>
2.cd path<br/>
  Change remote directory to path.</p>

<p>3.lcd path<br/>
  Change local directory to path.</p>

<p>4.get [-Ppr] remote-path [local-path]</p>

<p>5.lpwd    Print local working directory.</p>

<p>6.pwd     Display remote working directory.</p>

<p>7.put [-Ppr] local-path [remote-path]</p>

<p>8.lls [ls-options [path]]
             Display local directory listing of either path or current directory if path is not specified.  ls-options may con-
             tain any flags supported by the local system&rsquo;s ls(1) command.  path may contain glob(3) characters and may match
             multiple files.</p>

<p>9.ls [-1afhlnrSt] [path]
             Display a remote directory listing of either path or the current directory if path is not specified.  path may con-
             tain glob(3) characters and may match multiple files.</p>

<p>10.Quit sftp</p>

<p>bye<br/>
exit<br/>
quit</p>

<h3>3.Installing Apps with Homebrew Cask</h3>

<p><a href="http://caskroom.io/">Homebrew Cask</a> is an extension for Homebrew that allows you to automate the installation of Mac Apps and Fonts.</p>

<p>After you have homebrew installed, you&rsquo;ll want to install Homebrew Cask:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ brew install caskroom/cask/brew-cask</span></code></pre></td></tr></table></div></figure>


<h3>4.复制目录及子目录下的某种类型文件</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cp  ~/Documents/HJKApp/srsApp/srsApp/Sections/Home/Main.xcassets/**/*.png  ~/Pictures/HJKApp/OnlyHaveScale2/</span></code></pre></td></tr></table></div></figure>


<h3>5.Recursive copy of specific files in Unix/Linux?</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rsync -avm --include='*.jar' -f 'hide,! */' . /destination_dir</span></code></pre></td></tr></table></div></figure>


<p>Reference:<a href="http://stackoverflow.com/questions/9622883/recursive-copy-of-specific-files-in-unix-linux">http://stackoverflow.com/questions/9622883/recursive-copy-of-specific-files-in-unix-linux</a></p>

<h3>6.Uploading directories with sftp?</h3>

<p>I don&rsquo;t know why sftp does this but you can only recursive copy if the destination directory already exists. So do this&hellip;</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sftp&gt; mkdir bin  
</span><span class='line'>sftp&gt; put -r bin</span></code></pre></td></tr></table></div></figure>


<p>Reference:<a href="http://unix.stackexchange.com/questions/7004/uploading-directories-with-sftp">http://unix.stackexchange.com/questions/7004/uploading-directories-with-sftp</a></p>

<h3>7.Scanning machine&rsquo;s specified ports</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ nmap -p 37099 192.168.3.214
</span><span class='line'>// -Pn: Treat all hosts as online -- skip host discovery
</span><span class='line'>$ nmap -Pn 192.168.3.214</span></code></pre></td></tr></table></div></figure>


<h3>8.Reverse search history command</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>// Execute last command
</span><span class='line'>$ !!
</span><span class='line'>
</span><span class='line'>Ctrl + r
</span><span class='line'>(reverse-i-search)`': pull
</span><span class='line'>(reverse-i-search)`': git</span></code></pre></td></tr></table></div></figure>


<p>Reference:<a href="http://unix.stackexchange.com/questions/3747/understanding-the-exclamation-mark-in-bash">http://unix.stackexchange.com/questions/3747/understanding-the-exclamation-mark-in-bash</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Vim]]></title>
    <link href="http://DamianSheldon.github.io/blog/vim.html"/>
    <updated>2015-09-10T21:09:05+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/vim</id>
    <content type="html"><![CDATA[<h3>1.查看帮助</h3>

<p>:help</p>

<h3>2.查看quickref</h3>

<p>：help quickref</p>

<h3>3.语法高亮</h3>

<p>|:syn-on|       :syntax on              start using syntax highlighting
|:syn-off|      :syntax off             stop using syntax highlighting</p>

<h3>4.Move cursor to its last position</h3>

<p>The quickest way is to hit either:</p>

<p>&lsquo;&rsquo;
(two apostrophes) or:</p>

<p>``
(two backticks).</p>

<h3>5.Show line number</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>:set number</span></code></pre></td></tr></table></div></figure>


<h3>6.Auto indent</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>:set autoindent</span></code></pre></td></tr></table></div></figure>


<h3>7.Set background</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>:set background=dark
</span><span class='line'>:set background=light</span></code></pre></td></tr></table></div></figure>


<h3>8.Common move command</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>0, ^ line head
</span><span class='line'>$, g_ line foot
</span><span class='line'>ctl + f forword page
</span><span class='line'>ctl + b back page</span></code></pre></td></tr></table></div></figure>


<h3>9.用vim编辑一个文件，改动了很多内容；最终要保存时却发现没有权限</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>:w !sudo tee % &gt; /dev/null</span></code></pre></td></tr></table></div></figure>


<p>Reference:<a href="http://www.caiyiting.com/blog/2014/vim-sudo.html">http://www.caiyiting.com/blog/2014/vim-sudo.html</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Using MySQL]]></title>
    <link href="http://DamianSheldon.github.io/blog/using-mysql.html"/>
    <updated>2015-08-12T22:01:09+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/using-mysql</id>
    <content type="html"><![CDATA[<h3>1.查看所有的用户</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ mysql -u user -p
</span><span class='line'>mysql &gt; USE mysql;
</span><span class='line'>mysql &gt; SELECT user, host FROM user;</span></code></pre></td></tr></table></div></figure>


<h3>2.查看用户的权限</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mysql &gt; SHOW GRANTS FOR 'username'@'localhost';</span></code></pre></td></tr></table></div></figure>


<h3>3.为用户添加操作某个数据库的权限</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>GRANT select, insert, update, delete, index, alter, create ON db2.* TO 'jeffrey'@'localhost';</span></code></pre></td></tr></table></div></figure>


<h3>4.Default options are read from the following files in the given order:</h3>

<p>/etc/my.cnf /etc/mysql/my.cnf /usr/local/mysql/etc/my.cnf ~/.my.cnf</p>

<h3>5.</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mysql &gt; CREATE TABLE IF NOT EXISTS categories (
</span><span class='line'>  id SMALLINT NOT NULL AUTO_INCREMENT,
</span><span class='line'>  category VARCHAR(30) NOT NULL,
</span><span class='line'>  PRIMARY KEY (id),
</span><span class='line'>  UNIQUE KEY category (category)
</span><span class='line'>)ENGINE = MyISAM DEFAULT CHARSET = utf8;</span></code></pre></td></tr></table></div></figure>


<ul>
<li>VARCHAR(30):can hold up to 30 characters.</li>
<li>A UNIQUE index creates a constraint such that all values in the index must be distinct. An error occurs if you try to add a new row with a key value that matches an existing row. For all engines, a UNIQUE index permits multiple NULL values for columns that can contain NULL.</li>
<li>DEFAULT CHARSET</li>
</ul>


<!-- more -->


<h3>6.</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mysql &gt; CREATE TABLE IF NOT EXISTS orders (
</span><span class='line'>  id INT UNSIGNED NOT NULL,
</span><span class='line'>  user_id INT UNSIGNED NOT NULL,
</span><span class='line'>  transaction_id VARCHAR(19) NOT NULL,
</span><span class='line'>  payment_status VARCHAR(15) NOT NULL,
</span><span class='line'>  payment_amount DECIMAL(6,2) UNSIGNED NOT NULL,
</span><span class='line'>  payment_date_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
</span><span class='line'>  PRIMARY KEY(id),
</span><span class='line'>  KEY user_id (user_id)
</span><span class='line'>)ENGINE = MyISAM DEFAULT CHARSET = utf8;</span></code></pre></td></tr></table></div></figure>


<ul>
<li>KEY is normally a synonym for INDEX. The key attribute PRIMARY KEY can also be specified as just KEY when given in a column definition. This was implemented for compatibility with other database systems.</li>
<li>INDEX</li>
</ul>


<h3>7.&ndash;log-bin option</h3>

<p>Q:How to check the &ndash;log-bin status of MySQL?
A:</p>

<blockquote><p>To make incremental backups, we need to save the incremental changes. In MySQL, these changes are represented in the binary log, so the MySQL server should always be started with the &ndash;log-bin option to enable that log.</p></blockquote>

<p>Q:How to enable the &ndash;log-bin option of MySQL?
A:To enable the binary log, start the server with the &ndash;log-bin[=base_name] option. If no base_name value is given, the default name is the value of the pid-file option (which by default is the name of host machine) followed by -bin. If the base name is given, the server writes the file in the data directory unless the base name is given with a leading absolute path name to specify a different directory. It is recommended that you specify a base name explicitly rather than using the default of the host name;</p>

<h3>8.You have enabled the binary log, but you haven&rsquo;t provided the mandatory server-id.</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>2016-01-27T14:15:24.323616Z 0 [Note] /usr/local/mysql/bin/mysqld (mysqld 5.7.9-log) starting as process 9709 ...
</span><span class='line'>2016-01-27T14:15:24.327264Z 0 [Warning] Setting lower_case_table_names=2 because file system for /usr/local/mysql/data/ is case insensitive
</span><span class='line'>2016-01-27T14:15:24.327888Z 0 [ERROR] You have enabled the binary log, but you haven't provided the mandatory server-id. Please refer to the proper server start-up parameters documentation
</span><span class='line'>2016-01-27T14:15:24.328034Z 0 [ERROR] Aborting
</span><span class='line'>
</span><span class='line'>2016-01-27T14:15:24.328049Z 0 [Note] Binlog end
</span><span class='line'>2016-01-27T14:15:24.328153Z 0 [Note] /usr/local/mysql/bin/mysqld: Shutdown complete</span></code></pre></td></tr></table></div></figure>


<p>A: set server-id</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo /usr/local/mysql/bin/mysqld --user=_mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data --plugin-dir=/usr/local/mysql/lib/plugin --log-error=/usr/local/mysql/data/mysqld.local.err --pid-file=/usr/local/mysql/data/mysqld.local.pid --log-bin --server-id=1</span></code></pre></td></tr></table></div></figure>


<blockquote><p>When enabling binary logs, the server ID is automatically set to &lsquo;1&rsquo;.  &ndash;(<a href="https://bugs.mysql.com/bug.php?id=56739">https://bugs.mysql.com/bug.php?id=56739</a>)</p></blockquote>

<p>Q:How can i get server_id in MYSQL?
A:SELECT @@server_id</p>

<h3>9.Q:如何分屏查看输出结果？</h3>

<p>A:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>// 用 less 分屏查看输出结果
</span><span class='line'>mysql&gt; pager less;
</span><span class='line'>
</span><span class='line'>// 关闭分屏查看
</span><span class='line'>mysql&gt; nopager;</span></code></pre></td></tr></table></div></figure>


<h3>10.Q:Scope rules for stored programs and views?</h3>

<p>A:</p>

<h3>11.Q:How to view all Stored Programs and Views in MySQL?</h3>

<p>A:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>// 1.Stored Routines (Procedures and Functions)
</span><span class='line'>&gt; Query the ROUTINES table of the INFORMATION_SCHEMA database.
</span><span class='line'>&gt; The ROUTINES table provides information about stored routines (both procedures and functions). The ROUTINES table does not include user-defined functions (UDFs).
</span><span class='line'>
</span><span class='line'>// 2.Triggers
</span><span class='line'>mysql&gt;SHOW TRIGGERS;
</span><span class='line'>
</span><span class='line'>// 3.Event Scheduler
</span><span class='line'>mysql&gt;SHOW EVENTS;
</span><span class='line'>
</span><span class='line'>// 4.Views</span></code></pre></td></tr></table></div></figure>


<h3>12.Q:How to view user-defined functions (UDFs)?</h3>

<p>A:</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS App 开发问题汇总（三）]]></title>
    <link href="http://DamianSheldon.github.io/blog/ios-development-problem-part-3.html"/>
    <updated>2015-07-30T11:36:57+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/ios-development-problem-part-3</id>
    <content type="html"><![CDATA[<h3>1.问题描述：Checking the Entitlements for an iOS app Submission to the App Store</h3>

<p>Making an Inspectable .ipa file<br/>
In the Xcode Organizer, instead of Submit to the iOS App Store, do Save for Enterprise or Ad-Hoc Deployment. This will create a local copy of the .ipa file that would be submitted to the App Store.<br/>
When asked to choose the provisioning profile to sign with, select the same distribution profile you use when submitting to the App Store. Take a screenshot of your choice (command-shift-3) so you can verify this step later. During submission, this screenshot will be the only record you have identifying which profile was used to sign the app.<br/>
When asked to save the package, uncheck Save for Enterprise Distribution, then save the .ipa file.<br/>
Checking the Entitlements of an .ipa file<br/>
Find the .ipa file and change its the extension to .zip.<br/>
Expand the .zip file. This will produce a Payload folder containing your .app bundle.<br/>
Use the codesign tool to check the entitlements on the .app bundle like this:
$ codesign -d &ndash;entitlements :- &ldquo;Payload/YourApp.app&rdquo;
where YourApp.app is the actual name of your .app bundle.<br/>
Use the security tool to check the entitlements of the app&rsquo;s embedded provisioning profile:
// should add cms, Apple may be a typo
$ security cms -D -i &ldquo;Payload/YourApp.app/embedded.mobileprovision&rdquo;</p>

<p>where YourApp.app is the actual name of your .app bundle.</p>

<!-- more -->


<h3>2.问题描述：</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>`&lt;PBXGroup path=`Vendors` UUID=`4931326E1B4A0EBF00741B49`&gt;` attempted to initialize an object with an unknown UUID. `4920B77E1B58900100C9789C` for attribute: `children`. This can be the result of a merge and  the unknown UUID is being discarded.</span></code></pre></td></tr></table></div></figure>


<p>解决办法：
1. I opened the .pbxproj file in a text editor.<br/>
a. Go to your .xcodeproj<br/>
b. Right click -> Show package contents<br/>
c. Open .pbxproj with a text editor.<br/>
2. I searched for the UUID.<br/>
3. Turns out that is a static library folder already removed from reference.<br/>
4. I readd folder that contain the static library.<br/>
5. Rerun pod installation.<br/>
6. Issue not happening anymore! :D</p>

<p>Reference:<a href="https://github.com/CocoaPods/CocoaPods/issues/1822">https://github.com/CocoaPods/CocoaPods/issues/1822</a></p>

<h3>3.How do I return to an older version of our code in Subversion?</h3>

<p>解决办法:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>svn update
</span><span class='line'>svn merge -r 150:140 .
</span><span class='line'>svn commit -m "Rolled back to r140"</span></code></pre></td></tr></table></div></figure>


<p>Reference:<a href="http://stackoverflow.com/questions/814433/how-do-i-return-to-an-older-version-of-our-code-in-subversion">http://stackoverflow.com/questions/814433/how-do-i-return-to-an-older-version-of-our-code-in-subversion</a></p>

<h3>4. Add top layout guide in NIB file</h3>

<p>解决办法：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-(void)viewDidLoad {
</span><span class='line'>      if ([self respondsToSelector:@selector(edgesForExtendedLayout)])
</span><span class='line'>         self.edgesForExtendedLayout = UIRectEdgeNone;
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>Reference:<a href="http://stackoverflow.com/questions/17074365/status-bar-and-navigation-bar-appear-over-my-views-bounds-in-ios-7">http://stackoverflow.com/questions/17074365/status-bar-and-navigation-bar-appear-over-my-views-bounds-in-ios-7</a></p>

<h3>5. How do I set the height of tableHeaderView (UITableView) with autolayout?</h3>

<p>Reference:<a href="http://stackoverflow.com/questions/20982558/how-do-i-set-the-height-of-tableheaderview-uitableview-with-autolayout">http://stackoverflow.com/questions/20982558/how-do-i-set-the-height-of-tableheaderview-uitableview-with-autolayout</a></p>

<h3>6. How to resize superview to fit all subviews with autolayout?</h3>

<p>Reference:<a href="http://stackoverflow.com/questions/18118021/how-to-resize-superview-to-fit-all-subviews-with-autolayout/18155803#18155803">http://stackoverflow.com/questions/18118021/how-to-resize-superview-to-fit-all-subviews-with-autolayout/18155803#18155803</a></p>

<h3>7.How to use c++ and objective-c together in XCode 4.2</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>1. Rename any .m file to .mm file;
</span><span class='line'>2. If you look at the "Build Settings" there is a place written "Compile Sources As". There is a dropdown menu there where you can select Objective-C++. In the clang/gcc commandline I think it is "-x objective-c++".</span></code></pre></td></tr></table></div></figure>


<p>Reference:<a href="http://stackoverflow.com/questions/9250655/how-to-use-c-and-objective-c-together-in-xcode-4-2">http://stackoverflow.com/questions/9250655/how-to-use-c-and-objective-c-together-in-xcode-4-2</a></p>

<h3>8.How do I change the status bar content to white?</h3>

<p>Here are the steps involved in changing the contents of the status bar (battery, time, signal) to white:</p>

<p>Starting with iOS 8, you need to set the status bar color in the Project Editor, otherwise the status bar flashes from black to white when your app first starts:
Select the very first node in the Project Navigator to display the Project Editor.
Select your app under Targets.
Select the General tab and under the Deployment Info section, set Status Bar Style to Light.</p>

<p>Next, you need to modify your project&rsquo;s .plist file.
In the Project Navigator, expand the Supporting Files node.
Select the <My Project Name>-Info.plist file.
Click on the very first entry (Information Property List).
Click the plus (+) sign that appears in the first column.
At the bottom of the popup list, select View controller-based status bar appearance.
Make sure the Value column is set to NO.
If you want to change the status bar content color for all scenes in your app, add the following code to the AppDelegate class&rsquo;s application:didFinishLaunchingWithOptions method (add it before the return YES statement), or you can add it to an individual view controller&rsquo;s viewDidLoad method:
In Swift:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>UIApplication.sharedApplication().statusBarStyle = UIStatusBarStyle.LightContent</span></code></pre></td></tr></table></div></figure>


<p>In Objective-C:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleLightContent];</span></code></pre></td></tr></table></div></figure>


<p>If you are hiding the status bar in some scenes in your app, and you have a root navigation controller, you may need to add the following code to the root navigation controller:</p>

<p>In Swift:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>override func preferredStatusBarStyle() -&gt; UIStatusBarStyle {
</span><span class='line'>        return UIStatusBarStyle.LightContent
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>In Objective-C:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>- (UIStatusBarStyle)preferredStatusBarStyle
</span><span class='line'>{
</span><span class='line'>    return UIStatusBarStyleLightContent;
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>Reference:<a href="http://iosappsfornonprogrammers.com/forum/index.php?topic=1554.0">http://iosappsfornonprogrammers.com/forum/index.php?topic=1554.0</a></p>

<h3>9.Expression</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>(lldb) expr NSString *$str = (NSString *)[[NSString alloc] initWithData:data encoding:4]
</span><span class='line'>(lldb) po $str
</span><span class='line'>
</span><span class='line'>(lldb) e NSArray *$array = @[ @"Saturday", @"Sunday", @"Monday" ]
</span><span class='line'>(lldb) p [$array count]</span></code></pre></td></tr></table></div></figure>


<h3>10.fastlane add Slack Notifications</h3>

<p>Create an Incoming WebHook and export this as SLACK_URL. Can send a message to #channel (by default), a direct message to @username or a message to a private group group with success (green) or failure (red) status.</p>

<p>Slack > Menu > API > Incoming Webhooks > Set up an incoming webhook integration in your Slack team to try it out.</p>

<p>Reference:<a href="https://github.com/KrauseFx/fastlane/blob/master/docs/Actions.md#notifications">https://github.com/KrauseFx/fastlane/blob/master/docs/Actions.md#notifications</a></p>

<h3>11.问题描述：</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>directory not found for option '-F/Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS9.0.sdk/Developer/Library/Frameworks' "</span></code></pre></td></tr></table></div></figure>


<p>Solution:Further to a migration of my Xcode project, from Xcode 6.4 to Xcode 7, I get the warning message below (after compilation) for the Test target :</p>

<p>directory not found for option &lsquo;-F/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator9.0.sdk/Developer/Library/Frameworks&rsquo;
Actually I found something when comparing a new project vs an older one&hellip;</p>

<p>In the old project, the warning was only being produced by the test target of my projects. Under &lsquo;Search Paths&rsquo;, I found it was including two items under &lsquo;Framework Search Paths&rsquo;:</p>

<p>$(SDKROOT)/Developer/Library/Frameworks
$(inherited)
The new project kept the &lsquo;Framework Search Paths&rsquo; empty.</p>

<p>Deleting those entries in my older project then removed the warning.</p>

<p>Reference:<a href="http://stackoverflow.com/questions/30827022/xcode-7-beta-library-search-path-warning">http://stackoverflow.com/questions/30827022/xcode-7-beta-library-search-path-warning</a></p>

<h3>12.问题描述：</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ld: '/Users/dongmeiliang/Documents/ZHYJApp/ZHYJApp/ZHYJApp/Vendors/baiduMap/Release-iphoneos/BaiduMapAPI.framework/BaiduMapAPI(BMAddrList.o)' does not contain bitcode. You must rebuild it with bitcode enabled (Xcode setting ENABLE_BITCODE), obtain an updated library from the vendor, or disable bitcode for this target. for architecture arm64</span></code></pre></td></tr></table></div></figure>


<p>Solution:disable bitcode for this target.
App target > Build Settings > Enable Bitcode > NO</p>

<p>Reference:<a href="http://stackoverflow.com/questions/30848208/new-warnings-in-ios9">http://stackoverflow.com/questions/30848208/new-warnings-in-ios9</a></p>

<h3>13.问题描述：</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>*** Assertion failure in +[AAPLListUtilities sharedApplicationGroupContainer], /Users/dongmeiliang/Downloads/ListerforwatchOSiOSandOSX/Objective-C/ListerKit/AAPLListUtilities.m:33
</span><span class='line'>2015-09-22 15:31:20.966 Lister[84089:1396115] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'The shared application group container is unavailable. Check your entitlements and provisioning profiles for this target. Details on proper setup can be found in the PDFs referenced from the README.'</span></code></pre></td></tr></table></div></figure>


<p>Solution:Target > Lister > iCloud > Fix issue
            Target > App Group > Fix issue</p>

<p>Reference:<a href="http://stackoverflow.com/questions/27008730/new-lister-app-error-the-shared-application-group-container-is-unavailable-che">http://stackoverflow.com/questions/27008730/new-lister-app-error-the-shared-application-group-container-is-unavailable-che</a></p>

<h3>14.How can I conditionally include a file based on build configuration in Xcode?</h3>

<p>For each target for which you want to conditionally include the settings bundle, choose its Project from the source list, choose the target, and switch to the &ldquo;Build Phases&rdquo; tab.</p>

<p>Click the &ldquo;Add Build Phase&rdquo; button and choose &ldquo;Add Run Script&rdquo;.</p>

<p>Then enter the following for the script:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>if [ "${CONFIGURATION}" == "Debug" ]; then
</span><span class='line'>    cp -r "${PROJECT_DIR}/Settings.bundle" "${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.app"
</span><span class='line'>fi</span></code></pre></td></tr></table></div></figure>


<p>Reference:<a href="http://stackoverflow.com/questions/8496476/how-can-i-conditionally-include-a-file-based-on-build-configuration-in-xcode">http://stackoverflow.com/questions/8496476/how-can-i-conditionally-include-a-file-based-on-build-configuration-in-xcode</a></p>

<h3>15.Automatic Preferred Max Layout Width is not available on iOS versions prior to 8.0</h3>

<p>Solution: 1. Go to Issue Navigator (CMD+8) and Select latest built with the warning <br/>
2. Locate the warning(s) (search for &ldquo;Automatic Preferred Max Layout&rdquo;) and press expand button on the right<br/>
3. Find the Object ID of the UILabel<br/>
4. Open the Storyboard and SEARCH (CMD+f) for the object. It will SELECT AND HIGHLIGHT the UILabel<br/>
5. Explictit set preferred layout width</p>

<p>Reference:<a href="http://stackoverflow.com/questions/25398312/automatic-preferred-max-layout-width-is-not-available-on-ios-versions-prior-to-8">http://stackoverflow.com/questions/25398312/automatic-preferred-max-layout-width-is-not-available-on-ios-versions-prior-to-8</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[如何在 Mac 上开启 Apache, PHP, MySQL]]></title>
    <link href="http://DamianSheldon.github.io/blog/how-to-configure-https-slash-ssl-under-apache-and-yosemite.html"/>
    <updated>2015-07-05T21:24:55+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/how-to-configure-https-slash-ssl-under-apache-and-yosemite</id>
    <content type="html"><![CDATA[<h2>Apache</h2>

<h3>开启 Apache</h3>

<ol>
<li>Applications > Utilities > Terminal > <code>sudo apachectl start</code></li>
<li>Open <a href="http://localhost">http://localhost</a> with safari you can see &ldquo;It&rsquo;s works!&rdquo;.</li>
</ol>


<h3>配置 HTTPS 的详细步骤：</h3>

<ol>
<li><p>在配置文件中使能HTTPS/SSL：/private/etc/apache2/httpd.conf</p>

<ul>
<li>去掉 SSL 模块前的注释使能它:<br/>
<code>
LoadModule ssl_module libexec/apache2/mod_ssl.so
</code></li>
<li>去掉包含 SSL 配置文件前的注释，以便顶层配置文件能包含它:<br/>
<code>
Include /private/etc/apache2/extra/httpd-ssl.conf
</code></li>
</ul>
</li>
<li><p>定制/private/apache2/extra/httpd-ssl.conf</p>

<ul>
<li><p>更新 DocumentRoot 指向你的 Web 根目录:<br/>
<code>
DocumentRoot "/Users/dongmeiliang/Sites"
</code></p></li>
<li><p>修改 ServerName 成类似这样:<br/>
<code>
ServerName localhost:443
</code></p></li>
<li><p>指定 SSLCertificateFile<br/>
<code>
SSLCertificateFile "/private/etc/apache2/ssl/ssl.crt"
</code></p></li>
<li><p>指定 SSLCertificateKeyFile <br/>
<code>
SSLCertificateKeyFile "/private/etc/apache2/ssl/ssl.key"
</code></p></li>
<li>在 SSLCACertificatePath 和 SSLCARevocationPath 配置项前加上 # ，注释掉它们。</li>
</ul>
</li>
</ol>


<!-- more -->


<ol>
<li><p>制作自签名的证书</p>

<p> 1) Generate a Private Key<br/>
 <code>
 openssl genrsa -des3 -out server.key 1024
</code></p>

<p> 2) Generate a CSR (Certificate Signing Request)<br/>
 <code>
 openssl req -new -key server.key -out server.csr
</code></p>

<p> 3) Remove Passphrase from Key<br/>
 <code>
 cp server.key server.key.org  
</code><br/>
 <code>
 openssl rsa -in server.key.org -out server.key
</code></p>

<p> 4) Generating a Self-Signed Certificate<br/>
 <code>
 openssl x509 -req -days 365 -in server.csr -signkey server.key -out     server.crt
</code></p></li>
<li><p>拷贝证书到配置文件指定的目录下</p></li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo cp server.crt /private/etc/apache2/ssl/ssl.crt
</span><span class='line'>sudo cp server.key /private/etc/apache2/ssl/ssl.key</span></code></pre></td></tr></table></div></figure>


<ol>
<li>重启Apache，打开 <a href="https://localhost">https://localhost</a> 测试是否工作正常</li>
</ol>


<p>问题：Invalid command &lsquo;SSLMutex&rsquo;, perhaps misspelled or defined by a module not included in the server configuration<br/>
解决办法：注释掉/private/etc/apache2/extra/httpd-ssl.conf中SSLMutex解决了这个问题。</p>

<h2>PHP</h2>

<ol>
<li>Open /etc/apache2/httpd.conf with your favorite editor (eg: Vim);</li>
<li>Uncomment LoadModule php5_module libexec/apache2/libphp5.so</li>
<li><code>sudo apachectl restart</code></li>
<li>Test with phpinfo.php, its content is &ldquo;&lt;?php phpinfo(); ?>&rdquo;</li>
</ol>


<h2>MySQL</h2>

<ol>
<li><a href="http://dev.mysql.com/downloads/mysql/">Download from the MySQL site</a>, click No thanks, just take me to the downloads!;</li>
<li>Choose Mac OS X ver. 10.9 (x86, 64-bit), DMG Archive, because there is an issue with this version and El Capitan in that it won’t start on reboot – it will need to be started via command line explained below.</li>
<li>Starting MySQL

<ul>
<li>Via Preference Pane</li>
<li>Command line
  <code>
  sudo /usr/local/mysql/support-files/mysql.server start
 </code></li>
</ul>
</li>
<li><p>Add MySQL directory to shell path</p>

<ul>
<li>Open ~/.bash_profile</li>
<li>export PATH=&ldquo;/usr/local/mysql/bin:$PATH&rdquo;</li>
<li>source ~/.bash_profile</li>
</ul>
</li>
<li><p>Change root password
 <code>
 mysql -u root -p
 mysql&gt; SET PASSWORD FOR
 -&gt; 'root'@'localhost' = PASSWORD('mypass');
</code></p></li>
<li><p>Fix the 2002 MySQL Socket error
 Fix the looming 2002 socket error – which is linking where MySQL places the socket and where OSX thinks it should be, MySQL puts it in /tmp and OSX looks for it in /var/mysql the socket is a type of file that allows mysql client/server communication.</p>

<ul>
<li>sudo mkdir /var/mysql</li>
<li>sudo ln -s /tmp/mysql.sock /var/mysql/mysql.sock</li>
</ul>
</li>
<li><p>How to Start &amp; Stop MySQL Manually in OS X</p>

<pre><code class="`"> // Start MySQL
 $ sudo /usr/local/mysql/support-files/mysql.server start

 // Stop MySQL
 $ sudo /usr/local/mysql/support-files/mysql.server stop

 // Restart MySQL
 $ sudo /usr/local/mysql/support-files/mysql.server restart
</code></pre>

<ol>
<li><p>Where is MySQL&rsquo;s error log
Which by default is the host_name.err file in the data directory, in my situation(OS X El Capitan), it locate in /usr/local/mysql/data/DongMeiliangsMacBook-Pro.local.err.</p></li>
<li><p>View MySQL&rsquo;s status</p></li>
</ol>


<pre><code class="`"> $ sudo /usr/local/mysql/support-files/mysql.server status
</code></pre></li>
<li><p>ERROR 2002 (HY000): Can &lsquo; t connect to local MySQL server through socket &rsquo;/tmp/mysql.sock'</p>

<pre><code>// View MySQL status
$ /usr/local/mysql/support-files/mysql.server status
/usr/local/mysql/support-files/mysql.server: line 365: pidof: command not found
ERROR! MySQL is not running

// View MySQL's error log
$ sudo vim /usr/local/mysql/data/DongMeiliangsMacBook-Pro.local.err

// Find today's log
2015-12-12T11:21:14.012289Z 0 [ERROR] InnoDB: Unable to lock ./ibdata1 error: 35
2015-12-12T11:21:14.012335Z 0 [Note] InnoDB: Check that you do not already have another mysqld process using the same InnoDB data or log files.

// Is there mysql process
$ sudo pstress | grep 'mysql'

|-+= 30102 root /bin/sh /usr/local/mysql/bin/mysqld_safe --user=mysql
| \--- 30203 _mysql /usr/local/mysql/bin/mysqld --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data --plugin-dir=/usr/local/mysql/lib/plugin --user=mysql --log-error=/us
|--= 30207 _mysql /usr/local/mysql/bin/mysqld --user=_mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data --plugin-dir=/usr/local/mysql/lib/plugin --log-error=/usr

// Unfortunate, there are indeed two mysql procee, so kill one
$ sudo kill -9  30102

// Check we succeed kill a mysql process
$ sudo pstree | grep 'mysql'

// Unfortunate, when I killed it, it will auto start, so I have to disable auto start it.
|-+= 30210 root /bin/sh /usr/local/mysql/bin/mysqld_safe --user=mysql
| \--- 30203 _mysql /usr/local/mysql/bin/mysqld --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data --plugin-dir=/usr/local/mysql/lib/plugin --user=mysql --log-error=/us
|--= 30207 _mysql /usr/local/mysql/bin/mysqld --user=_mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data --plugin-dir=/usr/local/mysql/lib/plugin --log-error=/usr

// Figure out who auto start mysql
$ sudo launchctl list | grep 'mysql'
30102   0   com.mysql.mysqld
30374   1   com.oracle.oss.mysql.mysqld

// Unloads mysql auto start service
$ sudo launchctl unload -w /Library/LaunchDaemons/com.mysql.mysql.plist
$ sudo launchctl unload -w /Library/LaunchDaemons/com.oracle.oss.mysql.mysqld.plist

// Stop mysql service
$ sudo launchctl stop com.mysql.mysqld
$ sudo launchctl stop com.oracle.oss.mysql.mysqld

// Start mysql
$ sudo /usr/local/mysql/support-files/mysql.server start
Starting MySQL
. SUCCESS!
</code></pre></li>
</ol>


<h4>添加VirtualHost，DocumentRoot为/Users/username/Sites/,Error message “Forbidden You don&rsquo;t have permission to access / on this server”</h4>

<p>Solution:
I faced the same issue, but I solved it by setting the options directive either in the global directory setting in the httpd.conf or in the specific directory block in httpd-vhosts.conf:</p>

<p>Options Indexes FollowSymLinks Includes ExecCGI
By default, your global directory settings is (httpd.conf line ~188):</p>

<p><Directory />
     AllowOverride none
     Require all granted
</Directory>
set the options to : Options Indexes FollowSymLinks Includes ExecCGI</p>

<p>Finally, it should look like:</p>

<p><Directory />
     Options Indexes FollowSymLinks Includes ExecCGI
     AllowOverride All
     Require all granted
</Directory>
Also try changing &ldquo;Order deny,allow&rdquo; and &ldquo;Allow from all&rdquo; lines by &ldquo;Require all granted&rdquo;</p>

<p>Reference:<a href="http://stackoverflow.com/questions/10873295/error-message-forbidden-you-dont-have-permission-to-access-on-this-server">http://stackoverflow.com/questions/10873295/error-message-forbidden-you-dont-have-permission-to-access-on-this-server</a></p>

<p>Reference:<a href="http://webdevstudios.com/2013/05/24/how-to-set-up-ssl-with-osx-mountain-lions-built-in-apache/">http://webdevstudios.com/2013/05/24/how-to-set-up-ssl-with-osx-mountain-lions-built-in-apache/</a> <br/>
<a href="http://www.akadia.com/services/ssh_test_certificate.html">http://www.akadia.com/services/ssh_test_certificate.html</a><br/>
<a href="http://charles.lescampeurs.org/2014/04/01/how-to-configure-httpsssl-under-apache-and-osx">http://charles.lescampeurs.org/2014/04/01/how-to-configure-httpsssl-under-apache-and-osx</a><br/>
<a href="http://coolestguidesontheplanet.com/get-apache-mysql-php-and-phpmyadmin-working-on-osx-10-11-el-capitan/">http://coolestguidesontheplanet.com/get-apache-mysql-php-and-phpmyadmin-working-on-osx-10-11-el-capitan/</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Enumerated constants]]></title>
    <link href="http://DamianSheldon.github.io/blog/enumerated-constants.html"/>
    <updated>2015-05-08T16:38:20+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/enumerated-constants</id>
    <content type="html"><![CDATA[<p>Objective-C中的枚举常量大致有以下四种情形：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>// 1. unnamed enumerations
</span><span class='line'>enum {
</span><span class='line'>    NSBorderlessWindowMask      = 0,
</span><span class='line'>    NSTitledWindowMask          = 1 &lt;&lt; 0,
</span><span class='line'>    NSClosableWindowMask        = 1 &lt;&lt; 1,
</span><span class='line'>    NSMiniaturizableWindowMask  = 1 &lt;&lt; 2,
</span><span class='line'>    NSResizableWindowMask       = 1 &lt;&lt; 3
</span><span class='line'> 
</span><span class='line'>};
</span><span class='line'>
</span><span class='line'>`- (void)setStyleMask:(NSUInteger)styleMask`
</span><span class='line'>
</span><span class='line'>// 2 
</span><span class='line'>typedef enum _NSMatrixMode {
</span><span class='line'>    NSRadioModeMatrix           = 0,
</span><span class='line'>    NSHighlightModeMatrix       = 1,
</span><span class='line'>    NSListModeMatrix            = 2,
</span><span class='line'>    NSTrackModeMatrix           = 3
</span><span class='line'>} NSMatrixMode;
</span><span class='line'>
</span><span class='line'>// 3
</span><span class='line'>typedef NS_ENUM(NSInteger, UITableViewCellStyle) {
</span><span class='line'>    UITableViewCellStyleDefault,
</span><span class='line'>    UITableViewCellStyleValue1,
</span><span class='line'>    UITableViewCellStyleValue2,
</span><span class='line'>    UITableViewCellStyleSubtitle
</span><span class='line'>};
</span><span class='line'>
</span><span class='line'>// 4
</span><span class='line'>typedef NS_OPTIONS(NSUInteger, NSLayoutFormatOptions) {
</span><span class='line'>    NSLayoutFormatAlignAllLeft = (1 &lt;&lt; NSLayoutAttributeLeft),
</span><span class='line'>    NSLayoutFormatAlignAllRight = (1 &lt;&lt; NSLayoutAttributeRight),
</span><span class='line'>    NSLayoutFormatAlignAllTop = (1 &lt;&lt; NSLayoutAttributeTop),
</span><span class='line'>    NSLayoutFormatAlignAllBottom = (1 &lt;&lt; NSLayoutAttributeBottom),
</span><span class='line'>    NSLayoutFormatAlignAllLeading = (1 &lt;&lt; NSLayoutAttributeLeading),
</span><span class='line'>    NSLayoutFormatAlignAllTrailing = (1 &lt;&lt; NSLayoutAttributeTrailing),
</span><span class='line'>    NSLayoutFormatAlignAllCenterX = (1 &lt;&lt; NSLayoutAttributeCenterX),
</span><span class='line'>    NSLayoutFormatAlignAllCenterY = (1 &lt;&lt; NSLayoutAttributeCenterY),
</span><span class='line'>    NSLayoutFormatAlignAllBaseline = (1 &lt;&lt; NSLayoutAttributeBaseline),
</span><span class='line'>    NSLayoutFormatAlignAllLastBaseline = NSLayoutFormatAlignAllBaseline,
</span><span class='line'>    NSLayoutFormatAlignAllFirstBaseline NS_ENUM_AVAILABLE_IOS(8_0) = (1 &lt;&lt; NSLayoutAttributeFirstBaseline),
</span><span class='line'>    
</span><span class='line'>    NSLayoutFormatAlignmentMask = 0xFFFF,
</span><span class='line'>    
</span><span class='line'>    /* choose only one of these three
</span><span class='line'>     */
</span><span class='line'>    NSLayoutFormatDirectionLeadingToTrailing = 0 &lt;&lt; 16, // default
</span><span class='line'>    NSLayoutFormatDirectionLeftToRight = 1 &lt;&lt; 16,
</span><span class='line'>    NSLayoutFormatDirectionRightToLeft = 2 &lt;&lt; 16,  
</span><span class='line'>    
</span><span class='line'>    NSLayoutFormatDirectionMask = 0x3 &lt;&lt; 16,  
</span><span class='line'>};
</span></code></pre></td></tr></table></div></figure>


<p>情形一相当于定义了常量，但不定义类型;<br/>
情形二定义了一个NSMatrixMode类型;</p>

<p>情形三定义了一个NSInteger的UITableViewCellStyle类型;<br/>
情形四支持C++的枚举特性。</p>

<blockquote><p>The NS_OPTIONS macro is defined in different ways if compiling as C++ or not. If it’s not C++, it’s expanded out the same as NS_ENUM. However, if it is C++, it’s expanded out slightly differently. Why? The C++ compiler acts differently when two enumeration values are bitwise OR’ed together. This is something, as shown earlier, that is commonly done with the options type of enumeration. When two values are OR’ed together, C++ considers the resulting value to be of the type the enumeration represents: NSUInteger. It also doesn’t allow the implicit cast to the enumeration type.</p></blockquote>

<p>Reference:<br/>
Effective Objective-C 2.0<br/>
<a href="http://nshipster.cn/ns_enum-ns_options/">NS_ENUM &amp; NS_OPTIONS</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Linux Useful Command Line]]></title>
    <link href="http://DamianSheldon.github.io/blog/linux-useful-command-line.html"/>
    <updated>2015-03-18T21:12:56+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/linux-useful-command-line</id>
    <content type="html"><![CDATA[<h3>1.Create new account</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo adduser --home /home/username --shell /bin/bash --ingroup git username</span></code></pre></td></tr></table></div></figure>


<h3>2.List all groups and the user names that were in each group</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>for u in `cut -f1 -d: /etc/passwd`; do echo -n $u:; groups $u; done | sort
</span><span class='line'>
</span><span class='line'>groups $(cut -f1 -d":" /etc/passwd) | sort</span></code></pre></td></tr></table></div></figure>


<h3>3.How to set up ssh so you aren&rsquo;t asked for a password</h3>

<p>You can create a RSA authentication key to be able to log into a remote site from your account, without having to type your password.</p>

<p>Note that once you&rsquo;ve set this up, if an intruder breaks into your account/site, they are given access to the site you are allowed in without a password, too! For this reason, this should never be done from root.</p>

<ul>
<li>Run ssh-keygen(1) on your machine, and just hit enter when asked for a password.
This will generate both a private and a public key. With older SSH versions, they will be stored in ~/.ssh/identity and ~/.ssh/identity.pub; with newer ones, they will be stored in ~/.ssh/id_rsa and ~/.ssh/id_rsa.pub.</li>
<li>Next, add the contents of the public key file into ~/.ssh/authorized_keys on the remote site (the file should be mode 600).
If you are a developer and you want to access debian.org systems with such a key, it&rsquo;s possible to have the developer database propagate your key to all of the debian.org machines. See the LDAP gateway documentation.
You should then be able to use ssh to log in to the remote server without being asked for a password.</li>
</ul>


<p>Reference:<a href="https://www.debian.org/devel/passwordlessssh">https://www.debian.org/devel/passwordlessssh</a></p>

<h3>4.Finding all files containing a text string on Linux</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>grep -rnw 'directory' -e "pattern"</span></code></pre></td></tr></table></div></figure>


<p>Reference: <a href="http://stackoverflow.com/questions/16956810/finding-all-files-containing-a-text-string-on-linux">http://stackoverflow.com/questions/16956810/finding-all-files-containing-a-text-string-on-linux</a></p>

<h3>5.Show bash script commands without executing them</h3>

<p>There are two useful debug outputs for that task (both are written to stderr):</p>

<p>set -v mode (set -o verbose)
prints commands to be executed to stderr just like they are read from input (script file or keyboard)
prints everything before anything ( substitutions and expansions, …) big is applied
set -x mode (set -o xtrace)
prints everything like it really is executed, after substitutions and expansions applied
indicates the depth-level of the subshell (by default by preceeding a + (plus) sign to the shown command)
indicates the recognized words after word splitting by marking them like &lsquo;x y&rsquo;
in a 4.1 version of the shell, this debug output can be printed to a configurable file descriptor (by setting the BASH_XTRACEFD variable) rather than stdout</p>

<p>Hint: These modes can be entered when calling Bash:</p>

<p>from commandline: bash -vx ./myscript
eventually (OS dependant) from shebang: #!/bin/bash -vx</p>

<p>Reference:<a href="http://wiki.bash-hackers.org/scripting/debuggingtips">http://wiki.bash-hackers.org/scripting/debuggingtips</a></p>

<h3>6.Toggle Web Sharing on or off in OSX 10.10</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>// Start
</span><span class='line'>sudo apachectl start
</span><span class='line'>
</span><span class='line'>// Stop
</span><span class='line'>sudo apachectl stop
</span><span class='line'>
</span><span class='line'>// Restart
</span><span class='line'>sudo apachectl restart
</span><span class='line'>
</span><span class='line'>// find the Apache version
</span><span class='line'>httpd -v
</span><span class='line'>
</span><span class='line'>// After starting Apache – test to see if the webserver is working in the browser – http://localhost – you should see the “It Works!” text.
</span></code></pre></td></tr></table></div></figure>


<p>Reference:<a href="http://coolestguidesontheplanet.com/get-apache-mysql-php-phpmyadmin-working-osx-10-10-yosemite/">http://coolestguidesontheplanet.com/get-apache-mysql-php-phpmyadmin-working-osx-10-10-yosemite/</a></p>

<h3>7.List open ports on your machine (Mac OS X)</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo lsof -i -P | grep -i "listen"</span></code></pre></td></tr></table></div></figure>


<p>Reference:<a href="http://juretta.com/log/2007/08/08/list_open_ports_on_your_machine_mac_os_x_/">http://juretta.com/log/2007/08/08/list_open_ports_on_your_machine_mac_os_x_/</a></p>

<h3>8.What do the numbers in a man page mean?</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>MANUAL SECTIONS
</span><span class='line'>    The standard sections of the manual include:
</span><span class='line'>
</span><span class='line'>    1      User Commands
</span><span class='line'>    2      System Calls
</span><span class='line'>    3      C Library Functions
</span><span class='line'>    4      Devices and Special Files
</span><span class='line'>    5      File Formats and Conventions
</span><span class='line'>    6      Games et. Al.
</span><span class='line'>    7      Miscellanea
</span><span class='line'>    8      System Administration tools and Deamons
</span><span class='line'>
</span><span class='line'>    Distributions customize the manual section to their specifics,
</span><span class='line'>    which often include additional sections.</span></code></pre></td></tr></table></div></figure>


<h3>9.jenkins</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Note: When using launchctl the port will be 8080.
</span><span class='line'>
</span><span class='line'>To have launchd start jenkins at login:
</span><span class='line'>  ln -sfv /usr/local/opt/jenkins/*.plist ~/Library/LaunchAgents
</span><span class='line'>Then to load jenkins now:
</span><span class='line'>  launchctl load ~/Library/LaunchAgents/homebrew.mxcl.jenkins.plist
</span><span class='line'>Or, if you don't want/need launchctl, you can just run:
</span><span class='line'>  jenkins</span></code></pre></td></tr></table></div></figure>


<h3>10.Mac 上 Openssl 的配置文件路径</h3>

<p>/System/Library/OpenSSL/openssl.cnf</p>

<h3>11.Find</h3>

<p>find的使用实例：</p>

<p>搜索当前目录（含子目录，以下同）中，所有文件名以my开头的文件:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>　　$ find . -name 'my*'</span></code></pre></td></tr></table></div></figure>


<p>搜索当前目录中，所有文件名以my开头的文件，并显示它们的详细信息:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>　　$ find . -name 'my*' -ls</span></code></pre></td></tr></table></div></figure>


<p>搜索当前目录中，所有过去10分钟中更新过的普通文件。如果不加-type f参数，则搜索普通文件+特殊文件+目录:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>　　$ find . -type f -mmin -10</span></code></pre></td></tr></table></div></figure>


<p>Reference:<a href="http://www.ruanyifeng.com/blog/2009/10/5_ways_to_search_for_files_using_the_terminal.html">http://www.ruanyifeng.com/blog/2009/10/5_ways_to_search_for_files_using_the_terminal.html</a></p>

<h3>12.Enable Debian server pptpd&rsquo;s log and debug</h3>

<p>To diagnose faults, enable the options debug dump in /etc/ppp/pptpd-options. The change is effective on the next connection. The debug output goes to /var/log/debug, and the dump output and usual output to /var/log/messages.</p>

<p>Referenc:<a href="http://poptop.sourceforge.net/dox/debian-howto.phtml">http://poptop.sourceforge.net/dox/debian-howto.phtml</a></p>

<h3>13.iptables remove specific rules</h3>

<p>Execute the same commands but replace the &ldquo;-A&rdquo; with &ldquo;-D&rdquo;. For example:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ iptables -A INPUT -i eth0 -p tcp --dport 443 -j ACCEPT
</span><span class='line'>becomes
</span><span class='line'>
</span><span class='line'>$ iptables -D INPUT -i eth0 -p tcp --dport 443 -j ACCEPT</span></code></pre></td></tr></table></div></figure>


<h3>14.How to use tcpdump?</h3>

<p>tcpdump can be used to capture the packets exchanged between the PPTP Client and the PPTP Server. By comparing the packets with what should be happening, you may determine what the cause of a problem might be.
Give to tcpdump the name of the network interface that connects to the PPTP Server, which for dial-up users would be ppp0, and for ADSL users eth0. Then, in another window or console, start the tunnel.</p>

<p>Start tcpdump in one window:    Then run pppd in the other window:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># tcpdump -i eth0
</span><span class='line'># pppd call tunnel</span></code></pre></td></tr></table></div></figure>


<p>The tcpdump command should show you the packets as they are received or transmitted. Press Control/C when you do not need to capture any more packets.</p>

<p>You should see a connection to port 1723, followed by GRE packets in both directions. If you can see this, then you have full network connectivity. If you can&rsquo;t, you must find the problem.</p>

<p>Note: if you get an error:</p>

<p>tcpdump: pcap_loop: read: Network is down
then you may be using tcpdump on the wrong interface. Use ifconfig to list the available interfaces and choose the one through which your client must contact the server. See our diagrams if you&rsquo;re still confused.</p>

<p>The above technique is useful for quick checking, but for detailed analysis a binary tcpdump is required.</p>

<p>Security Warning
Internet addresses of your client and server, usernames and passwords are included in a binary tcpdump. This information may allow someone to gain equivalent access to protected networks. If you do not want to give away this information, convert it to text and remove it before sending the log to someone else.
If you have been asked to capture a complete tcpdump packet trace, for analysis by someone else, you should:</p>

<p>add -w file to tell it to save the packets to the file file,
add -s 0 to capture all of each packet,
and add tcp port 1723 or proto 47 to keep only the PPTP packets, if the client is performing other network traffic at the time.
For example:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># tcpdump -i eth0 -w my.tcpdump -s 0 tcp port 1723 or proto 47
</span></code></pre></td></tr></table></div></figure>


<p>Again, once the packets have been collected, use Control/C to stop the tcpdump process. The file containing the packets can then be e-mailed or analysed.</p>

<p>You may analyse it using ethereal.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># ethereal my.tcpdump</span></code></pre></td></tr></table></div></figure>


<p>Note: when using ethereal, clicking on a byte in the hex dump will highlight the field name of the data in the packet, and vice versa. You may also analyse it using tcpdump:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># tcpdump -n -r my.tcpdump &gt; my.tcpdump.txt</span></code></pre></td></tr></table></div></figure>


<p>This converts it to text, saving the output into a file my.tcpdump.txt. This often hides the username and password. You may wish to globally substitute the IP addresses. Check your results to ensure your security.</p>

<h3>15.Viewing all iptables rules</h3>

<p>You just need to specify the appropriate table:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ iptables --table nat --list
</span><span class='line'>$ iptables -t nat -L</span></code></pre></td></tr></table></div></figure>


<p>If you don&rsquo;t specify a table, the filter table is used as the default. You can get even more information by including the -v or &ndash;verbose option.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS Thread笔记]]></title>
    <link href="http://DamianSheldon.github.io/blog/nsthread-thechnology-notes.html"/>
    <updated>2015-03-16T16:27:17+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/nsthread-thechnology-notes</id>
    <content type="html"><![CDATA[<ol>
<li>Thread是什么？</li>
<li>iOS中怎么使用Thread？</li>
</ol>


<h3>Thread是什么</h3>

<blockquote><p>Threads are a relatively lightweight way to implement multiple paths of execution inside of an application. At the system level, programs run side by side, with the system doling out execution time to each program based on its needs and the needs of other programs. Inside each program, however, exists one or more threads of execution, which can be used to perform different tasks simultaneously or in a nearly simultaneous manner. The system itself actually manages these threads of execution, scheduling them to run on the available cores and preemptively interrupting them as needed to allow other threads to run.</p>

<p>From a technical standpoint, a thread is a combination of the kernel-level and application-level data structures needed to manage the execution of code. The kernel-level structures coordinate the dispatching of events to the thread and the preemptive scheduling of the thread on one of the available cores. The application-level structures include the call stack for storing function calls and the structures the application needs to manage and manipulate the thread’s attributes and state.</p></blockquote>

<h3>iOS中怎么使用Thread</h3>

<p>iOS中的Thread技术主要有以下两种：</p>

<table>
<thead>
<tr>
<th> Technology </th>
<th> Description </th>
</tr>
</thead>
<tbody>
<tr>
<td> Cocoa threads </td>
<td> Cocoa implements threads using the NSThread class. Cocoa also provides methods on NSObject for spawning new threads and executing code on already-running threads.</td>
</tr>
<tr>
<td> POSIX threads </td>
<td> POSIX threads provide a C-based interface for creating threads. If you are not writing a Cocoa application, this is the best choice for creating threads. The POSIX interface is relatively simple to use and offers ample flexibility for configuring your threads.</td>
</tr>
</tbody>
</table>


<h4>Creating a Thread</h4>

<ol>
<li><p>Using NSThread</p>

<ul>
<li>Use the detachNewThreadSelector:toTarget:withObject: class method to spawn the new thread.</li>
<li>Create a new NSThread object and call its start method. (Supported only in iOS and OS X v10.5 and later.)</li>
</ul>
</li>
<li><p>Using POSIX Threads</p>

<ul>
<li>OS X and iOS provide C-based support for creating threads using the POSIX thread API. This technology can actually be used in any type of application (including Cocoa and Cocoa Touch applications) and might be more convenient if you are writing your software for multiple platforms. The POSIX routine you use to create threads is called, appropriately enough, pthread_create.</li>
</ul>
</li>
<li><p>Using NSObject to Spawn a Thread</p>

<ul>
<li>In iOS and OS X v10.5 and later, all objects have the ability to spawn a new thread and use it to execute one of their methods. The performSelectorInBackground:withObject: method creates a new detached thread and uses the specified method as the entry point for the new thread.</li>
</ul>
</li>
</ol>


<h4>Configuring Thread Attributes</h4>

<p>Thread的配置项有：</p>

<ul>
<li>Stack Size of a Thread</li>
<li>Thread-Local Storage</li>
<li>Detached State of a Thread</li>
<li>Thread Priority</li>
</ul>


<h4>Writing Your Thread Entry Routine</h4>

<p>编写Thread的入口程序通常需要做如下事项：</p>

<ul>
<li>Creating an Autorelease Pool</li>
<li>Setting Up an Exception Handler</li>
<li>Setting Up a Run Loop</li>
</ul>


<h4>Terminating a Thread</h4>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS App 开发问题汇总（二）]]></title>
    <link href="http://DamianSheldon.github.io/blog/ios-app-problems-part-2.html"/>
    <updated>2015-03-16T16:14:50+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/ios-app-problems-part-2</id>
    <content type="html"><![CDATA[<h3>问题描述：Ad Hoc分发应用</h3>

<p>导出Ad Hoc授权应用
Xcode > Product > Archive > Export</p>

<p>安装Ad Hoc分发的应用
Open iTunes > File > Add To Library&hellip; > select Ad Hoc provisioning profile and App.ipa > Sync</p>

<h3>问题描述：Xcode编译出现如下警告提示：</h3>

<p>[WARN]warning: no rule to process file xxx.h’ of type sourcecode.c.h for architecture armv7</p>

<p>解决办法:这是因为检查到有.h文件在编译列表中了。所以只要在列表中去掉就可以了。</p>

<p>点击你的xcode项目文件，然后点击[Build Phases]，确保在[Compile Sources]中没有.h文件。</p>

<p>Reference:<a href="http://hearrain.com/2014/01/774">http://hearrain.com/2014/01/774</a></p>

<h3>问题描述：iPhone每次连接Mac都会弹出iPhoto</h3>

<p>解决办法：</p>

<ol>
<li>Plug in your iPad/iPhone</li>
<li>Open Image Capture</li>
<li>Select your device (&ldquo;devMikePad&rdquo;)</li>
<li>Press the triangle in square symbol in the lower left corner.</li>
<li>Select &ldquo;No application&rdquo; in the menu.</li>
</ol>


<p>iPhoto:
Preferences > General > &ldquo;Connecting Camera Opens &hellip;&rdquo;
set it to &ldquo;No Application&rdquo;</p>

<!--more-->


<h3>问题描述:ld: warning: directory not found for option &lsquo;-L/Users/dongmeiliang/Documents/soh.client.iOS/sohiOSApp/sohiOSApp/Component/BaiduMap_IOSSDK_v2-2/Release-iphonesimulator&rsquo;</h3>

<p>Undefined symbols for architecture x86_64:
  &ldquo;<em>DDExtractFileNameWithoutExtension&rdquo;, referenced from:
      </em><em><em>57-[AJSocketBinaryClientChannel setupReadTimerWithTimeout:]</em>block_invoke76 in libPods-sohiOSApp-AJFrame.iOS.a(AJSocketBinaryClientChannel.o)
      -[AJSocketBinaryClientChannel doReadTimeout] in libPods-sohiOSApp-AJFrame.iOS.a(AJSocketBinaryClientChannel.o)
      -[AJSocketBinaryClientChannel endCurrentRead] in libPods-sohiOSApp-AJFrame.iOS.a(AJSocketBinaryClientChannel.o)
  &ldquo;</em>OBJC_CLASS<em>$</em>DDLog&rdquo;, referenced from:
      objc-class-ref in libPods-sohiOSApp-AJFrame.iOS.a(AJSocketBinaryClientChannel.o)
  &ldquo;<em>OBJC_CLASS</em>$_GCDAsyncSocket&rdquo;, referenced from:
      objc-class-ref in libPods-sohiOSApp-AJFrame.iOS.a(AJTcpConnector.o)
ld: symbol(s) not found for architecture x86_64</p>

<p>解决办法：从输出的日志可以看出问题是出在链接，由Cocoapods管理的第三方库安装后链接配置项没有设置正确，需要手动设置没有被自动链接的库，例如这里我需要链接：-l"Pods-CocoaAsyncSocket"。</p>

<h3>问题描述:dyld: could not load inserted library &lsquo;/usr/lib/libgmalloc.dylib&rsquo; because image not found</h3>

<p>解决办法：Edit Scheme > Run > Diagnostics > Memory Managerment</p>

<p>Malloc uncheck Enable Scribble<br/>
        uncheck Enable Guard Edges<br/>
        uncheck Enable Guard Malloc</p>

<p>Reference:<a href="http://blog.csdn.net/chocolateloveme/article/details/18258443">http://blog.csdn.net/chocolateloveme/article/details/18258443</a></p>

<h3>问题描述：APNs服务器地址</h3>

<p>答案：
gateway.push.apple.com 2195 (Product)<br/>
gateway.sandbox.push.apple.com 2195 (Development)</p>

<h3>问题描述：/Users/user/XCodeWork/iPhoneDev/MyAppSourceFolder/en.lproj/MainWindow-iPhone.xib:</h3>

<p>  Compilation failed. Unable to write to path:      <br/>
  /Users/user/Library/Developer/Xcode/DerivedData/MYAPPNAME-
  dudnhxzgpqtcnqcgaguirvkhmvco/Build/Intermediates/ArchiveIntermediates/
  MYAPPNAME/InstallationBuildProductsLocation/Applications/MyAppname.app/
  en.lproj/MainWindow-iPhone.nib</p>

<p>解决办法：For every xib&rsquo;s that we&rsquo;ve problems, in the right panel go to the first tab, &ldquo;Interface Builder Document&rdquo; -> &ldquo;Builds for&rdquo; and select &ldquo;iOS 7.0 and Later&rdquo;. My old configuration was &ldquo;iOS 4.3 and Later&rdquo;.</p>

<p>Reference:<a href="http://stackoverflow.com/questions/19688276/interface-builder-xib-error-unable-to-write-to-path">http://stackoverflow.com/questions/19688276/interface-builder-xib-error-unable-to-write-to-path</a></p>

<h3>问题描述:duplicate symbol <em>OBJC_METACLASS</em>$_SDWebImagePrefetcher in:</h3>

<pre><code>/Users/dongmeiliang/Library/Developer/Xcode/DerivedData/jiaxiaotong-dxrmnnwbexugoqfekesgvdiijcdm/Build/Products/Debug-iphonesimulator/libPods-weima-SDWebImage.a(SDWebImagePrefetcher.o)
/Users/dongmeiliang/Library/Developer/Xcode/DerivedData/jiaxiaotong-dxrmnnwbexugoqfekesgvdiijcdm/Build/Products/Debug-iphonesimulator/libPods-SDWebImage.a(SDWebImagePrefetcher.o)
</code></pre>

<p>ld: 727 duplicate symbols for architecture x86_64</p>

<p>解决办法：问题出现的原因是我用CocoaPods管理第三方库，在Build Settings > Linking > Other Linker Flags 里面即显示指定了-l"Pods-SDWebImagePrefetcher",又设置了变量$(inherited)。我去掉$(inherited)就好。</p>

<h3>问题描述:2015-04-05 22:35:26.917 weima[67059:2338954] NSScanner: nil string argument</h3>

<p>2015-04-05 22:35:26.917 weima[67059:2338954] NSScanner: nil string argument
libc++abi.dylib: terminate_handler unexpectedly threw an exception</p>

<h3>Cannot send push notifications using Javapns/Javaapns SSL handshake failure</h3>

<p>解决办法：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>developer_identity.cer &lt;= download from Apple (aps cert)
</span><span class='line'>mykey.p12 &lt;= Your private key (CSR generate private key or install aps cert get a private key both ok)
</span><span class='line'>
</span><span class='line'>openssl x509 -in developer_identity.cer -inform DER -out developer_identity.pem -outform PEM
</span><span class='line'>openssl pkcs12 -nocerts -in mykey.p12 -out mykey.pem
</span><span class='line'>openssl pkcs12 -export -inkey mykey.pem -in developer_identity.pem -out iphone_dev.p12</span></code></pre></td></tr></table></div></figure>


<p>Reference:<a href="http://stackoverflow.com/questions/12585858/cannot-send-push-notifications-using-javapns-javaapns-ssl-handshake-failure">http://stackoverflow.com/questions/12585858/cannot-send-push-notifications-using-javapns-javaapns-ssl-handshake-failure</a></p>

<h3>导航栏如何显示两行文本？</h3>

<p>解决办法：After setting up your titleView or titleLabel, call sizeToFit on it, also make sure titleLabel.textAlignment = UITextAlignmentCenter. It&rsquo;ll be centered in the width of the navbar rather than in the space between the button edge and far edge of navbar.</p>

<p>Reference <a href="http://stackoverflow.com/questions/3681990/adjusting-navigationitem-titleviews-frame">http://stackoverflow.com/questions/3681990/adjusting-navigationitem-titleviews-frame</a></p>

<h3>SVN how to resolve “local unversioned, incoming add upon update”</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ svn status
</span><span class='line'>D     C logs
</span><span class='line'>      &gt;   local unversioned, incoming add upon update
</span><span class='line'>Summary of conflicts:
</span><span class='line'>  Tree conflicts: 1</span></code></pre></td></tr></table></div></figure>


<p>解决办法:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ svn resolve --accept working logs
</span><span class='line'>Resolved conflicted state of 'logs'
</span><span class='line'>$ svn revert logs
</span><span class='line'>Reverted 'logs'
</span><span class='line'>$ svn status</span></code></pre></td></tr></table></div></figure>


<p>Reference <a href="http://tomhennigan.blogspot.com/2012/01/resolve-tree-conflict-svn-local.html">http://tomhennigan.blogspot.com/2012/01/resolve-tree-conflict-svn-local.html</a></p>

<h3>问题描述：Calling a C function from within a function in a .mm file</h3>

<p>解决办法：The .mm file is looking to call a mangled version of the function name. You need either <strong>BEGIN_DECLS and </strong>END_DECLS around the C function declarations seen by the C++-compiled file, or you need to do the equivalent yourself. The idea is to mark those function declarations as extern &ldquo;C&rdquo; when seen by an (Obj-)C++ compiler, but not when seen by any other sort of compiler.</p>

<p>Referenc: <a href="http://stackoverflow.com/questions/4984523/calling-a-c-function-from-within-a-function-in-a-mm-file">http://stackoverflow.com/questions/4984523/calling-a-c-function-from-within-a-function-in-a-mm-file</a></p>

<h3>问题描述：Compilation failed. Unable to write to path</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Underlying Errors:
</span><span class='line'>    Description: The file “objects.nib” doesn’t exist.
</span><span class='line'>    Failure Reason: The file doesn’t exist.
</span><span class='line'>    Underlying Errors:
</span><span class='line'>        Description: The operation couldn’t be completed. No such file or directory
</span><span class='line'>        Failure Reason: No such file or directory
</span><span class='line'>    Description: “DMLUserElementCell~iphone.nib” couldn’t be removed.
</span><span class='line'>    Failure Reason: The file doesn’t exist.
</span><span class='line'>    Underlying Errors:
</span><span class='line'>        Description: The operation couldn’t be completed. No such file or directory
</span><span class='line'>        Failure Reason: No such file or directory</span></code></pre></td></tr></table></div></figure>


<p>解决办法：在Target > Build Phases > Compile Sources里去掉出错的nib文件。</p>

<p>Reference:<a href="http://stackoverflow.com/questions/20570340/xcode-5-storyboard-compile-failure">http://stackoverflow.com/questions/20570340/xcode-5-storyboard-compile-failure</a></p>

<h3>问题描述：Where iPhoto Pictures are Located and How to Access the iPhoto Library and Picture Files</h3>

<p>解决办法：iPhoto 11 (9.0) Photo Library Storage Location:~/Pictures/iPhoto Library.photolibrary/Masters/</p>

<p>Reference:<a href="http://osxdaily.com/2011/08/30/where-iphoto-pictures-are-located/">http://osxdaily.com/2011/08/30/where-iphoto-pictures-are-located/</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[如何创建私有的Pod]]></title>
    <link href="http://DamianSheldon.github.io/blog/private-pods.html"/>
    <updated>2015-03-11T17:23:04+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/private-pods</id>
    <content type="html"><![CDATA[<p>公司的框架代码大多数时候是需要保密的，而手动的复制导入比较麻烦，这时候我们可以创建私有 Pod 来方便我们的日常开发工作，本文是我创建私有 Pod 的笔记。</p>

<p>Cocoapods 提供了 pod lib create [pod name] 来创建私有库工程，但是有个 embedded dylibs/frameworks are only supported on iOS 8.0 and later 的问题。 意思是只有部署 iOS 8 以上的应用才能使用它，所以要支持 iOS 8 以下的应用的 Pod 我们还是得手动创建，详细步骤如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ mkdir AJFrame
</span><span class='line'>
</span><span class='line'>// Create static library
</span><span class='line'>Xcode &gt; File &gt; New &gt; Project... &gt; Framework & Library &gt; Cocoa Touch Static Libray 
</span><span class='line'>
</span><span class='line'>// Create dev app
</span><span class='line'>Xcode &gt; File &gt; New &gt; Project... &gt; Single View Application
</span><span class='line'>
</span><span class='line'>// Result 
</span><span class='line'>AJFrame
</span><span class='line'>├── AJFrame
</span><span class='line'>│   ├── AJFrame.xcodeproj
</span><span class='line'>│   ├── AJFrameTests
</span><span class='line'>│   ├── Classes
</span><span class='line'>├── AJFrame.podspec
</span><span class='line'>├── AJFrameDevApp
</span><span class='line'>│   ├── AJFrameDevApp
</span><span class='line'>│   ├── AJFrameDevApp.xcodeproj
</span><span class='line'>│   ├── AJFrameDevApp.xcworkspace
</span><span class='line'>│   ├── AJFrameDevAppTests
</span><span class='line'>│   ├── Podfile
</span><span class='line'>│   ├── Podfile.lock
</span><span class='line'>│   └── Pods
</span><span class='line'>└── LICENSE</span></code></pre></td></tr></table></div></figure>


<!-- more -->


<p>Cocoapods 工作依赖于两个文件：</p>

<ol>
<li>podspec:一个pod的配置是什么，pod的代码放在哪里</li>
<li>Podfile:项目依赖哪个pod，以何种方式依赖，它的podspec放在哪里</li>
</ol>


<h3>创建podspec文件</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>pod spec create [NAME|https://github.com/USER/REPO] --verbose</span></code></pre></td></tr></table></div></figure>


<!--more-->


<p>然后编辑podspecs文件，具体可以参考它的<a href="https://guides.cocoapods.org/syntax/podspec.html">详细语法</a>，这里有几个地方需要注意：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>// s.source指定工程的源码地址,这里路径有些怪异是因为我的git server是布署在Windows上的。
</span><span class='line'>s.source  = { :git =&gt; "ssh://dongmeiliang@192.168.1.100:/git/ICW/Git/AJFrame.git", :tag =&gt; s.version.to_s }
</span><span class='line'>
</span><span class='line'>// s.source_files指定哪些源文件需要包含在pod中
</span><span class='line'>s.source_files  = "AJFrame/classes/*.{h,m}"
</span><span class='line'>
</span><span class='line'>// pod的依赖
</span><span class='line'>s.dependency "JSONKit", "~&gt; 1.4"
</span></code></pre></td></tr></table></div></figure>


<p>可以使用命令 <code>pod lib lint --verbose</code> 来验证 podspecs 文件。</p>

<h3>开发静态库</h3>

<p>编辑辅助开发静态库应用工程的 Podfile，具体可以参考它的<a href="https://guides.cocoapods.org/syntax/podfile.html">详细语法</a> ,让它使用安装链接静态库.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>target 'AJFrameDevApp' do
</span><span class='line'>    pod 'AJFrame', :path =&gt; '../'
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'>$ cd ~/Documents/AJFrame/AJFrameDevApp/
</span><span class='line'>$ pod install --no-repo-update --verbose</span></code></pre></td></tr></table></div></figure>


<h3>测试</h3>

<p>开发完成以后，可以创建一个测试工程来测试私有 Pod 是否能正常工作，具体而言,通常是在创建一个远程仓库，把私有 Pod 的代码推送上去，然后创建一个新的工程，让它安装这个私有 Pod ，然后写些测试代码，测试它能否正常工作。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>// Remote 
</span><span class='line'>$ cd /Git
</span><span class='line'>$ git init --bare AJFrame.git
</span><span class='line'>
</span><span class='line'>// Local
</span><span class='line'>$ cd ~/Documents/AJFrame
</span><span class='line'>$ git init 
</span><span class='line'>$ git add .
</span><span class='line'>$ git commit
</span><span class='line'>$ git tag &lt;tagname&gt;
</span><span class='line'>$ git remote add origin &lt;url&gt;
</span><span class='line'>$ git push -u origin master --tags --verbose
</span><span class='line'>
</span><span class='line'>// Edit dependency project's Podfile, add a similary line
</span><span class='line'>pod 'AJFrame', :git =&gt; 'ssh://192.168.1.100:/git/ICW/Git/AJFrame.git', :tag =&gt; '2.0.0'
</span><span class='line'>$ pod install --no-repo-update --verbose
</span><span class='line'>$ write code and test</span></code></pre></td></tr></table></div></figure>


<h3>发布</h3>

<p>发布是可选的，但是当我们有其他的 Pod 想依赖开发的这个私有 Pod 时就变成必须的，所以我们还是得会发布一个私有 Pod。具体步骤如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>// Create a Private Spec Repo  
</span><span class='line'>$ cd /Git  
</span><span class='line'>$ git init --bare Specs.git
</span><span class='line'>
</span><span class='line'>// Add your Private Repo to your CocoaPods installation
</span><span class='line'>$ pod repo add aijian-specs ssh://192.168.1.105:/git/ICW/Git/Specs.git --verbose
</span><span class='line'>
</span><span class='line'>// Check your installation is successful and ready to go
</span><span class='line'>$ cd ~/.cocoapods/repos/aijian-specs
</span><span class='line'>$ pod repo lint .
</span><span class='line'>
</span><span class='line'>// Add your Podspec to your repo
</span><span class='line'>pod repo push aijian-specs AJFrame.podspec
</span></code></pre></td></tr></table></div></figure>


<p>在工程中使用它时，编辑 Podfile， 加入如下内容：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>source ssh://192.168.1.105:/git/ICW/Git/Specs.git
</span><span class='line'>
</span><span class='line'>pod 'AJFrame', '~&gt; 2.0.0' </span></code></pre></td></tr></table></div></figure>


<h3>定期更新 master repo</h3>

<p>使用过 pod 的同学应该都知道如果在安装的时候去更新 master repo 的话安装过程比较久，那我们能不能定时去预先更新 master repo 呢？当然可以。我们可以写个更新脚本让 launchd 定时去执行，详细步骤如下：</p>

<ol>
<li>编写更新 master repo 脚本

<ul>
<li>脚本我放在 /usr/local/bin</li>
<li>chmod a+x update-pod-repo</li>
</ul>
</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#!/bin/bash
</span><span class='line'># This script used for update pod repo!
</span><span class='line'># View log with command: syslog -C
</span><span class='line'># Reference:http://stackoverflow.com/questions/16818427/write-to-mac-os-x-console-logs-from-shell-script-or-command-line
</span><span class='line'>
</span><span class='line'>syslog -s -k Facility com.apple.console \
</span><span class='line'>             Level Error \
</span><span class='line'>             Sender update-pod-repo \
</span><span class='line'>             Message "Starting update master pod repo..."
</span><span class='line'>
</span><span class='line'>pod repo update master
</span><span class='line'>
</span><span class='line'>syslog -s -k Facility com.apple.console \
</span><span class='line'>             Level Error \
</span><span class='line'>             Sender update-pod-repo\
</span><span class='line'>             Message "Ending update master pod repo."</span></code></pre></td></tr></table></div></figure>


<ol>
<li>定时执行脚本<br/>
Mac 下推荐的定时执行脚本的方法是 launchd，所以这里我们使用 launchd 来定时执行我们的脚本。</li>
<li>编写 launchd.plist</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
</span><span class='line'>&lt;!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;
</span><span class='line'>&lt;plist version="1.0"&gt;
</span><span class='line'>        &lt;dict&gt;
</span><span class='line'>                &lt;key&gt;Label&lt;/key&gt;
</span><span class='line'>                &lt;string&gt;com.dongmeiliang.update-pod-repo&lt;/string&gt;
</span><span class='line'>                &lt;key&gt;Program&lt;/key&gt;
</span><span class='line'>                &lt;string&gt;/usr/local/bin/update-pod-repo&lt;/string&gt;
</span><span class='line'>                &lt;key&gt;StartCalendarInterval&lt;/key&gt;
</span><span class='line'>                &lt;array&gt;
</span><span class='line'>                        &lt;dict&gt;
</span><span class='line'>                                &lt;key&gt;Minute&lt;/key&gt;
</span><span class='line'>                                &lt;integer&gt;10&lt;/integer&gt;
</span><span class='line'>                        &lt;/dict&gt;
</span><span class='line'>                        &lt;dict&gt;
</span><span class='line'>                                &lt;key&gt;Hour&lt;/key&gt;
</span><span class='line'>                                &lt;integer&gt;12&lt;/integer&gt;
</span><span class='line'>                        &lt;/dict&gt;
</span><span class='line'>                &lt;/array&gt;
</span><span class='line'>        &lt;/dict&gt;
</span><span class='line'>&lt;/plist&gt;</span></code></pre></td></tr></table></div></figure>


<ul>
<li>检查 plist 文件语法是否正确</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ plutil -lint ~/Library/LaunchAgents/com.dongmeiliang.update-pod-repo.plist</span></code></pre></td></tr></table></div></figure>


<ul>
<li>加载 plist 文件，以便无需重启机器就能定时执行我们的脚本</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ launchctl load -w ~/Library/LaunchAgents/com.dongmeiliang.update-pod-repo.plist
</span><span class='line'>// Check plist has been install successfully
</span><span class='line'>$ launchctl list | grep 'com.dongmeiliang.update-pod-repo'</span></code></pre></td></tr></table></div></figure>


<h3>s.dependency 如何依赖私有 Pod？</h3>

<ol>
<li>Create a Private Spec Repo</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cd /opt/git  
</span><span class='line'>$ mkdir Specs.git  
</span><span class='line'>$ cd Specs.git
</span><span class='line'>$ git init --bare</span></code></pre></td></tr></table></div></figure>


<ol>
<li>Add your Private Repo to your CocoaPods installation</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ pod repo add artsy-specs git@github:artsy/Specs.git
</span><span class='line'>
</span><span class='line'>$ pod repo add aijian-specs ssh://192.168.1.105:/git/ICW/Git/Specs.git --verbose</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>Check your installation is successful and ready to go:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cd ~/.cocoapods/repos/artsy-specs
</span><span class='line'>$ pod repo lint .</span></code></pre></td></tr></table></div></figure>


<ol>
<li>Add your Podspec to your repo</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>pod repo push artsy-specs ~/Desktop/Artsy+OSSUIFonts.podspec</span></code></pre></td></tr></table></div></figure>


<p>Your private Pod is ready to be used in a Podfile. You can use the spec repository with the source directive in your Podfile as shown in the following example:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>source 'URL_TO_REPOSITORY'</span></code></pre></td></tr></table></div></figure>


<p><a href="http://stackoverflow.com/questions/25759170/how-to-add-a-private-cocoapod-as-a-dependency-in-another-pod-podspec-file">Solution Reference</a></p>

<h3>Reference</h3>

<p><a href="http://guides.cocoapods.org/making/using-pod-lib-create">Using Pod Lib Create</a><br/>
<a href="http://guides.cocoapods.org/using/the-podfile.html">The Podfile</a><br/>
<a href="http://www.iwangke.me/2013/04/18/advanced-cocoapods/">CocoaPods进阶：本地包管理</a><br/>
<a href="http://blog.devtang.com/blog/2014/05/25/use-cocoapod-to-manage-ios-lib-dependency/">用CocoaPods做iOS程序的依赖管理</a><br/>
<a href="http://studentdeng.github.io/blog/2013/09/13/cocoapods-tutorial/">Cocoapods 入门</a><br/>
<a href="http://www.splinter.com.au/using-launchd-to-run-a-script-every-5-mins-on/">Using Launchd to run a script every 5 mins on a Mac</a></p>
]]></content>
  </entry>
  
</feed>
