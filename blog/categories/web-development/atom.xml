<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: web development | Hello World]]></title>
  <link href="http://DamianSheldon.github.io/blog/categories/web-development/atom.xml" rel="self"/>
  <link href="http://DamianSheldon.github.io/"/>
  <updated>2018-04-23T10:34:15+08:00</updated>
  <id>http://DamianSheldon.github.io/</id>
  <author>
    <name><![CDATA[Sheldon]]></name>
    <email><![CDATA[dongmeilianghy@sina.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Web 开发问题汇总(三)]]></title>
    <link href="http://DamianSheldon.github.io/blog/web-development-notes-part-three.html"/>
    <updated>2018-04-13T11:07:25+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/web-development-notes-part-three</id>
    <content type="html"><![CDATA[<h3>1.How to send email in java?</h3>

<p>A:</p>

<pre><code class="java">import java.util.*;
import javax.mail.*;
import javax.mail.internet.*;
import javax.activation.*;

public class SendEmail {

   public static void main(String [] args) {    
      // Recipient's email ID needs to be mentioned.
      String to = "abcd@gmail.com";

      // Sender's email ID needs to be mentioned
      String from = "web@gmail.com";

      // Assuming you are sending email from localhost
      String host = "localhost";

      // Get system properties
      Properties properties = System.getProperties();

      // Setup mail server
      properties.setProperty("mail.smtp.host", host);

      // Get the default Session object.
      Session session = Session.getDefaultInstance(properties);

      try {
         // Create a default MimeMessage object.
         MimeMessage message = new MimeMessage(session);

         // Set From: header field of the header.
         message.setFrom(new InternetAddress(from));

         // Set To: header field of the header.
         message.addRecipient(Message.RecipientType.TO, new InternetAddress(to));

         // Set Subject: header field
         message.setSubject("This is the Subject Line!");

         // Now set the actual message
         message.setText("This is actual message");

         // Send message
         Transport.send(message);
         System.out.println("Sent message successfully....");
      } catch (MessagingException mex) {
         mex.printStackTrace();
      }
   }
}
</code></pre>

<p>Reference:<a href="http://www.tutorialspoint.com/java/java_sending_email.htm">Java - Sending Email</a><br/>
<a href="https://stackoverflow.com/questions/3649014/send-email-using-java">Send email using java</a></p>

<!--more-->


<h3>2.Eclipse error: &lsquo;Failed to create the Java Virtual Machine&rsquo;</h3>

<p>A:安装了 Eclipse 提示的升级后再重新打开时，出现上面的报错。Google 一圈后显示可能是 eclipse.ini 的锅，正好我安装了 cpp, java 和 jee 三个版本，尝试打开 java 版本的，正常打开，于是对比它们的 eclipse.ini 文件:</p>

<pre><code>$ cp ~/eclipse/jee-oxygen/Eclipse.app/Contents/Eclipse/eclipse.ini  ~/eclipse-workspace/jee-eclipse.ini
cp ~/eclipse/java-oxygen/Eclipse.app/Contents/Eclipse/eclipse.ini ~/eclipse-workspace/java-eclipse.ini

$ diff eclipse-workspace/jee-eclipse.ini eclipse-workspace/java-eclipse.ini
3,4d2
&lt; --launcher.library
&lt; /Users/dongmeiliang/.p2/pool/plugins/org.eclipse.equinox.launcher.cocoa.macosx.x86_64_1.1.551.v20171108-1834
6a5,6
&gt; --launcher.library
&gt; /Users/dongmeiliang/.p2/pool/plugins/org.eclipse.equinox.launcher.cocoa.macosx.x86_64_1.1.551.v20171108-1834
8c8
&lt; org.eclipse.epp.package.jee.product
---
&gt; org.eclipse.epp.package.java.product
18,23d17
&lt; -javaagent:/Users/dongmeiliang/.p2/pool/plugins/com.zeroturnaround.eclipse.optimizer.plugin_1.0.11/agent/eclipse-optimizer-agent.jar
&lt; -server
&lt; -XX:PermSize=256m
&lt; -XX:MaxPermSize=256m
&lt; -XX:+UseParallelGC
&lt; -Xverify:none
32c26
&lt; -Xms512m
---
&gt; -Xms256m
</code></pre>

<p>总共有五处不同，细看之后发现只有两处可能会产生影响，先尝试将 <code>-Xms512m</code> 改成 <code>-Xms256m</code>，问题仍然存在，将文件恢复原样，再尝试将</p>

<pre><code>&lt; -javaagent:/Users/dongmeiliang/.p2/pool/plugins/com.zeroturnaround.eclipse.optimizer.plugin_1.0.11/agent/eclipse-optimizer-agent.jar
&lt; -server
&lt; -XX:PermSize=256m
&lt; -XX:MaxPermSize=256m
&lt; -XX:+UseParallelGC
&lt; -Xverify:none
</code></pre>

<p>删除，问题顺利解决。</p>

<p>Reference:<a href="https://stackoverflow.com/questions/7302604/eclipse-error-failed-to-create-the-java-virtual-machine">Eclipse error: &lsquo;Failed to create the Java Virtual Machine&rsquo;</a></p>

<h3>3.<code>Warning: mysqli::__construct(): (HY000/2002): No such file or directory in /code/index.php on line 8 Connection failed: No such file or directory</code></h3>

<p>A:问题出现的原因：
当主机填写为localhost时MySQL会采用 unix domain socket连接，当主机填写为127.0.0.1时MySQL会采用TCP/IP的方式连接。使用Unix socket的连接比TCP/IP的连接更加快速与安全。这是MySQL连接的特性，可以参考官方文档的说明<a href="https://dev.mysql.com/doc/refman/5.6/en/connecting.html#id471316">4.2.2. Connecting to the MySQL Server</a>:</p>

<blockquote><p>On Unix, MySQL programs treat the host name localhost specially, in a way that is
likely different from what you expect compared to other network-based programs.
For connections to localhost, MySQL programs attempt to connect to the local server
by using a Unix socket file. This occurs even if a &ndash;port or -P option is given to
specify a port number. To ensure that the client makes a TCP/IP connection to the
local server, use &ndash;host or -h to specify a host name value of 127.0.0.1, or the IP
address or name of the local server. You can also specify the connection protocol
explicitly, even for localhost, by using the &ndash;protocol=TCP option.</p></blockquote>

<p>这个问题有以下几种解决方法：</p>

<ol>
<li>使用TCP/IP代替Unix socket。即在连接的时候将localhost换成127.0.0.1。</li>
<li>修改MySQL的配置文件my.cnf，指定mysql.socket的位置： /var/lib/mysql/mysql.sock (你的mysql.socket路径)。   </li>
<li>直接在php建立连接的时候指定my.socket的位置（官方文档：mysqli_connect）。比如： <code>$db = new MySQLi('localhost', 'root', 'root', 'my_db', '3306', '/var/run/mysqld/mysqld.sock')</code></li>
</ol>


<p>Reference:<a href="https://segmentfault.com/q/1010000000328531">mysqli不能使用localhost，请问这是怎么回事？</a></p>

<h3>4.超链接元素的 onclick 方法直接使用表单元素的名字调用其 submit 方法。</h3>

<pre><code class="html">&lt;form name="bm_form" action="/delete_bms" method="POST"&gt;
    &lt;tr&gt;
        &lt;td&gt;&lt;a href="https://www.google.com"&gt;https://www.google.com&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;&lt;input type="checkbox" name="del_me" value="https://www.google.com" /&gt;&lt;/td&gt;
    &lt;/tr&gt;

    &lt;tr&gt;
        &lt;td&gt;&lt;a href="https://www.twitter.com"&gt;https://www.twitter.com&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;&lt;input type="checkbox" name="del_me" value="https://www.twitter.com" /&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;/form&gt;

&lt;a href="#" onclick="bm_form.submit();"&gt;Delete BM&lt;/a&gt;
</code></pre>

<p>这里展示了可以直接使用表单元素的名字直接来提交的技巧。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Web 开发问题汇总(二)]]></title>
    <link href="http://DamianSheldon.github.io/blog/web-development-notes-part-two.html"/>
    <updated>2018-01-04T10:08:36+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/web-development-notes-part-two</id>
    <content type="html"><![CDATA[<h3>1.Uncaught TypeError: Cannot read property &lsquo;msie&rsquo; of undefined</h3>

<p>A:The $.browser method has been removed as of jQuery 1.9.</p>

<blockquote><p>jQuery.browser() removed</p>

<p>The jQuery.browser() method has been deprecated since jQuery 1.3 and is removed in 1.9. If needed, it is available as part of the jQuery Migrate plugin. We recommend using feature detection with a library such as Modernizr.</p>

<p>— jQuery Core 1.9 Upgrade Guide.</p></blockquote>

<p>As stated in the Upgrade Guide you can try using the <a href="https://github.com/jquery/jquery-migrate/">jQuery Migrate plugin</a> to restore this functionality and let jQuery Tools work.</p>

<p>Reference:<a href="http://stackoverflow.com/questions/14923301/uncaught-typeerror-cannot-read-property-msie-of-undefined-jquery-tools">Uncaught TypeError: Cannot read property &lsquo;msie&rsquo; of undefined - jQuery tools</a></p>

<h3>2.The superclass “javax.servlet.http.HttpServlet” was not found on the Java Build Path in Eclipse</h3>

<p>A:To include http-servlet into your class path, you have two options:</p>

<pre><code>1. In this solution, you can add desired server runtime into your application as project facet. As runtime servers have already servlet runtime dependencies, they get included into your project and hence error is gone.
2. Another option is include the servlet dependency through maven itself. This will also fix the error.
</code></pre>

<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
    &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;
    &lt;version&gt;2.5&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<p>Reference:<a href="https://howtodoinjava.com/tools/eclipse/solved-the-superclass-javax-servlet-http-httpservlet-was-not-found-on-the-java-build-path-in-eclipse/">The superclass “javax.servlet.http.HttpServlet” was not found on the Java Build Path in Eclipse</a></p>

<h3>3.Dynamic Web Module 3.1 requires Java 1.7 or newer</h3>

<p>A:</p>

<p>Step1:<br/>
Make sure your Java Project is configured probably to use Java 1.7.
Right click your project > Properties > Java Compiler and set “Compiler compliance level” to 1.7</p>

<p>Step2:<br/>
Java Build Path. Click “Edit“. And change it to “Java 7”</p>

<p>Step3:<br/>
Next from the menu on the left select Project Facets > Java and set its version to 1.7</p>

<p>Extra Tips:<br/>
If you have maven project try updating source and target version of java compiler to 1.7 in pom.xml file.</p>

<p>Reference:<a href="https://crunchify.com/how-to-solve-dynamic-web-module-3-1-requires-java-1-7-or-newer-in-eclipse/">How to solve “Dynamic Web Module 3.1 requires Java 1.7 or newer” in Eclipse</a></p>

<h3>4.How to display available goals of maven plugin?</h3>

<p>A:</p>

<blockquote><p>Recent Maven plugins have generally an help goal to have in the command line the description of the plugin, with their parameters and types. For instance, to understand the javadoc goal, you need to call:</p></blockquote>

<pre><code class="bash">$ mvn javadoc:help -Ddetail -Dgoal=javadoc
</code></pre>

<p>It works of course for Maven core plugins. to list all goals of the archetype plugin :</p>

<pre><code class="bash">$ mvn archetype:help
</code></pre>

<p>And it works also for third party plugins. For example, to display all goals of the spring-boot plugin :</p>

<pre><code class="bash">$ mvn spring-boot:help
</code></pre>

<p>Reference:<a href="https://stackoverflow.com/questions/1674524/how-to-display-a-list-of-available-goals">How to display a list of available goals?</a></p>

<h3>5.Not a java source folder</h3>

<p>A:以 maven-archetype-webapp 为原型新建工程，建好的工程没有 java 目录，于是在 src/main 下新建 java 目录，之后新建 Filter 或 Servlet 时提示 Not a java source folder.尝试右击 java 目录 > Build Path > Use as Source Folder 依然未生效，只得将目录删除恢复原状想其他办法。</p>

<p>于是选中工程 > Properties > Java Build Path > Source， 里面提示 src/main/java build path entries are missing, 嗯，有了新的线索，于是将这些丢失的入口都删除了，再重新创建 java source folder, 这样问题得到了解决，感觉这个问题像是 eclipse 的一个 bug.</p>

<!--more-->


<h3>6.Thymeleaf 如何支持遍历枚举</h3>

<p>A:</p>

<blockquote><p>The java.util.List class isn’t the onlyvalue that can be used for iteration in Thymeleaf. There is a quite complete set of objects that are considered iterable by a th:each attribute:</p>

<ul>
<li>Any object implementing java.util.Iterable</li>
<li>Any object implementing java.util.Enumeration .</li>
<li>Any object implementing java.util.Iterator , whose values will be used as they are returned by the iterator, without the need to cache all values in memory.</li>
<li>Any object implementing java.util.Map . When iterating maps, iter variables will be of class java.util.Map.Entry . Any array.</li>
<li>Any other object will be treated as if it were a single-valued list containing the object itself.</li>
</ul>
</blockquote>

<p>上面就是可选方案，一开始我没看仔细，以为 Enumeration 可以直接遍历，之后细看是实现 java.util.Enumeration 的对象，这样综合来看将 Enumeration 转化成 List 是不错的选择。</p>

<p>```html</p>

<p><div th:each="attr: ${java.util.Collections.list(#httpServletRequest.attributeNames)}">
```</p>

<p>Reference:<a href="https://github.com/thymeleaf/thymeleaf/issues/321">please allow to iterate java.util.Enumeration</a></p>

<h3>7.Call method with iter vaiable as argument in thymeleaf</h3>

<p>A:</p>

<pre><code class="html">&lt;ul th:each="name : ${names}"&gt;
    &lt;li
        th:text="|${name} = ${#session.getAttribute(
        name )}|"&gt;uid
        = 502&lt;/li&gt;
&lt;/ul&gt;
</code></pre>

<p>Reference:<a href="http://forum.thymeleaf.org/invoking-a-method-on-model-with-parameter-td4026846.html">invoking a method on model with parameter</a></p>

<h3>8.Hiding text using text-indent</h3>

<p>A:</p>

<pre><code class="html">&lt;style type="text/css"&gt;

h1 a {
    text-decoration: none;
    position: absolute; /* Depending on your placement */
    width: 260px;
    height: 100px;
    bottom: 0px; /* Depending on your placement */
    background: url(images/aext-logo.png) no-repeat left top;
    text-indent: -99999px;
}

&lt;/style&gt;

&lt;h1&gt;&lt;a href="http://aext.net"&gt;AEXT.NET&lt;/a&gt;&lt;/h1&gt;
</code></pre>

<p>在尝试过程中发现要设置 width 和 height 才能生效，可以注意下。</p>

<p>Reference:<a href="http://bloggingexperiment.com/css-text-indent-style-your-html-form">CSS text-indent: An Excellent Trick To Style Your HTML Form</a></p>

<h3>9.SEVERE: Exception starting filter</h3>

<p>A:详细错误信息如下：</p>

<pre><code>Apr 08, 2018 10:28:48 AM org.apache.catalina.core.StandardContext filterStart
SEVERE: Exception starting filter [DispatchFilter]
java.lang.ClassNotFoundException: com.tenneshop.bookmark.web.filter.DispatchFilter
    at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1291)
    at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1119)
    at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:544)
    at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:525)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:150)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:264)
    at org.apache.catalina.core.ApplicationFilterConfig.&lt;init&gt;(ApplicationFilterConfig.java:108)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4590)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5233)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1419)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1409)
    at java.util.concurrent.FutureTask.run(FutureTask.java:266)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at java.lang.Thread.run(Thread.java:745)

Apr 08, 2018 10:28:48 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: One or more Filters failed to start. Full details will be found in the appropriate container log file
Apr 08, 2018 10:28:48 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/bookmark] startup failed due to previous errors
</code></pre>

<p>从错误信息来看问题的原因是类找不到，于是可以到部署的目标路径下确认 <code>com.tenneshop.bookmark.web.filter.DispatchFilter</code>是否存在。从 eclipse 输出的 debug 日志中找到部署的目标路径：</p>

<pre><code>Apr 08, 2018 10:28:38 AM org.apache.catalina.startup.VersionLoggerListener log
INFO: Command line argument: -Dwtp.deploy=/Users/dongmeiliang/eclipse-workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp1/wtpwebapps
</code></pre>

<p>发现类确实不存在，重新 <code>$ mvn compile</code> 之后问题解决。回想下发觉问题产生的原因是我在终端 <code>$ mvn clean</code>，然后在 eclipse 中 refresh  project ，最后直接就 debug on server 导致没有包含编译的类。</p>

<p>Reference:<a href="https://stackoverflow.com/questions/32692321/tomcat-severe-exception-starting-filter-corsfilter-classnotfoundexception">Tomcat SEVERE: Exception starting filter CorsFilter, ClassNotFoundException</a></p>

<h3>10.如何改变 server context path?</h3>

<p>A:用 mvn 新建工程时，artifactId 写成了 package name，之后在访问 web 时就略显尴尬，可以通过 Window > Show View > Servers > Double click specific server > Modules > Edit target web module。</p>

<h3>11.Eclipse error: “The import XXX cannot be resolved”</h3>

<p>A:With me it helped changing the compiler compliance level. For unknown reasons it was set to 1.6 and I changed it to 1.8.
Once at project level right click on project > Properties > Java Compiler, while in Eclipse click on menu Window > Preferences > Java > Compiler.</p>

<p>Reference:<a href="https://stackoverflow.com/questions/4322893/eclipse-error-the-import-xxx-cannot-be-resolved">Eclipse error: “The import XXX cannot be resolved”</a></p>

<h3>12.Index downloads are disabled, search result may be incomplete.</h3>

<p>A:</p>

<ol>
<li>In Eclipse, click <strong>on Windows > Preferences</strong>, and then choose <strong>Maven</strong> in the left side.</li>
<li>Check the box &ldquo;<strong>Download repository index updates on startup</strong>&rdquo;.</li>
<li>Optionally, check the boxes <strong>Download Artifact Sources</strong> and <strong>Download Artifact JavaDoc</strong>.</li>
<li>Click <strong>OK</strong>. The warning won&rsquo;t appear anymore.</li>
<li>Restart Eclipse.</li>
</ol>


<p>Reference:<a href="https://stackoverflow.com/questions/24252256/how-do-i-enable-index-downloads-in-eclipse-for-maven-dependency-search">How do I enable index downloads in Eclipse for Maven dependency search? </a></p>

<h3>13.How to Iterate Over a Map in Java</h3>

<p>A:There are at least 4 method to iterate over a map, one is Iterating over entries using For-Each loop.</p>

<pre><code class="java">Map&lt;Integer, Integer&gt; map = new HashMap&lt;Integer, Integer&gt;();
for (Map.Entry&lt;Integer, Integer&gt; entry : map.entrySet()) {
    System.out.println("Key = " + entry.getKey() + ", Value = " + entry.getValue());
}
</code></pre>

<p>Reference:<a href="http://www.sergiy.ca/how-to-iterate-over-a-map-in-java/">How to Iterate Over a Map in Java</a></p>

<h3>14.How to get the row count of ResultSet?</h3>

<p>A:</p>

<pre><code class="java">Statement s = cd.createStatement();
ResultSet r = s.executeQuery("SELECT COUNT(*) AS rowcount FROM FieldMaster");
r.next();
int count = r.getInt("rowcount");
r.close();
System.out.println("MyTable has " + count + " row(s).");
</code></pre>

<p>Reference:<a href="https://stackoverflow.com/questions/7886462/how-to-get-row-count-using-resultset-in-java">How to get row count using ResultSet in Java?</a></p>

<h3>15.How to Generate random words in Java?</h3>

<p>A:</p>

<pre><code class="java">public static String[] generateRandomWords(int numberOfWords)
{
    String[] randomStrings = new String[numberOfWords];
    Random random = new Random();
    for(int i = 0; i &lt; numberOfWords; i++)
    {
        char[] word = new char[random.nextInt(8)+3]; // words of length 3 through 10. (1 and 2 letter words are boring.)
        for(int j = 0; j &lt; word.length; j++)
        {
            word[j] = (char)('a' + random.nextInt(26));
        }
        randomStrings[i] = new String(word);
    }
    return randomStrings;
}
</code></pre>

<p>Reference:<a href="https://stackoverflow.com/questions/4951997/generating-random-words-in-java">Generating random words in Java?</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Web 开发问题汇总(一)]]></title>
    <link href="http://DamianSheldon.github.io/blog/web-development-notes-part-one.html"/>
    <updated>2015-12-12T22:27:22+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/web-development-notes-part-one</id>
    <content type="html"><![CDATA[<h3>1. What is href=“#” and why is it used?</h3>

<p>Solution:</p>

<pre><code>A hashtag - # within a hyperlink specifies an html element id to which the window should be scrolled.  
href="#some-id" would scroll to an element on the current page such as &lt;div id="some-id"&gt;.

href="//site.com/#some-id" would go to site.com and scroll to the id on that page.  

href="#" doesn't specify an id name, but does have a corresponding location - the top of the page. Clicking an anchor with href="#" will move the scroll position to the top.
</code></pre>

<p>Reference:<a href="http://stackoverflow.com/questions/4855168/what-is-href-and-why-is-it-used">http://stackoverflow.com/questions/4855168/what-is-href-and-why-is-it-used</a></p>

<h3>2. How to debug your web page, technology stack is LAMP.</h3>

<p>Solution:View log, figure out what cause problems.</p>

<pre><code>$ tail -f /var/log/apache2/error_log
[Fri Dec 11 21:34:57.003657 2015] [:error] [pid 17465] [client ::1:50505] PHP Parse error:  parse error, expecting `','' or `';'' in /Users/dongmeiliang/Sites/knowledgeispower/includes/header.html on line 7
[Fri Dec 11 21:34:57.003701 2015] [:error] [pid 17465] [client ::1:50505] PHP Stack trace:
[Fri Dec 11 21:34:57.003723 2015] [:error] [pid 17465] [client ::1:50505] PHP   1. {main}() /Users/dongmeiliang/Sites/knowledgeispower/index.php:0
</code></pre>

<!-- more -->


<h3>3. Install mcrypt_filter extension on El capitan</h3>

<pre><code>// Please make sure the PHP extensions listed below are installed.
mCrypt

// PECL is a repository of PHP extensions that are made available to you via the » PEAR packaging system. 

// There are several options for downloading PECL extensions, such as:
o The pecl install extname command downloads the extensions code automatically, so in this case there is no need for a separate download.
o » http://pecl.php.net/ The PECL web site contains information about the different extensions that are offered by the PHP Development Team. The information available here includes: ChangeLog, release notes, requirements and other similar details.
o pecl download extname PECL extensions that have releases listed on the PECL web site are available for download and installation using the » pecl command. Specific revisions may also be specified.
o SVN Most PECL extensions also reside in SVN. A web-based view may be seen at » http://svn.php.net/viewvc/pecl/. To download straight from SVN, the following sequence of commands may be used:

$ pecl search mCrypt
Retrieving data...0%
Matched packages, channel pecl.php.net:
=======================================
Package       Stable/(Latest) Local
mcrypt_filter 0.1.0 (beta)          Applies mcrypt symmetric encryption using stream filters

$ pecl install mcrypt_filter
Failed to download pecl/mcrypt_filter within preferred state "stable", latest release is version 0.1.0, stability "beta", use "channel://pecl.php.net/mcrypt_filter-0.1.0" to install
install failed

$ pecl install channel://pecl.php.net/mcrypt_filter-0.1.0/mcrypt_filter
Attempting to discover channel "pecl.php.net/mcrypt_filter-0.1.0"...
Attempting fallback to https instead of http on channel "pecl.php.net/mcrypt_filter-0.1.0"...
unknown channel "pecl.php.net/mcrypt_filter-0.1.0" in "channel://pecl.php.net/mcrypt_filter-0.1.0/mcrypt_filter"
invalid package name/package file "channel://pecl.php.net/mcrypt_filter-0.1.0/mcrypt_filter"
install failed

$ pecl install channel://pecl.php.net/mcrypt_filter-0.1.0
Cannot install, php_dir for channel "pecl.php.net" is not writeable by the current user
DongMeiliangsMacBook-Pro:upload dongmeiliang$ sudo pecl install channel://pecl.php.net/mcrypt_filter-0.1.0
Password:
downloading mcrypt_filter-0.1.0.tgz ...
Starting to download mcrypt_filter-0.1.0.tgz (4,586 bytes)
...
checking for mcrypt support... yes, shared
configure: error: mcrypt.h not found. Please reinstall libmcrypt.
ERROR: `/private/tmp/pear/install/mcrypt_filter/configure --with-php-config=/usr/bin/php-config' failed

// Resolve configure: error: mcrypt.h not found. Please reinstall libmcrypt.
Get libmcrypt 2.5.8 from Sourceforge: http://sourceforge.net/projects/mcrypt/files/Libmcrypt/2.5.8/libmcrypt-2.5.8.tar.gz/download

$ tar -zxvf libmcrypt-2.5.8.tar.gz
$ mkdir -p /usr/local/src
$ mv libmcrypt-2.5.8 /usr/local/src/
$ cd /usr/local/src/libmcrypt-2.5.8/
$ ./configure --prefix=/usr/local
$ make &amp;&amp; make install

// Continue install mCrypt extension
$ sudo pecl install channel://pecl.php.net/mcrypt_filter-0.1.0
...

12472464 40 -rwxr-xr-x  1 root  wheel  16704 Feb 15 21:41 /private/tmp/pear/install/pear-build-rootEyJ4Jg/install-mcrypt_filter-0.1.0/usr/lib/php/extensions/no-debug-non-zts-20121212/mcrypt_filter.so

Build process completed successfully
Installing '/usr/lib/php/extensions/no-debug-non-zts-20121212/mcrypt_filter.so'
ERROR: failed to write /usr/lib/php/extensions/no-debug-non-zts-20121212/mcrypt_filter.so (copy(/usr/lib/php/extensions/no-debug-non-zts-20121212/mcrypt_filter.so): failed to open stream: Operation not permitted)

We need to disable SIP.

OSX 10.11 El Capitan ships with a new security process referred to as SIP or Security Integrity Protection also known as rootless.

What this essentially does is protect certain system level directories from being changes, notably

o /System
o /sbin
o /usr
o not /usr/local

// Disabling SIP in OSX
o Reboot your Mac into Recovery Mode by rebooting and holding down ‘command’ + ‘r’
o Launch a Terminal session and enter csrutil disable
o Reboot

// Reinstall mCrypt extension
$ sudo pecl install channel://pecl.php.net/mcrypt_filter-0.1.0

...

Build process completed successfully
Installing '/usr/lib/php/extensions/no-debug-non-zts-20121212/mcrypt_filter.so'
install ok: channel://pecl.php.net/mcrypt_filter-0.1.0
configuration option "php_ini" is not set to php.ini location
You should add "extension=mcrypt_filter.so" to php.ini
</code></pre>

<p>Reference:<a href="http://www.nginx.cn/2196.html">http://www.nginx.cn/2196.html</a>
<a href="http://coolestguidesontheplanet.com/install-mcrypt-for-php-on-mac-osx-10-10-yosemite-for-a-development-server/">http://coolestguidesontheplanet.com/install-mcrypt-for-php-on-mac-osx-10-10-yosemite-for-a-development-server/</a></p>

<h3>4.Install mcrypt for php on Mac OSX 10.11 El Capitan</h3>

<p>o Disable SIP/rootless
You need to disable the new System Integrity Protection to install into some system protected directories – this involves a recovery reboot and disabling with.</p>

<pre><code>$ csrutil disable
</code></pre>

<p>o Getting it on in OS X El Capitan 10.11</p>

<pre><code>$ cd ~ ; mkdir mcrypt ; cd mcrypt
</code></pre>

<p><a href="http://sourceforge.net/projects/mcrypt/files/Libmcrypt/2.5.8/libmcrypt-2.5.8.tar.gz/download">Get libmcrypt 2.5.8 from Sourceforge</a>,  this is direct download link.</p>

<p><a href="http://php.net/releases/index.php">Get the php code in a tar.gz or .bz2 format</a>- (version 5.5.27 is the one that currently ships with OSX 10.11)</p>

<p>Move both of these files that you downloaded into your working directory – mcrypt in this instance, and go back to Terminal</p>

<pre><code>$ cd ~/mcrypt
</code></pre>

<p>Expand both files via the command line or just double click them in the Finder:</p>

<pre><code>$ tar -zxvf libmcrypt-2.5.8.tar.gz
$ tar -zxvf php-5.5.27.tar.gz
</code></pre>

<p>o Configuring libmcrypt</p>

<pre><code>$ cd libmcrypt-2.5.8
$ ./configure
$ make
$ sudo make install
</code></pre>

<p>o Compile mcrypt php Extension</p>

<pre><code>$ cd ../php-5.5.27/ext/mcrypt/
$ /usr/bin/phpize
$ ./configure
$ make
$ sudo make install
</code></pre>

<p>o Enabling mcrypt.so  php Extension</p>

<pre><code>// Open /etc/php.ini and add the line below at the end
extension=mcrypt.so

// If there is no php.ini file,  then you need to make one from php.ini.default in the same location like so:
$ sudo cp /etc/php.ini.default /etc/php.ini

// And allow write capability
$ sudo chmod u+w  /etc/php.ini

// Then add the line as above in your favourite text editor:
$ sudo vi /etc/php.ini

// make sure dynamic extensions are set to on…
extension_dl = On

// If it didn’t load you may need to declare the extensions directory in /etc/php.ini
extension_dir = "/usr/lib/php/extensions/no-debug-non-zts-20100525/"
</code></pre>

<p>o Restart Apache</p>

<pre><code>$ sudo apachectl restart
</code></pre>

<p>That’s it, create a php page with the function phpinfo();  to see if it loaded correctly.</p>

<p>Reference:<a href="http://coolestguidesontheplanet.com/install-mcrypt-for-php-on-mac-osx-10-10-yosemite-for-a-development-server/">http://coolestguidesontheplanet.com/install-mcrypt-for-php-on-mac-osx-10-10-yosemite-for-a-development-server/</a>
<a href="http://coolestguidesontheplanet.com/what-is-sip-in-osx-10-11-el-capitan/">http://coolestguidesontheplanet.com/what-is-sip-in-osx-10-11-el-capitan/</a></p>

<h3>4. How to set up Apache MySQL PHP on Debian?</h3>

<p>A:<a href="https://wiki.debian.org/LaMp">https://wiki.debian.org/LaMp</a></p>

<h3>5. Where is apache error log path on Debian?</h3>

<p>A:/var/log/apache2/error.log</p>

<h3>6.</h3>

<pre><code>$ php arrayTests.php
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php/extensions/no-debug-non-zts-20121212/' - dlopen(/usr/lib/php/extensions/no-debug-non-zts-20121212/, 9): no suitable image found.  Did find:
    /usr/lib/php/extensions/no-debug-non-zts-20121212/: not a file in Unknown on line 0
</code></pre>

<p>A:这个问题的原因是本来我应该是设置 extension_dir 的，结果在 php.ini里写成了 extension， 更正之后问题就解决了。</p>

<pre><code>extension_dir = "/usr/lib/php/extensions/no-debug-non-zts-20121212/"
</code></pre>

<p>Reference:<a href="http://stackoverflow.com/questions/5282264/php-warning-php-startup-unable-to-load-dynamic-library">http://stackoverflow.com/questions/5282264/php-warning-php-startup-unable-to-load-dynamic-library</a></p>

<h3>7.Why should the &lsquo;&amp;&rsquo; (ampersand) character be HTML escaped?</h3>

<p>A:The reason we escape the &amp; is precisely because it is the first character in special characters such as &amp;rsquo. If it is not escaped, some programs may be expecting a special character to begin when they see the ampersand.</p>

<p>But it is only escaped when you actually want the ampersand to show. You would not escape it in a special character. So you would always use &amp;rsquo and never &amp;rsquo.</p>

<p>Reference:<a href="https://www.quora.com/Why-should-the-ampersand-character-be-HTML-escaped">https://www.quora.com/Why-should-the-ampersand-character-be-HTML-escaped</a></p>

<h3>8.Evaluate JavaScript in terminal on Mac</h3>

<p>A:</p>

<pre><code>// 1.
$ osascript test.js
// 2.
// Use specified language and evaluate given script file
$jrunscript -l js -f test.js
$jrunscript test.js
</code></pre>

<h3>9.How to debug JavaScript?</h3>

<p>A:
Reference:<a href="https://developer.mozilla.org/en-US/docs/Mozilla/Debugging/Debugging_JavaScript">https://developer.mozilla.org/en-US/docs/Mozilla/Debugging/Debugging_JavaScript</a></p>

<h3>10.How to use WebSocket with an Apache server while main develop language is PHP?</h3>

<p>A:
One path is to use an independent installed web sockets server.</p>

<p>For PHP you can try: <a href="http://code.google.com/p/phpwebsocket/">http://code.google.com/p/phpwebsocket/</a> or <a href="http://code.google.com/p/phpws/">http://code.google.com/p/phpws/</a></p>

<p>There are some other projects which you can try as well.</p>

<p>Basically, you need to upload, unpack and start running the process.</p>

<p>On the frontend, you&rsquo;ll have javascript connecting to the server on the specific port.</p>

<p>Most websocket servers have a demo which echoes back whatever it hears, so this is a good place to write some test code. You may even find a rudimentary chat implementation.</p>

<p>The tricky part is to monitor the web socket server and to make sure it runs smoothly and continuously.</p>

<p>Try to test on as many browsers/devices as possible as this will decide on which websocket server implementation you choose. There are old and new protocols you have to watch out for.</p>

<p>Reference:<a href="http://stackoverflow.com/questions/11334320/using-websocket-on-apache-server">http://stackoverflow.com/questions/11334320/using-websocket-on-apache-server</a></p>

<h3>11.How do I enable apache file and directory indexing under Linux or UNIX?</h3>

<p>A:Under Apache web server automatic index generation is enabled with using Options +Indexes or Options Indexes directive.
If a URL which maps to a directory is requested, and there is no DirectoryIndex (e.g., index.html) in that directory, then mod_autoindex will return a formatted listing of the directory.</p>

<pre><code>// Option 1: Using Apache config file
// Add directory option to Apache configuration file /etc/httpd/httpd.conf or /etc/apache2/apache2.conf:
# vi /etc/apache2/apache2.conf

// Add following code:
&lt;Directory /var/www/domain.com/pdfs&gt;
Options Indexes FollowSymLinks
&lt;/Directory&gt;

// Save and close the file. Restart Apache:
# /etc/init.d/httpd restart

// OR
# /etc/init.d/apache2 restart

// Option 2: Using .htaccess Files with Apache
// You can place config line Options Indexes in .htaccess file. Make sure .htaccess file support is enabled.
// Change directory to pdfs
$ cd pdfs

// Open .htaccess file
$ vi .htaccess

// Append following apache directive:
Options Indexes

//Save and close the file.
</code></pre>

<p>Reference:<a href="https://www.cyberciti.biz/faq/enabling-apache-file-directory-indexing/">How do I enable apache file and directory indexing under Linux or UNIX?</a></p>

<h3>13.Twig:RuntimeException: Unable to create the cache directory</h3>

<p>A:The reason is web run via user www that hasn&rsquo;t right create cache directory in target position.</p>

<pre><code>sudo chown -R www:staff path/to/application
</code></pre>

<p>Reference:<a href="http://stackoverflow.com/questions/20127884/runtimeexception-unable-to-create-the-cache-directory-var-www-sonata-app-cach">RuntimeException: Unable to create the cache directory</a></p>

<h3>14.How to center a ul element?</h3>

<p>A:</p>

<pre><code>ul {
    display: table;
    margin: auto;
}
</code></pre>

<h3>15. 站内搜索引擎代码</h3>

<p>A:</p>

<p>```</p>

<!--Google站内搜索开始-->


<p><form method=get action="http://www.google.com/search">
<input type=text name=q>
<input type=submit name=btnG value="Google 搜索">
<input type=hidden name=ie value=GB2312>
<input type=hidden name=oe value=GB2312>
<input type=hidden name=hl value=zh-CN>
<input type=hidden name=domains value="www.amznz.com">
<input type=hidden name=sitesearch value="www.amznz.com">
</form></p>

<!--Google站内搜索结束-->




<!--Yahoo站内搜索开始-->


<p><form action="http://www.yahoo.com.cn/search">
<input type=text name="p">
<input type="submit" value="Yahoo 搜索">
<input type=hidden name=vs value="www.amznz.com">
</form></p>

<!--Yahoo站内搜索结束-->


<p>```</p>

<p>Reference:<a href="http://www.amznz.com/zhannei-sousuodaima/">站内搜索引擎代码</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Set up PHP development environment]]></title>
    <link href="http://DamianSheldon.github.io/blog/set-up-php-development-environment.html"/>
    <updated>2015-09-19T22:25:19+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/set-up-php-development-environment</id>
    <content type="html"><![CDATA[<h3>Notes of Set up PHP development environment</h3>

<ol>
<li>Install <a href="https://eclipse.org/pdt/#download">Eclipse PDT</a>;</li>
<li><a href="http://jason.pureconcepts.net/2012/10/install-pear-pecl-mac-os-x/">Install PEAR and PECL on Mac OS X</a>, php.ini locate in /etc on Yosemite;</li>
<li><p><a href="http://www.xdebug.org/docs/install">Install Xdebug through PEAR/PECL</a>;<br/>
 Addition configure for Yosemite</p>

<ul>
<li><code>sudo cp /etc/php.ini.default /etc/php.ini</code></li>
<li>add &ldquo;zend_extension=/usr/lib/php/extensions/no-debug-non-zts-20121212/xdebug.so&rdquo; to php.ini</li>
</ul>
</li>
<li><p>Debugging Local PHP Files (PHP CLI Application)</p>

<ul>
<li>Create a PHP project;</li>
<li>Create a PHP file;</li>
<li>Set a breakpoint in PHP file;</li>
<li>Save file;</li>
<li>Create a new debug configuration;

<ul>
<li>Eclipse > Preference&hellip; > PHP Executables > Add (Executable path: <code>which php</code>)</li>
<li>Run > Debug Configurations > Select PHP CLI Application > New</li>
</ul>
</li>
</ul>
</li>
<li><p>Debugging PHP Web Applications (PHP Web Application)</p>

<ul>
<li>Create a PHP project;</li>
<li>Create a PHP file;</li>
<li>Create a new debug configuration;

<ul>
<li>Run > Debug Configurations > Select PHP Web Application > New</li>
</ul>
</li>
</ul>
</li>
<li><p>Test with PHPUnit</p>

<ul>
<li>Run > External Tools > External Tools Configurations&hellip; > Program > New
[Main]
Location:/usr/local/bin/phpunit
Working Directory:${workspace_loc:/Backend/tests}
Apply > Run
<a href="http://stackoverflow.com/questions/966673/eclipse-pdt-phpunit">Reference</a></li>
</ul>
</li>
<li><p>Integrate MakeGood (failure)</p>

<ul>
<li>Installing Prerequisite Software

<ul>
<li>PHP 5.5.27 (cli)</li>
<li>xdebug-2.3.2</li>
<li>eclipse mars(4.5.0)</li>
<li>PDT(3.5.0)</li>
<li>PHPUnit (4.8.6)</li>
</ul>
</li>
<li><p>Installing MakeGood
  Help -> Install New Software&hellip; -> Add&hellip; -> <a href="http://eclipse.piece-framework.com/">http://eclipse.piece-framework.com/</a></p></li>
<li><p>Selecting a Testing Framework</p></li>
<li><p>Resolving the Dependencies to the Testing Framework</p>

<pre><code>  * Defining User Libraries
      Eclipse -&gt; Preferences... &gt; PHP -&gt; PHP Libraries &gt; New... &gt; OK
      Add External folder... &gt; [Verifying the include path](http://pear.php.net/manual/en/installation.checking.php)
  * Adding User Libraries to the Project
</code></pre>

<p>   fail with PHPUnit_Framework_TestCase class is not available. Fix&hellip;, I doubt that MakeGood doesn&rsquo;t support eclipse mars.</p></li>
</ul>


<p> *Testing Framework Specific Configuration<br/>
     PHPUnit</p>

<pre><code> * Open the properties for the project.
 * Select MakeGood.
 * Select PHPUnit.
 * Specify the XML Configuration File. [eg](http://beagile.biz/a-simple-phpunit-xml-configuration-example/)
</code></pre>

<p> <a href="http://piece-framework.com/projects/makegood/wiki/MakeGood_User_Guide_1_7_0">Reference</a></p></li>
</ol>


<h3>Throw java.lang.NullPointerException when create a new debug configuration</h3>

<p>Solution: Add a PHP Executable, Eclipse > Preference&hellip; > PHP Executables > Add (Executable path: <code>which php</code>)</p>

<h3>Wait for XDebug session</h3>

<p>Solution:Debugging PHP Web Applications时卡在这里，原因是XDebug remote debug没配置好，参考了<a href="http://www.xdebug.org/docs/remote">Remote Debugging</a>和<a href="https://wiki.eclipse.org/Debugging_using_XDebug">Debugging using XDebug</a>，发现phpinfo()输出的内容并没有XDebug。于是来开始配置php.ini,参考的<a href="http://stackoverflow.com/questions/27861720/how-to-set-default-php-ini-to-be-used-osx-yosemite">How to set default php.ini to be used, OSX Yosemite</a></p>

<pre><code>sudo cp /etc/php.ini.default /etc/php.ini

// Add follow content to php.ini
[XDebug]
zend_extension=/usr/lib/php/extensions/no-debug-non-zts-20121212/xdebug.so
xdebug.remote_enable=On
xdebug.remote_handler=dbgp
xdebug.remote_host=helloworld.local
xdebug.remote_port=9000
;xdebug.remote_connect_back=1
xdebug.remote_mode="req"
xdebug.remote_log="/var/log/xdebug.log"

sudo apachectl restart
</code></pre>

<h3>/private/tmp/pear/install/xdebug/xdebug.c:25:10: fatal error: &lsquo;php.h&rsquo; file not found</h3>

<p>Solution:</p>

<pre><code>$ xcode-select --install
</code></pre>

<p>Reference:<a href="http://stackoverflow.com/questions/19531262/cant-phpize-or-configure-an-extension-in-os-x-10-9-mavericks">http://stackoverflow.com/questions/19531262/cant-phpize-or-configure-an-extension-in-os-x-10-9-mavericks</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[MySQL 使用笔记]]></title>
    <link href="http://DamianSheldon.github.io/blog/using-mysql.html"/>
    <updated>2015-08-12T22:01:09+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/using-mysql</id>
    <content type="html"><![CDATA[<h3>1.查看所有的用户</h3>

<pre><code>$ mysql -u user -p

As of MySQL 5.7.6, use this statement:
mysql&gt; SELECT User, Host, HEX(authentication_string) FROM mysql.user;

Before MySQL 5.7.6, use this statement:
mysql&gt; SELECT User, Host, Password FROM mysql.user;
</code></pre>

<h3>2.查看用户的权限</h3>

<pre><code>mysql &gt; SHOW GRANTS FOR 'username'@'localhost';
</code></pre>

<h3>3.为用户添加操作某个数据库的权限</h3>

<pre><code>GRANT select, insert, update, delete, index, alter, create ON db2.* TO 'jeffrey'@'localhost';
</code></pre>

<h3>4.Default options are read from the following files in the given order:</h3>

<p>/etc/my.cnf /etc/mysql/my.cnf /usr/local/mysql/etc/my.cnf ~/.my.cnf</p>

<h3>5.</h3>

<pre><code>mysql &gt; CREATE TABLE IF NOT EXISTS categories (
    id SMALLINT NOT NULL AUTO_INCREMENT,
    category VARCHAR(30) NOT NULL,
    PRIMARY KEY (id),
    UNIQUE KEY category (category)
)ENGINE = MyISAM DEFAULT CHARSET = utf8;
</code></pre>

<ul>
<li>VARCHAR(30):can hold up to 30 characters.</li>
<li>A UNIQUE index creates a constraint such that all values in the index must be distinct. An error occurs if you try to add a new row with a key value that matches an existing row. For all engines, a UNIQUE index permits multiple NULL values for columns that can contain NULL.</li>
<li>DEFAULT CHARSET</li>
</ul>


<!-- more -->


<h3>6.</h3>

<pre><code>mysql &gt; CREATE TABLE IF NOT EXISTS orders (
    id INT UNSIGNED NOT NULL,
    user_id INT UNSIGNED NOT NULL,
    transaction_id VARCHAR(19) NOT NULL,
    payment_status VARCHAR(15) NOT NULL,
    payment_amount DECIMAL(6,2) UNSIGNED NOT NULL,
    payment_date_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY(id),
    KEY user_id (user_id)
)ENGINE = MyISAM DEFAULT CHARSET = utf8;
</code></pre>

<ul>
<li>KEY is normally a synonym for INDEX. The key attribute PRIMARY KEY can also be specified as just KEY when given in a column definition. This was implemented for compatibility with other database systems.</li>
<li>INDEX</li>
</ul>


<h3>7.&ndash;log-bin option</h3>

<p>Q:How to check the &ndash;log-bin status of MySQL?
A:</p>

<blockquote><p>To make incremental backups, we need to save the incremental changes. In MySQL, these changes are represented in the binary log, so the MySQL server should always be started with the &ndash;log-bin option to enable that log.</p></blockquote>

<p>Q:How to enable the &ndash;log-bin option of MySQL?
A:To enable the binary log, start the server with the &ndash;log-bin[=base_name] option. If no base_name value is given, the default name is the value of the pid-file option (which by default is the name of host machine) followed by -bin. If the base name is given, the server writes the file in the data directory unless the base name is given with a leading absolute path name to specify a different directory. It is recommended that you specify a base name explicitly rather than using the default of the host name;</p>

<h3>8.You have enabled the binary log, but you haven&rsquo;t provided the mandatory server-id.</h3>

<pre><code>2016-01-27T14:15:24.323616Z 0 [Note] /usr/local/mysql/bin/mysqld (mysqld 5.7.9-log) starting as process 9709 ...
2016-01-27T14:15:24.327264Z 0 [Warning] Setting lower_case_table_names=2 because file system for /usr/local/mysql/data/ is case insensitive
2016-01-27T14:15:24.327888Z 0 [ERROR] You have enabled the binary log, but you haven't provided the mandatory server-id. Please refer to the proper server start-up parameters documentation
2016-01-27T14:15:24.328034Z 0 [ERROR] Aborting

2016-01-27T14:15:24.328049Z 0 [Note] Binlog end
2016-01-27T14:15:24.328153Z 0 [Note] /usr/local/mysql/bin/mysqld: Shutdown complete
</code></pre>

<p>A: set server-id</p>

<pre><code>sudo /usr/local/mysql/bin/mysqld --user=_mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data --plugin-dir=/usr/local/mysql/lib/plugin --log-error=/usr/local/mysql/data/mysqld.local.err --pid-file=/usr/local/mysql/data/mysqld.local.pid --log-bin --server-id=1
</code></pre>

<blockquote><p>When enabling binary logs, the server ID is automatically set to &lsquo;1&rsquo;.  &ndash;(<a href="https://bugs.mysql.com/bug.php?id=56739">https://bugs.mysql.com/bug.php?id=56739</a>)</p></blockquote>

<p>Q:How can i get server_id in MYSQL?
A:SELECT @@server_id</p>

<h3>9.Q:如何分屏查看输出结果？</h3>

<p>A:</p>

<pre><code>// 用 less 分屏查看输出结果
mysql&gt; pager less;

// 关闭分屏查看
mysql&gt; nopager;
</code></pre>

<h3>10.Q:Scope rules for stored programs and views?</h3>

<p>A:</p>

<h3>11.Q:How to view all Stored Programs and Views in MySQL?</h3>

<p>A:</p>

<pre><code>// 1.Stored Routines (Procedures and Functions)
&gt; Query the ROUTINES table of the INFORMATION_SCHEMA database.
&gt; The ROUTINES table provides information about stored routines (both procedures and functions). The ROUTINES table does not include user-defined functions (UDFs).

// 2.Triggers
mysql&gt;SHOW TRIGGERS;

// 3.Event Scheduler
mysql&gt;SHOW EVENTS;

// 4.Views
</code></pre>

<h3>12.Q:How to view user-defined functions (UDFs)?</h3>

<p>A:</p>

<h3>13.mysqldump: Got error: 2013: Lost connection to MySQL server at &lsquo;reading initial communication packet&rsquo;, system error: 102 when trying to connect</h3>

<pre><code>DongMeiliangsMacBook-Pro:~ dongmeiliang$ mysqldump --single-transaction --databases opencart &gt; opencart_2016_02_27_22_28.sql
mysqldump: Got error: 2013: Lost connection to MySQL server at 'reading initial communication packet', system error: 102 when trying to connect
</code></pre>

<p>A:问题的原因是我已经打开了一个mysql连接，关闭之后重试就没问题了。</p>

<h3>14.How to Create an Admin User Account?</h3>

<p>A:</p>

<pre><code>/* 1. */
mysql&gt; CREATE USER 'monty'@'localhost' IDENTIFIED BY 'some_pass';
mysql&gt; GRANT ALL PRIVILEGES ON *.* TO 'monty'@'localhost'
    -&gt;     WITH GRANT OPTION;

/* 2. */
mysql&gt; CREATE USER 'monty'@'%' IDENTIFIED BY 'some_pass';
mysql&gt; GRANT ALL PRIVILEGES ON *.* TO 'monty'@'%'
    -&gt;     WITH GRANT OPTION;
</code></pre>

<h3>15./usr/local/mysql/data/Mac-mini.local.err: Permission denied</h3>

<p>A: Mysql 安装好后，启动出错，详细信息如下:</p>

<pre><code>Mac-mini:mysql dongmeiliang$ /usr/local/mysql/bin/mysqld_safe --user=mysql &amp;
[3] 41906
Mac-mini:mysql dongmeiliang$ /usr/local/mysql/bin/mysqld_safe: line 647: /usr/local/mysql/data/Mac-mini.local.err: Permission denied
Logging to '/usr/local/mysql/data/Mac-mini.local.err'.
2018-04-03T08:50:51.6NZ mysqld_safe Starting mysqld daemon with databases from /usr/local/mysql/data
/usr/local/mysql/bin/mysqld_safe: line 144: /usr/local/mysql/data/Mac-mini.local.err: Permission denied
/usr/local/mysql/bin/mysqld_safe: line 198: /usr/local/mysql/data/Mac-mini.local.err: Permission denied
/usr/local/mysql/bin/mysqld_safe: line 906: /usr/local/mysql/data/Mac-mini.local.err: Permission denied
rm: /usr/local/mysql/data/Mac-mini.local.pid.shutdown: Permission denied
2018-04-03T08:50:51.6NZ mysqld_safe mysqld from pid file /usr/local/mysql/data/Mac-mini.local.pid ended
/usr/local/mysql/bin/mysqld_safe: line 144: /usr/local/mysql/data/Mac-mini.local.err: Permission denied

[3]   Done                    /usr/local/mysql/bin/mysqld_safe --user=mysql
</code></pre>

<p>从错误信息来看是权限问题。在 General Notes on Installing MySQL on macOS 中有这么一段介绍：</p>

<blockquote><p>You may need (or want) to create a specific mysql user to own the MySQL directory and data. You can do this through the Directory Utility, and the mysql user should already exist. For use in single user mode, an entry for _mysql (note the underscore prefix) should already exist within the system /etc/passwd file.</p></blockquote>

<p>于是来确认 mysql 账号是否存在，我们用 Directory Utility 来做这件事情。可以按 System Preferences > Users &amp; Groups > Network Account Server join > Open Directory Utility > Directory Editor 来打开账号管理界面，在里面确实没有 mysql 账号，于是尝试创建这个账号，但是创建失败，提示账号已经存在，这就不知道是个什么鬼了。当然我们也可以使用对应的 Directory Utility 命令 dscl， 具体可参考 <a href="http://damiansheldon.github.io/blog/problems-when-use-mac.html">To create a user</a></p>

<p>既然 mysql 创建不了，尝试使用其他的账号，于是把一个常用的账号加到 _mysql 组，为 /usr/local/mysql/data 赋予组写入权限，使用命令 <code>/usr/local/mysql/bin/mysqld_safe --user=dongmeiliang &amp;</code> 成功启动。</p>
]]></content>
  </entry>
  
</feed>
