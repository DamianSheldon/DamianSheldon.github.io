<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: archives | Hello World]]></title>
  <link href="http://DamianSheldon.github.io/blog/categories/archives/atom.xml" rel="self"/>
  <link href="http://DamianSheldon.github.io/"/>
  <updated>2015-12-11T11:11:19+08:00</updated>
  <id>http://DamianSheldon.github.io/</id>
  <author>
    <name><![CDATA[Sheldon]]></name>
    <email><![CDATA[dongmeilianghy@sina.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[iOS 项目持续集成和部署笔记]]></title>
    <link href="http://DamianSheldon.github.io/blog/continuous-integration-and-deployment-for-ios-projects.html"/>
    <updated>2015-11-04T09:38:13+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/continuous-integration-and-deployment-for-ios-projects</id>
    <content type="html"><![CDATA[<p>本文是我做 iOS 项目持续集成和部署的笔记。</p>

<h3>安装工具</h3>

<ol>
<li><p><a href="http://jenkins-ci.org/">jenkins</a>;</p>

<pre><code class="`"> $ brew update &amp;&amp; brew install jenkins
</code></pre></li>
<li><p><a href="https://github.com/fastlane/fastlane">fastlane</a>;</p>

<pre><code class="`"> $ sudo gem install fastlane --verbose
</code></pre></li>
<li><p><a href="https://github.com/FIRHQ/fir-cli/blob/master/README.md">fir-cli</a>;</p>

<pre><code class="`"> $ sudo gem install fir-cli
</code></pre></li>
</ol>


<!-- more -->


<h3>fastlane 自动构建</h3>

<ul>
<li>cd [your_project_folder]</li>
<li>fastlane init</li>
<li>Follow the setup assistant, which will set up fastlane for you</li>
<li>Edit Fastfile</li>
</ul>


<pre><code>fastlane_version "1.25.0"

default_platform :ios


platform :ios do
  before_all do
    ENV["SLACK_URL"] = "https://hooks.slack.com/services/..."
    #cocoapods

    increment_build_number

    gym(scheme: "srsApp") # Build your app - more options available

    # xctool # run the tests of your app
  end

  desc "Runs all the tests"
  lane :test do
    snapshot
  end

  desc "Submit a new Beta Build to fir"
  desc "This will also make sure the profile is up to date"
  lane :fir do
    #snapshot
    sh "sigh --team_id your_team_id"
    #deliver(beta: true)

    #"ipa distribute:pgyer -u USER_KEY -a APP_KEY" # 上传到蒲公英

    #"ipa distribute:fir -u USER_TOKEN -a APP_ID" # 上传到fir.im

    # sh"ipa distribute:fir -u USER_KEY -a APP_KEY"
    # You can also use other beta testing services here
    sh "fir p ../srsApp.ipa -T USER_TOKEN"
  end

  desc "Submit a new Beta Build to pgyer "
  desc "This will also make sure the profile is up to date"
  lane :pgyer do
    #snapshot
    sh "sigh --team_id your_team_id"
    #deliver(beta: true)

    # You can also use other beta testing services here
    sh "curl -F \"file=@/Users/dongmeiliang/Documents/HJKApp/srsApp/srsApp.ipa\" -F \"uKey=USER_TOKEN\" -F \"_api_key=APP_KEY\" http://www.pgyer.com/apiv1/app/upload"
  end

  # You can define as many lanes as you want

  after_all do |lane|
    # This block is called, only if the executed lane was successful

     slack(
       message: "Successfully deployed new App Update."
     )
  end

  error do |lane, exception|
     slack(
       message: exception.message,
       success: false
     )
  end
end
</code></pre>

<p>使用 <code>fastlane fir</code>测试能否正常构建。</p>

<h3>自动测试</h3>

<p>可以利用 xcodebuild 命令来实现自动测试。
<code>
$ xcodebuild -project UI\ Testing\ In\ Xcode.xcodeproj -scheme UI\ Testing\ In\ Xcode -destination 'platform=iOS Simulator,name=iPhone 6s,OS=9.1' test
</code></p>

<h3>jenkins 持续集成</h3>

<ol>
<li><p>创建自动构建 job</p>

<ul>
<li>Open <a href="http://localhost:8080">http://localhost:8080</a> with safari</li>
<li><p>Install plugins</p>

<ul>
<li>HTML Publisher Plugin</li>
<li>AnsiColor Plugin</li>
<li>Rebuild Plugin</li>
<li>GIT Plugin</li>
</ul>
</li>
<li><p>Create job > input item name > Freestyle project > OK</p></li>
<li><p>Configuration
  Source Code Management
  Git
  Repository URL /Users/dongmeiliang/Documents/HJKApp
  Branches to build */test
  Add build step > Execute shell</p>

<pre><code class="``">  #!/bin/bash   
  source ~/.bash_profile  
  cd srsApp/  
  fastlane  fir  
</code></pre></li>
<li>Save > build</li>
</ul>
</li>
<li><p>创建自动测试 job</p>

<p> Add build step > Execute shell</p>

<pre><code class="`"> #!/bin/bash   
 source ~/.bash_profile  
 $ xcodebuild -project UI\ Testing\ In\ Xcode.xcodeproj -scheme UI\ Testing\ In\ Xcode -destination 'platform=iOS Simulator,name=iPhone 6s,OS=9.1' test
</code></pre></li>
</ol>


<h2>Reference</h2>

<p>Testing with Xcode
<a href="https://github.com/fastlane/fastlane">fastlane</a><br/>
<a href="https://github.com/fastlane/fastlane/blob/master/docs/Jenkins.md">Jenkins Integration</a><br/>
<a href="http://blog.csdn.net/colorapp/article/details/47007329">iOS可持续化集成: Jenkins + bundler + cocoapods + shenzhen + fastlane + pgyer</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS App 开发问题汇总（四）]]></title>
    <link href="http://DamianSheldon.github.io/blog/ios-devleopment-problems-part-4.html"/>
    <updated>2015-10-15T15:04:13+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/ios-devleopment-problems-part-4</id>
    <content type="html"><![CDATA[<h3>1. Suppressing deprecated warnings</h3>

<pre><code>#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wdeprecated-declarations"
[reciver deprecatedMethod];
#pragma clang diagnostic pop
</code></pre>

<h3>2. Warning libopencore-amrnb.a, missing required architecture arm64</h3>

<pre><code>ld: warning: ignoring file /Users/dongmeiliang/Downloads/VoiceConvert/VoiceConvert/VoiceConvert/lib/libopencore-amrnb.a, missing required architecture arm64 in file /Users/dongmeiliang/Downloads/VoiceConvert/VoiceConvert/VoiceConvert/lib/libopencore-amrnb.a (3 slices)
ld: warning: ignoring file /Users/dongmeiliang/Downloads/VoiceConvert/VoiceConvert/VoiceConvert/lib/libopencore-amrwb.a, missing required architecture arm64 in file /Users/dongmeiliang/Downloads/VoiceConvert/VoiceConvert/VoiceConvert/lib/libopencore-amrwb.a (3 slices)
Undefined symbols for architecture arm64:
  "_Decoder_Interface_init", referenced from:
      DecodeAMRFileToWAVEFile(char const*, char const*) in libVoiceConvert.a(amrFileCodec.o)
  "_Decoder_Interface_Decode", referenced from:
      DecodeAMRFileToWAVEFile(char const*, char const*) in libVoiceConvert.a(amrFileCodec.o)
  "_Decoder_Interface_exit", referenced from:
      DecodeAMRFileToWAVEFile(char const*, char const*) in libVoiceConvert.a(amrFileCodec.o)
  "_Encoder_Interface_init", referenced from:
      EncodeWAVEFileToAMRFile(char const*, char const*, int, int) in libVoiceConvert.a(amrFileCodec.o)
  "___gxx_personality_v0", referenced from:
      +[VoiceConverter amrToWav:wavSavePath:] in libVoiceConvert.a(VoiceConverter.o)
      +[VoiceConverter wavToAmr:amrSavePath:] in libVoiceConvert.a(VoiceConverter.o)
  "_Encoder_Interface_Encode", referenced from:
      EncodeWAVEFileToAMRFile(char const*, char const*, int, int) in libVoiceConvert.a(amrFileCodec.o)
  "_Encoder_Interface_exit", referenced from:
      EncodeWAVEFileToAMRFile(char const*, char const*, int, int) in libVoiceConvert.a(amrFileCodec.o)
</code></pre>

<p>Solution: Recompile a static library refer <a href="https://github.com/feuvan/opencore-amr-iOS">opencore-amr-iOS</a></p>

<!-- more -->


<h3>3. Undefined symbols for architecture arm64:</h3>

<p>  &ldquo;___gxx_personality_v0&rdquo;, referenced from:
      +[VoiceConverter amrToWav:wavSavePath:] in libVoiceConvert.a(VoiceConverter.o)
      +[VoiceConverter wavToAmr:amrSavePath:] in libVoiceConvert.a(VoiceConverter.o)
ld: symbol(s) not found for architecture arm64</p>

<p>Solution: Project > Targets > Select your product target > Build Settings > Other Linker Flags > Add -l"stdc++"</p>

<p>Reference:<a href="http://stackoverflow.com/questions/2846679/creating-an-objective-c-static-library-in-xcode">http://stackoverflow.com/questions/2846679/creating-an-objective-c-static-library-in-xcode</a></p>

<h3>4. Suppressing performSelector may cause leaks warnings</h3>

<pre><code>#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Warc-performSelector-leaks"
    [self.ticketTarget performSelector: self.ticketAction withObject: self];
#pragma clang diagnostic pop
</code></pre>

<p>Reference:<a href="http://stackoverflow.com/questions/7017281/performselector-may-cause-a-leak-because-its-selector-is-unknown">http://stackoverflow.com/questions/7017281/performselector-may-cause-a-leak-because-its-selector-is-unknown</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[使用 Mac 遇到的问题]]></title>
    <link href="http://DamianSheldon.github.io/blog/problems-when-use-mac.html"/>
    <updated>2015-10-10T08:49:37+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/problems-when-use-mac</id>
    <content type="html"><![CDATA[<h2>1. How to enable the three finger drag on OS X 10.11</h2>

<p>Step 1: Open System Preferences</p>

<p>Step 2: Click Accessibility</p>

<p>Step 3: Click Mouse &amp; Trackpad</p>

<p>Step 4: Click Trackpad Options…</p>

<p>Step 5: Click Enable dragging</p>

<p>Step 6: Select “three finger drag” in the drop down box</p>

<p>Reference:<a href="http://www.idownloadblog.com/2015/06/25/three-finger-drag-gesture-os-x-el-capitan/">http://www.idownloadblog.com/2015/06/25/three-finger-drag-gesture-os-x-el-capitan/</a></p>

<!-- more -->


<h2>2. How to find computer name on Mac</h2>

<ol>
<li><p>GUI<br/>
System Preference > Sharing</p></li>
<li><p>Command Line</p>

<pre><code class="`"> $ hostname
</code></pre></li>
</ol>


<h2>3. SSH to Server Without Entering Password From Mac</h2>

<pre><code>$ cp ~/.ssh/id_rsa.pub ~/.ssh/authorized_keys
</code></pre>

<p>Reference:<a href="https://thecustomizewindows.com/2014/04/ssh-server-without-entering-password-mac-os-x/">https://thecustomizewindows.com/2014/04/ssh-server-without-entering-password-mac-os-x/</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Mac 安装 OS X El Capitan]]></title>
    <link href="http://DamianSheldon.github.io/blog/note-of-install-os-x-el-capitan-and-set-up-development-enviroment.html"/>
    <updated>2015-10-09T18:00:22+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/note-of-install-os-x-el-capitan-and-set-up-development-enviroment</id>
    <content type="html"><![CDATA[<p>最近 Apple 更新了 OS X，通过 App Store 更新下载下来 OS X El Capitan 的安装时遇到问题了 &ndash; 手头的这台 Mac 之前有人分区安装了 Windows, OS X 安装在第二个分区， OS X El Capitan 却不能安装在 OS X 所在的分区，而且格式化 Windows 所在的分区又报错，也是醉了，只好重装。</p>

<h2>备份数据</h2>

<p>我用 sftp 把数据备份到另一台 Mac 上, 之前也试过 Migration Assitant 都是卡在最后一分钟，不知道现在这个问题改善了没有。 用 sftp 备份中间也中断了好多次，但手头也没移动硬盘也只能这么将就着了。</p>

<h2>Install OS X El Capitan</h2>

<ol>
<li>需要一个 8GB 左右的 U 盘，因为 El Capitan 的大小超过 6GB ;</li>
<li>从 App Store 下载 El Capitan;</li>
<li>制作安装盘：
<code>
sudo /Applications/Install\ OS\ X\ Mavericks.app/Contents/Resources/createinstallmedia --volume /Volumes/Untitled --applicationpath /Applications/Install\ OS\ X\ Mavericks.app --nointeraction
</code></li>
<li>重新启动，按住 option 键，选择通过U盘启动，之后先进入磁盘工具里面把硬盘格式化了（你也可以选择不格式化，这样就是覆盖安装）;</li>
</ol>


<!-- more -->


<h2>安装常用软件</h2>

<ol>
<li>Download Xcode in App Store;</li>
<li>iTerm;</li>
<li>Chrome;</li>
<li>LibreOffice;</li>
<li>Microsoft Remote Desktop Connection;</li>
<li>Homebrew;</li>
<li>ruby;</li>
<li>Set up web development envrionment</li>
</ol>


<p>Reference:<a href="http://blog.devtang.com/blog/2014/04/12/install-mavericks-note/">http://blog.devtang.com/blog/2014/04/12/install-mavericks-note/</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Set up PHP development environment]]></title>
    <link href="http://DamianSheldon.github.io/blog/set-up-php-development-environment.html"/>
    <updated>2015-09-19T22:25:19+08:00</updated>
    <id>http://DamianSheldon.github.io/blog/set-up-php-development-environment</id>
    <content type="html"><![CDATA[<h3>Notes of Set up PHP development environment</h3>

<ol>
<li>Install <a href="https://eclipse.org/pdt/#download">Eclipse PDT</a>;</li>
<li><a href="http://jason.pureconcepts.net/2012/10/install-pear-pecl-mac-os-x/">Install PEAR and PECL on Mac OS X</a>, php.ini locate in /etc on Yosemite;</li>
<li><p><a href="http://www.xdebug.org/docs/install">Install Xdebug through PEAR/PECL</a>;<br/>
 Addition configure for Yosemite</p>

<ul>
<li><code>sudo cp /etc/php.ini.default /etc/php.ini</code></li>
<li>add &ldquo;zend_extension=/usr/lib/php/extensions/no-debug-non-zts-20121212/xdebug.so&rdquo; to php.ini</li>
</ul>
</li>
<li><p>Debugging Local PHP Files (PHP CLI Application)</p>

<ul>
<li>Create a PHP project;</li>
<li>Create a PHP file;</li>
<li>Set a breakpoint in PHP file;</li>
<li>Save file;</li>
<li>Create a new debug configuration;

<ul>
<li>Eclipse > Preference&hellip; > PHP Executables > Add (Executable path: <code>which php</code>)</li>
<li>Run > Debug Configurations > Select PHP CLI Application > New</li>
</ul>
</li>
</ul>
</li>
<li><p>Debugging PHP Web Applications (PHP Web Application)</p>

<ul>
<li>Create a PHP project;</li>
<li>Create a PHP file;</li>
<li>Create a new debug configuration;

<ul>
<li>Run > Debug Configurations > Select PHP Web Application > New</li>
</ul>
</li>
</ul>
</li>
<li><p>Test with PHPUnit</p>

<ul>
<li>Run > External Tools > External Tools Configurations&hellip; > Program > New
[Main]
Location:/usr/local/bin/phpunit
Working Directory:${workspace_loc:/Backend/tests}
Apply > Run
<a href="http://stackoverflow.com/questions/966673/eclipse-pdt-phpunit">Reference</a></li>
</ul>
</li>
<li><p>Integrate MakeGood (failure)</p>

<ul>
<li>Installing Prerequisite Software

<ul>
<li>PHP 5.5.27 (cli)</li>
<li>xdebug-2.3.2</li>
<li>eclipse mars(4.5.0)</li>
<li>PDT(3.5.0)</li>
<li>PHPUnit (4.8.6)</li>
</ul>
</li>
<li><p>Installing MakeGood
  Help -> Install New Software&hellip; -> Add&hellip; -> <a href="http://eclipse.piece-framework.com/">http://eclipse.piece-framework.com/</a></p></li>
<li><p>Selecting a Testing Framework</p></li>
<li><p>Resolving the Dependencies to the Testing Framework</p>

<pre><code>  * Defining User Libraries 
      Eclipse -&gt; Preferences... &gt; PHP -&gt; PHP Libraries &gt; New... &gt; OK
      Add External folder... &gt; [Verifying the include path](http://pear.php.net/manual/en/installation.checking.php)
  * Adding User Libraries to the Project
</code></pre>

<p>   fail with PHPUnit_Framework_TestCase class is not available. Fix&hellip;, I doubt that MakeGood doesn&rsquo;t support eclipse mars.</p></li>
</ul>


<p> *Testing Framework Specific Configuration<br/>
     PHPUnit</p>

<pre><code> * Open the properties for the project.
 * Select MakeGood.
 * Select PHPUnit.
 * Specify the XML Configuration File. [eg](http://beagile.biz/a-simple-phpunit-xml-configuration-example/)
</code></pre>

<p> <a href="http://piece-framework.com/projects/makegood/wiki/MakeGood_User_Guide_1_7_0">Reference</a></p></li>
</ol>


<h3>Throw java.lang.NullPointerException when create a new debug configuration</h3>

<p>Solution: Add a PHP Executable, Eclipse > Preference&hellip; > PHP Executables > Add (Executable path: <code>which php</code>)</p>

<h3>Wait for XDebug session</h3>

<p>Solution:Debugging PHP Web Applications时卡在这里，原因是XDebug remote debug没配置好，参考了<a href="http://www.xdebug.org/docs/remote">Remote Debugging</a>和<a href="https://wiki.eclipse.org/Debugging_using_XDebug">Debugging using XDebug</a>，发现phpinfo()输出的内容并没有XDebug。于是来开始配置php.ini,参考的<a href="http://stackoverflow.com/questions/27861720/how-to-set-default-php-ini-to-be-used-osx-yosemite">How to set default php.ini to be used, OSX Yosemite</a></p>

<pre><code>sudo cp /etc/php.ini.default /etc/php.ini

// Add follow content to php.ini
[XDebug]
zend_extension=/usr/lib/php/extensions/no-debug-non-zts-20121212/xdebug.so
xdebug.remote_enable=On
xdebug.remote_handler=dbgp
xdebug.remote_host=helloworld.local
xdebug.remote_port=9000
;xdebug.remote_connect_back=1
xdebug.remote_mode="req"
xdebug.remote_log="/var/log/xdebug.log"

sudo apachectl restart
</code></pre>

<h3>/private/tmp/pear/install/xdebug/xdebug.c:25:10: fatal error: &lsquo;php.h&rsquo; file not found</h3>

<p>Solution:</p>

<pre><code>$ xcode-select --install
</code></pre>

<p>Reference:<a href="http://stackoverflow.com/questions/19531262/cant-phpize-or-configure-an-extension-in-os-x-10-9-mavericks">http://stackoverflow.com/questions/19531262/cant-phpize-or-configure-an-extension-in-os-x-10-9-mavericks</a></p>
]]></content>
  </entry>
  
</feed>
